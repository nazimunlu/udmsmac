(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ax(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),n}var lm={exports:{}},jo={},cm={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),ix=Symbol.for("react.portal"),ox=Symbol.for("react.fragment"),lx=Symbol.for("react.strict_mode"),cx=Symbol.for("react.profiler"),dx=Symbol.for("react.provider"),ux=Symbol.for("react.context"),hx=Symbol.for("react.forward_ref"),fx=Symbol.for("react.suspense"),mx=Symbol.for("react.memo"),px=Symbol.for("react.lazy"),Lu=Symbol.iterator;function gx(e){return e===null||typeof e!="object"?null:(e=Lu&&e[Lu]||e["@@iterator"],typeof e=="function"?e:null)}var dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},um=Object.assign,hm={};function Mr(e,t,n){this.props=e,this.context=t,this.refs=hm,this.updater=n||dm}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fm(){}fm.prototype=Mr.prototype;function xd(e,t,n){this.props=e,this.context=t,this.refs=hm,this.updater=n||dm}var yd=xd.prototype=new fm;yd.constructor=xd;um(yd,Mr.prototype);yd.isPureReactComponent=!0;var Pu=Array.isArray,mm=Object.prototype.hasOwnProperty,vd={current:null},pm={key:!0,ref:!0,__self:!0,__source:!0};function gm(e,t,n){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)mm.call(t,s)&&!pm.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Ha,type:e,key:i,ref:o,props:a,_owner:vd.current}}function xx(e,t){return{$$typeof:Ha,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ha}function yx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mu=/\/+/g;function il(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yx(""+e.key):t.toString(36)}function Di(e,t,n,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ha:case ix:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+il(o,0):s,Pu(a)?(n="",e!=null&&(n=e.replace(Mu,"$&/")+"/"),Di(a,t,n,"",function(d){return d})):a!=null&&(bd(a)&&(a=xx(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Mu,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",Pu(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+il(i,l);o+=Di(i,t,n,c,a)}else if(c=gx(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+il(i,l++),o+=Di(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ni(e,t,n){if(e==null)return e;var s=[],a=0;return Di(e,s,"","",function(i){return t.call(n,i,a++)}),s}function vx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ot={current:null},Ci={transition:null},bx={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:Ci,ReactCurrentOwner:vd};function xm(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:ni,forEach:function(e,t,n){ni(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ni(e,function(){t++}),t},toArray:function(e){return ni(e,function(t){return t})||[]},only:function(e){if(!bd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=Mr;Fe.Fragment=ox;Fe.Profiler=cx;Fe.PureComponent=xd;Fe.StrictMode=lx;Fe.Suspense=fx;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bx;Fe.act=xm;Fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=um({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=vd.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mm.call(t,c)&&!pm.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Ha,type:e.type,key:a,ref:i,props:s,_owner:o}};Fe.createContext=function(e){return e={$$typeof:ux,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dx,_context:e},e.Consumer=e};Fe.createElement=gm;Fe.createFactory=function(e){var t=gm.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:hx,render:e}};Fe.isValidElement=bd;Fe.lazy=function(e){return{$$typeof:px,_payload:{_status:-1,_result:e},_init:vx}};Fe.memo=function(e,t){return{$$typeof:mx,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=Ci.transition;Ci.transition={};try{e()}finally{Ci.transition=t}};Fe.unstable_act=xm;Fe.useCallback=function(e,t){return Ot.current.useCallback(e,t)};Fe.useContext=function(e){return Ot.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return Ot.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return Ot.current.useEffect(e,t)};Fe.useId=function(){return Ot.current.useId()};Fe.useImperativeHandle=function(e,t,n){return Ot.current.useImperativeHandle(e,t,n)};Fe.useInsertionEffect=function(e,t){return Ot.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return Ot.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return Ot.current.useMemo(e,t)};Fe.useReducer=function(e,t,n){return Ot.current.useReducer(e,t,n)};Fe.useRef=function(e){return Ot.current.useRef(e)};Fe.useState=function(e){return Ot.current.useState(e)};Fe.useSyncExternalStore=function(e,t,n){return Ot.current.useSyncExternalStore(e,t,n)};Fe.useTransition=function(){return Ot.current.useTransition()};Fe.version="18.3.1";cm.exports=Fe;var I=cm.exports;const So=gd(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx=I,Nx=Symbol.for("react.element"),jx=Symbol.for("react.fragment"),Sx=Object.prototype.hasOwnProperty,_x=wx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kx={key:!0,ref:!0,__self:!0,__source:!0};function ym(e,t,n){var s,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)Sx.call(t,s)&&!kx.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Nx,type:e,key:i,ref:o,props:a,_owner:_x.current}}jo.Fragment=jx;jo.jsx=ym;jo.jsxs=ym;lm.exports=jo;var r=lm.exports,Yl={},vm={exports:{}},Yt={},bm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,D){var O=K.length;K.push(D);e:for(;0<O;){var z=O-1>>>1,L=K[z];if(0<a(L,D))K[z]=D,K[O]=L,O=z;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var D=K[0],O=K.pop();if(O!==D){K[0]=O;e:for(var z=0,L=K.length,C=L>>>1;z<C;){var V=2*(z+1)-1,W=K[V],ie=V+1,he=K[ie];if(0>a(W,O))ie<L&&0>a(he,W)?(K[z]=he,K[ie]=O,z=ie):(K[z]=W,K[V]=O,z=V);else if(ie<L&&0>a(he,O))K[z]=he,K[ie]=O,z=ie;else break e}}return D}function a(K,D){var O=K.sortIndex-D.sortIndex;return O!==0?O:K.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(K){for(var D=n(d);D!==null;){if(D.callback===null)s(d);else if(D.startTime<=K)s(d),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(d)}}function w(K){if(x=!1,y(K),!v)if(n(c)!==null)v=!0,Y(_);else{var D=n(d);D!==null&&H(w,D.startTime-K)}}function _(K,D){v=!1,x&&(x=!1,g(A),A=-1),p=!0;var O=h;try{for(y(D),m=n(c);m!==null&&(!(m.expirationTime>D)||K&&!Q());){var z=m.callback;if(typeof z=="function"){m.callback=null,h=m.priorityLevel;var L=z(m.expirationTime<=D);D=e.unstable_now(),typeof L=="function"?m.callback=L:m===n(c)&&s(c),y(D)}else s(c);m=n(c)}if(m!==null)var C=!0;else{var V=n(d);V!==null&&H(w,V.startTime-D),C=!1}return C}finally{m=null,h=O,p=!1}}var S=!1,k=null,A=-1,F=5,R=-1;function Q(){return!(e.unstable_now()-R<F)}function E(){if(k!==null){var K=e.unstable_now();R=K;var D=!0;try{D=k(!0,K)}finally{D?q():(S=!1,k=null)}}else S=!1}var q;if(typeof f=="function")q=function(){f(E)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Z=N.port2;N.port1.onmessage=E,q=function(){Z.postMessage(null)}}else q=function(){b(E,0)};function Y(K){k=K,S||(S=!0,q())}function H(K,D){A=b(function(){K(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,Y(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(K){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var O=h;h=D;try{return K()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,D){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var O=h;h=K;try{return D()}finally{h=O}},e.unstable_scheduleCallback=function(K,D,O){var z=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?z+O:z):O=z,K){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=O+L,K={id:u++,callback:D,priorityLevel:K,startTime:O,expirationTime:L,sortIndex:-1},O>z?(K.sortIndex=O,t(d,K),n(c)===null&&K===n(d)&&(x?(g(A),A=-1):x=!0,H(w,O-z))):(K.sortIndex=L,t(c,K),v||p||(v=!0,Y(_))),K},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(K){var D=h;return function(){var O=h;h=D;try{return K.apply(this,arguments)}finally{h=O}}}})(wm);bm.exports=wm;var Dx=bm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx=I,qt=Dx;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nm=new Set,Sa={};function Ws(e,t){Sr(e,t),Sr(e+"Capture",t)}function Sr(e,t){for(Sa[e]=t,e=0;e<t.length;e++)Nm.add(t[e])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=Object.prototype.hasOwnProperty,Ex=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ru={},Fu={};function Tx(e){return Vl.call(Fu,e)?!0:Vl.call(Ru,e)?!1:Ex.test(e)?Fu[e]=!0:(Ru[e]=!0,!1)}function Ax(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ix(e,t,n,s){if(t===null||typeof t>"u"||Ax(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lt(e,t,n,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jt[e]=new Lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jt[t]=new Lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jt[e]=new Lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jt[e]=new Lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jt[e]=new Lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jt[e]=new Lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jt[e]=new Lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jt[e]=new Lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jt[e]=new Lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var wd=/[\-:]([a-z])/g;function Nd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wd,Nd);jt[t]=new Lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wd,Nd);jt[t]=new Lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wd,Nd);jt[t]=new Lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!1,!1)});jt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function jd(e,t,n,s){var a=jt.hasOwnProperty(t)?jt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ix(t,n,a,s)&&(n=null),s||a===null?Tx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Un=Cx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,si=Symbol.for("react.element"),nr=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),Sd=Symbol.for("react.strict_mode"),Kl=Symbol.for("react.profiler"),jm=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),_d=Symbol.for("react.forward_ref"),Jl=Symbol.for("react.suspense"),Zl=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),_m=Symbol.for("react.offscreen"),zu=Symbol.iterator;function Hr(e){return e===null||typeof e!="object"?null:(e=zu&&e[zu]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,ol;function ra(e){if(ol===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ol=t&&t[1]||""}return`
`+ol+e}var ll=!1;function cl(e,t){if(!e||ll)return"";ll=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{ll=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ra(e):""}function Ox(e){switch(e.tag){case 5:return ra(e.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return e=cl(e.type,!1),e;case 11:return e=cl(e.type.render,!1),e;case 1:return e=cl(e.type,!0),e;default:return""}}function Ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sr:return"Fragment";case nr:return"Portal";case Kl:return"Profiler";case Sd:return"StrictMode";case Jl:return"Suspense";case Zl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sm:return(e.displayName||"Context")+".Consumer";case jm:return(e._context.displayName||"Context")+".Provider";case _d:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kd:return t=e.displayName||null,t!==null?t:Ql(e.type)||"Memo";case Vn:t=e._payload,e=e._init;try{return Ql(e(t))}catch{}}return null}function Lx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ql(t);case 8:return t===Sd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ds(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function km(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Px(e){var t=km(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ri(e){e._valueTracker||(e._valueTracker=Px(e))}function Dm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=km(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xl(e,t){var n=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $u(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ds(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cm(e,t){t=t.checked,t!=null&&jd(e,"checked",t,!1)}function ec(e,t){Cm(e,t);var n=ds(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tc(e,t.type,n):t.hasOwnProperty("defaultValue")&&tc(e,t.type,ds(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function tc(e,t,n){(t!=="number"||Bi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aa=Array.isArray;function xr(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ds(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function nc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(me(92));if(aa(n)){if(1<n.length)throw Error(me(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ds(n)}}function Em(e,t){var n=ds(t.value),s=ds(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Wu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ai,Am=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _a(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mx=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(e){Mx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ua[t]=ua[e]})});function Im(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ua.hasOwnProperty(e)&&ua[e]?(""+t).trim():t+"px"}function Om(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=Im(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var Rx=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(e,t){if(t){if(Rx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function ac(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function Dd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oc=null,yr=null,vr=null;function Gu(e){if(e=Va(e)){if(typeof oc!="function")throw Error(me(280));var t=e.stateNode;t&&(t=Eo(t),oc(e.stateNode,e.type,t))}}function Lm(e){yr?vr?vr.push(e):vr=[e]:yr=e}function Pm(){if(yr){var e=yr,t=vr;if(vr=yr=null,Gu(e),t)for(e=0;e<t.length;e++)Gu(t[e])}}function Mm(e,t){return e(t)}function Rm(){}var dl=!1;function Fm(e,t,n){if(dl)return e(t,n);dl=!0;try{return Mm(e,t,n)}finally{dl=!1,(yr!==null||vr!==null)&&(Rm(),Pm())}}function ka(e,t){var n=e.stateNode;if(n===null)return null;var s=Eo(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(me(231,t,typeof n));return n}var lc=!1;if(Ln)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){lc=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{lc=!1}function Fx(e,t,n,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var ha=!1,Wi=null,Gi=!1,cc=null,zx={onError:function(e){ha=!0,Wi=e}};function $x(e,t,n,s,a,i,o,l,c){ha=!1,Wi=null,Fx.apply(zx,arguments)}function Ux(e,t,n,s,a,i,o,l,c){if($x.apply(this,arguments),ha){if(ha){var d=Wi;ha=!1,Wi=null}else throw Error(me(198));Gi||(Gi=!0,cc=d)}}function Gs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hu(e){if(Gs(e)!==e)throw Error(me(188))}function Bx(e){var t=e.alternate;if(!t){if(t=Gs(e),t===null)throw Error(me(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Hu(a),e;if(i===s)return Hu(a),t;i=i.sibling}throw Error(me(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error(me(189))}}if(n.alternate!==s)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?e:t}function $m(e){return e=Bx(e),e!==null?Um(e):null}function Um(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Um(e);if(t!==null)return t;e=e.sibling}return null}var Bm=qt.unstable_scheduleCallback,qu=qt.unstable_cancelCallback,Wx=qt.unstable_shouldYield,Gx=qt.unstable_requestPaint,dt=qt.unstable_now,Hx=qt.unstable_getCurrentPriorityLevel,Cd=qt.unstable_ImmediatePriority,Wm=qt.unstable_UserBlockingPriority,Hi=qt.unstable_NormalPriority,qx=qt.unstable_LowPriority,Gm=qt.unstable_IdlePriority,_o=null,jn=null;function Yx(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(_o,e,void 0,(e.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Jx,Vx=Math.log,Kx=Math.LN2;function Jx(e){return e>>>=0,e===0?32:31-(Vx(e)/Kx|0)|0}var ii=64,oi=4194304;function ia(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qi(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?s=ia(l):(i&=o,i!==0&&(s=ia(i)))}else o=n&~a,o!==0?s=ia(o):i!==0&&(s=ia(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-fn(t),a=1<<n,s|=e[n],t&=~a;return s}function Zx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qx(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-fn(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=Zx(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function dc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hm(){var e=ii;return ii<<=1,!(ii&4194240)&&(ii=64),e}function ul(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fn(t),e[t]=n}function Xx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-fn(n),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~i}}function Ed(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-fn(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var We=0;function qm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ym,Td,Vm,Km,Jm,uc=!1,li=[],ns=null,ss=null,rs=null,Da=new Map,Ca=new Map,Zn=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yu(e,t){switch(e){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(t.pointerId)}}function Yr(e,t,n,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Va(t),t!==null&&Td(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function t1(e,t,n,s,a){switch(t){case"focusin":return ns=Yr(ns,e,t,n,s,a),!0;case"dragenter":return ss=Yr(ss,e,t,n,s,a),!0;case"mouseover":return rs=Yr(rs,e,t,n,s,a),!0;case"pointerover":var i=a.pointerId;return Da.set(i,Yr(Da.get(i)||null,e,t,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ca.set(i,Yr(Ca.get(i)||null,e,t,n,s,a)),!0}return!1}function Zm(e){var t=Ts(e.target);if(t!==null){var n=Gs(t);if(n!==null){if(t=n.tag,t===13){if(t=zm(n),t!==null){e.blockedOn=t,Jm(e.priority,function(){Vm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ei(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);ic=s,n.target.dispatchEvent(s),ic=null}else return t=Va(n),t!==null&&Td(t),e.blockedOn=n,!1;t.shift()}return!0}function Vu(e,t,n){Ei(e)&&n.delete(t)}function n1(){uc=!1,ns!==null&&Ei(ns)&&(ns=null),ss!==null&&Ei(ss)&&(ss=null),rs!==null&&Ei(rs)&&(rs=null),Da.forEach(Vu),Ca.forEach(Vu)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,uc||(uc=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,n1)))}function Ea(e){function t(a){return Vr(a,e)}if(0<li.length){Vr(li[0],e);for(var n=1;n<li.length;n++){var s=li[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ns!==null&&Vr(ns,e),ss!==null&&Vr(ss,e),rs!==null&&Vr(rs,e),Da.forEach(t),Ca.forEach(t),n=0;n<Zn.length;n++)s=Zn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)Zm(n),n.blockedOn===null&&Zn.shift()}var br=Un.ReactCurrentBatchConfig,Yi=!0;function s1(e,t,n,s){var a=We,i=br.transition;br.transition=null;try{We=1,Ad(e,t,n,s)}finally{We=a,br.transition=i}}function r1(e,t,n,s){var a=We,i=br.transition;br.transition=null;try{We=4,Ad(e,t,n,s)}finally{We=a,br.transition=i}}function Ad(e,t,n,s){if(Yi){var a=hc(e,t,n,s);if(a===null)wl(e,t,s,Vi,n),Yu(e,s);else if(t1(a,e,t,n,s))s.stopPropagation();else if(Yu(e,s),t&4&&-1<e1.indexOf(e)){for(;a!==null;){var i=Va(a);if(i!==null&&Ym(i),i=hc(e,t,n,s),i===null&&wl(e,t,s,Vi,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else wl(e,t,s,null,n)}}var Vi=null;function hc(e,t,n,s){if(Vi=null,e=Dd(s),e=Ts(e),e!==null)if(t=Gs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vi=e,null}function Qm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hx()){case Cd:return 1;case Wm:return 4;case Hi:case qx:return 16;case Gm:return 536870912;default:return 16}default:return 16}}var es=null,Id=null,Ti=null;function Xm(){if(Ti)return Ti;var e,t=Id,n=t.length,s,a="value"in es?es.value:es.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===a[i-s];s++);return Ti=a.slice(e,1<s?1-s:void 0)}function Ai(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function Ku(){return!1}function Vt(e){function t(n,s,a,i,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ci:Ku,this.isPropagationStopped=Ku,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),t}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Od=Vt(Rr),Ya=rt({},Rr,{view:0,detail:0}),a1=Vt(Ya),hl,fl,Kr,ko=rt({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ld,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kr&&(Kr&&e.type==="mousemove"?(hl=e.screenX-Kr.screenX,fl=e.screenY-Kr.screenY):fl=hl=0,Kr=e),hl)},movementY:function(e){return"movementY"in e?e.movementY:fl}}),Ju=Vt(ko),i1=rt({},ko,{dataTransfer:0}),o1=Vt(i1),l1=rt({},Ya,{relatedTarget:0}),ml=Vt(l1),c1=rt({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),d1=Vt(c1),u1=rt({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h1=Vt(u1),f1=rt({},Rr,{data:0}),Zu=Vt(f1),m1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=g1[e])?!!t[e]:!1}function Ld(){return x1}var y1=rt({},Ya,{key:function(e){if(e.key){var t=m1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?p1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ld,charCode:function(e){return e.type==="keypress"?Ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),v1=Vt(y1),b1=rt({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qu=Vt(b1),w1=rt({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ld}),N1=Vt(w1),j1=rt({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S1=Vt(j1),_1=rt({},ko,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),k1=Vt(_1),D1=[9,13,27,32],Pd=Ln&&"CompositionEvent"in window,fa=null;Ln&&"documentMode"in document&&(fa=document.documentMode);var C1=Ln&&"TextEvent"in window&&!fa,e0=Ln&&(!Pd||fa&&8<fa&&11>=fa),Xu=String.fromCharCode(32),eh=!1;function t0(e,t){switch(e){case"keyup":return D1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rr=!1;function E1(e,t){switch(e){case"compositionend":return n0(t);case"keypress":return t.which!==32?null:(eh=!0,Xu);case"textInput":return e=t.data,e===Xu&&eh?null:e;default:return null}}function T1(e,t){if(rr)return e==="compositionend"||!Pd&&t0(e,t)?(e=Xm(),Ti=Id=es=null,rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e0&&t.locale!=="ko"?null:t.data;default:return null}}var A1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function th(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!A1[e.type]:t==="textarea"}function s0(e,t,n,s){Lm(s),t=Ki(t,"onChange"),0<t.length&&(n=new Od("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var ma=null,Ta=null;function I1(e){m0(e,0)}function Do(e){var t=or(e);if(Dm(t))return e}function O1(e,t){if(e==="change")return t}var r0=!1;if(Ln){var pl;if(Ln){var gl="oninput"in document;if(!gl){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),gl=typeof nh.oninput=="function"}pl=gl}else pl=!1;r0=pl&&(!document.documentMode||9<document.documentMode)}function sh(){ma&&(ma.detachEvent("onpropertychange",a0),Ta=ma=null)}function a0(e){if(e.propertyName==="value"&&Do(Ta)){var t=[];s0(t,Ta,e,Dd(e)),Fm(I1,t)}}function L1(e,t,n){e==="focusin"?(sh(),ma=t,Ta=n,ma.attachEvent("onpropertychange",a0)):e==="focusout"&&sh()}function P1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Do(Ta)}function M1(e,t){if(e==="click")return Do(t)}function R1(e,t){if(e==="input"||e==="change")return Do(t)}function F1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:F1;function Aa(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Vl.call(t,a)||!gn(e[a],t[a]))return!1}return!0}function rh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ah(e,t){var n=rh(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rh(n)}}function i0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?i0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function o0(){for(var e=window,t=Bi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bi(e.document)}return t}function Md(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function z1(e){var t=o0(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&i0(n.ownerDocument.documentElement,n)){if(s!==null&&Md(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=ah(n,i);var o=ah(n,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $1=Ln&&"documentMode"in document&&11>=document.documentMode,ar=null,fc=null,pa=null,mc=!1;function ih(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mc||ar==null||ar!==Bi(s)||(s=ar,"selectionStart"in s&&Md(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),pa&&Aa(pa,s)||(pa=s,s=Ki(fc,"onSelect"),0<s.length&&(t=new Od("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ar)))}function di(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ir={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionend:di("Transition","TransitionEnd")},xl={},l0={};Ln&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function Co(e){if(xl[e])return xl[e];if(!ir[e])return e;var t=ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in l0)return xl[e]=t[n];return e}var c0=Co("animationend"),d0=Co("animationiteration"),u0=Co("animationstart"),h0=Co("transitionend"),f0=new Map,oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(e,t){f0.set(e,t),Ws(t,[e])}for(var yl=0;yl<oh.length;yl++){var vl=oh[yl],U1=vl.toLowerCase(),B1=vl[0].toUpperCase()+vl.slice(1);gs(U1,"on"+B1)}gs(c0,"onAnimationEnd");gs(d0,"onAnimationIteration");gs(u0,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(h0,"onTransitionEnd");Sr("onMouseEnter",["mouseout","mouseover"]);Sr("onMouseLeave",["mouseout","mouseover"]);Sr("onPointerEnter",["pointerout","pointerover"]);Sr("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W1=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function lh(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Ux(s,t,void 0,e),e.currentTarget=null}function m0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;lh(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;lh(a,l,d),i=c}}}if(Gi)throw e=cc,Gi=!1,cc=null,e}function Ve(e,t){var n=t[vc];n===void 0&&(n=t[vc]=new Set);var s=e+"__bubble";n.has(s)||(p0(t,e,2,!1),n.add(s))}function bl(e,t,n){var s=0;t&&(s|=4),p0(n,e,s,t)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Ia(e){if(!e[ui]){e[ui]=!0,Nm.forEach(function(n){n!=="selectionchange"&&(W1.has(n)||bl(n,!1,e),bl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ui]||(t[ui]=!0,bl("selectionchange",!1,t))}}function p0(e,t,n,s){switch(Qm(t)){case 1:var a=s1;break;case 4:a=r1;break;default:a=Ad}n=a.bind(null,t,n,e),a=void 0,!lc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function wl(e,t,n,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ts(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}Fm(function(){var d=i,u=Dd(n),m=[];e:{var h=f0.get(e);if(h!==void 0){var p=Od,v=e;switch(e){case"keypress":if(Ai(n)===0)break e;case"keydown":case"keyup":p=v1;break;case"focusin":v="focus",p=ml;break;case"focusout":v="blur",p=ml;break;case"beforeblur":case"afterblur":p=ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=o1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=N1;break;case c0:case d0:case u0:p=d1;break;case h0:p=S1;break;case"scroll":p=a1;break;case"wheel":p=k1;break;case"copy":case"cut":case"paste":p=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qu}var x=(t&4)!==0,b=!x&&e==="scroll",g=x?h!==null?h+"Capture":null:h;x=[];for(var f=d,y;f!==null;){y=f;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=ka(f,g),w!=null&&x.push(Oa(f,w,y)))),b)break;f=f.return}0<x.length&&(h=new p(h,v,null,n,u),m.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==ic&&(v=n.relatedTarget||n.fromElement)&&(Ts(v)||v[Pn]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=d,v=v?Ts(v):null,v!==null&&(b=Gs(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=d),p!==v)){if(x=Ju,w="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(x=Qu,w="onPointerLeave",g="onPointerEnter",f="pointer"),b=p==null?h:or(p),y=v==null?h:or(v),h=new x(w,f+"leave",p,n,u),h.target=b,h.relatedTarget=y,w=null,Ts(u)===d&&(x=new x(g,f+"enter",v,n,u),x.target=y,x.relatedTarget=b,w=x),b=w,p&&v)t:{for(x=p,g=v,f=0,y=x;y;y=Ys(y))f++;for(y=0,w=g;w;w=Ys(w))y++;for(;0<f-y;)x=Ys(x),f--;for(;0<y-f;)g=Ys(g),y--;for(;f--;){if(x===g||g!==null&&x===g.alternate)break t;x=Ys(x),g=Ys(g)}x=null}else x=null;p!==null&&ch(m,h,p,x,!1),v!==null&&b!==null&&ch(m,b,v,x,!0)}}e:{if(h=d?or(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=O1;else if(th(h))if(r0)_=R1;else{_=P1;var S=L1}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=M1);if(_&&(_=_(e,d))){s0(m,_,n,u);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&tc(h,"number",h.value)}switch(S=d?or(d):window,e){case"focusin":(th(S)||S.contentEditable==="true")&&(ar=S,fc=d,pa=null);break;case"focusout":pa=fc=ar=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,ih(m,n,u);break;case"selectionchange":if($1)break;case"keydown":case"keyup":ih(m,n,u)}var k;if(Pd)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else rr?t0(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(e0&&n.locale!=="ko"&&(rr||A!=="onCompositionStart"?A==="onCompositionEnd"&&rr&&(k=Xm()):(es=u,Id="value"in es?es.value:es.textContent,rr=!0)),S=Ki(d,A),0<S.length&&(A=new Zu(A,e,null,n,u),m.push({event:A,listeners:S}),k?A.data=k:(k=n0(n),k!==null&&(A.data=k)))),(k=C1?E1(e,n):T1(e,n))&&(d=Ki(d,"onBeforeInput"),0<d.length&&(u=new Zu("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=k))}m0(m,t)})}function Oa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ki(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ka(e,n),i!=null&&s.unshift(Oa(e,i,a)),i=ka(e,t),i!=null&&s.push(Oa(e,i,a))),e=e.return}return s}function Ys(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ch(e,t,n,s,a){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=ka(n,i),c!=null&&o.unshift(Oa(n,c,l))):a||(c=ka(n,i),c!=null&&o.push(Oa(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var G1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function dh(e){return(typeof e=="string"?e:""+e).replace(G1,`
`).replace(H1,"")}function hi(e,t,n){if(t=dh(t),dh(e)!==t&&n)throw Error(me(425))}function Ji(){}var pc=null,gc=null;function xc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,uh=typeof Promise=="function"?Promise:void 0,Y1=typeof queueMicrotask=="function"?queueMicrotask:typeof uh<"u"?function(e){return uh.resolve(null).then(e).catch(V1)}:yc;function V1(e){setTimeout(function(){throw e})}function Nl(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Ea(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Ea(t)}function as(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),bn="__reactFiber$"+Fr,La="__reactProps$"+Fr,Pn="__reactContainer$"+Fr,vc="__reactEvents$"+Fr,K1="__reactListeners$"+Fr,J1="__reactHandles$"+Fr;function Ts(e){var t=e[bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hh(e);e!==null;){if(n=e[bn])return n;e=hh(e)}return t}e=n,n=e.parentNode}return null}function Va(e){return e=e[bn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function Eo(e){return e[La]||null}var bc=[],lr=-1;function xs(e){return{current:e}}function Je(e){0>lr||(e.current=bc[lr],bc[lr]=null,lr--)}function Ye(e,t){lr++,bc[lr]=e.current,e.current=t}var us={},Ct=xs(us),zt=xs(!1),Ms=us;function _r(e,t){var n=e.type.contextTypes;if(!n)return us;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function $t(e){return e=e.childContextTypes,e!=null}function Zi(){Je(zt),Je(Ct)}function fh(e,t,n){if(Ct.current!==us)throw Error(me(168));Ye(Ct,t),Ye(zt,n)}function g0(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(me(108,Lx(e)||"Unknown",a));return rt({},n,s)}function Qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||us,Ms=Ct.current,Ye(Ct,e),Ye(zt,zt.current),!0}function mh(e,t,n){var s=e.stateNode;if(!s)throw Error(me(169));n?(e=g0(e,t,Ms),s.__reactInternalMemoizedMergedChildContext=e,Je(zt),Je(Ct),Ye(Ct,e)):Je(zt),Ye(zt,n)}var En=null,To=!1,jl=!1;function x0(e){En===null?En=[e]:En.push(e)}function Z1(e){To=!0,x0(e)}function ys(){if(!jl&&En!==null){jl=!0;var e=0,t=We;try{var n=En;for(We=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}En=null,To=!1}catch(a){throw En!==null&&(En=En.slice(e+1)),Bm(Cd,ys),a}finally{We=t,jl=!1}}return null}var cr=[],dr=0,Xi=null,eo=0,Qt=[],Xt=0,Rs=null,Tn=1,An="";function _s(e,t){cr[dr++]=eo,cr[dr++]=Xi,Xi=e,eo=t}function y0(e,t,n){Qt[Xt++]=Tn,Qt[Xt++]=An,Qt[Xt++]=Rs,Rs=e;var s=Tn;e=An;var a=32-fn(s)-1;s&=~(1<<a),n+=1;var i=32-fn(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Tn=1<<32-fn(t)+a|n<<a|s,An=i+e}else Tn=1<<i|n<<a|s,An=e}function Rd(e){e.return!==null&&(_s(e,1),y0(e,1,0))}function Fd(e){for(;e===Xi;)Xi=cr[--dr],cr[dr]=null,eo=cr[--dr],cr[dr]=null;for(;e===Rs;)Rs=Qt[--Xt],Qt[Xt]=null,An=Qt[--Xt],Qt[Xt]=null,Tn=Qt[--Xt],Qt[Xt]=null}var Ht=null,Gt=null,et=!1,hn=null;function v0(e,t){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ph(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ht=e,Gt=as(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ht=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rs!==null?{id:Tn,overflow:An}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ht=e,Gt=null,!0):!1;default:return!1}}function wc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nc(e){if(et){var t=Gt;if(t){var n=t;if(!ph(e,t)){if(wc(e))throw Error(me(418));t=as(n.nextSibling);var s=Ht;t&&ph(e,t)?v0(s,n):(e.flags=e.flags&-4097|2,et=!1,Ht=e)}}else{if(wc(e))throw Error(me(418));e.flags=e.flags&-4097|2,et=!1,Ht=e}}}function gh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function fi(e){if(e!==Ht)return!1;if(!et)return gh(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xc(e.type,e.memoizedProps)),t&&(t=Gt)){if(wc(e))throw b0(),Error(me(418));for(;t;)v0(e,t),t=as(t.nextSibling)}if(gh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gt=as(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Ht?as(e.stateNode.nextSibling):null;return!0}function b0(){for(var e=Gt;e;)e=as(e.nextSibling)}function kr(){Gt=Ht=null,et=!1}function zd(e){hn===null?hn=[e]:hn.push(e)}var Q1=Un.ReactCurrentBatchConfig;function Jr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(me(309));var s=n.stateNode}if(!s)throw Error(me(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(me(284));if(!n._owner)throw Error(me(290,e))}return e}function mi(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xh(e){var t=e._init;return t(e._payload)}function w0(e){function t(g,f){if(e){var y=g.deletions;y===null?(g.deletions=[f],g.flags|=16):y.push(f)}}function n(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function s(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function a(g,f){return g=cs(g,f),g.index=0,g.sibling=null,g}function i(g,f,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<f?(g.flags|=2,f):y):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,f,y,w){return f===null||f.tag!==6?(f=Tl(y,g.mode,w),f.return=g,f):(f=a(f,y),f.return=g,f)}function c(g,f,y,w){var _=y.type;return _===sr?u(g,f,y.props.children,w,y.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vn&&xh(_)===f.type)?(w=a(f,y.props),w.ref=Jr(g,f,y),w.return=g,w):(w=Fi(y.type,y.key,y.props,null,g.mode,w),w.ref=Jr(g,f,y),w.return=g,w)}function d(g,f,y,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=Al(y,g.mode,w),f.return=g,f):(f=a(f,y.children||[]),f.return=g,f)}function u(g,f,y,w,_){return f===null||f.tag!==7?(f=Ps(y,g.mode,w,_),f.return=g,f):(f=a(f,y),f.return=g,f)}function m(g,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Tl(""+f,g.mode,y),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case si:return y=Fi(f.type,f.key,f.props,null,g.mode,y),y.ref=Jr(g,null,f),y.return=g,y;case nr:return f=Al(f,g.mode,y),f.return=g,f;case Vn:var w=f._init;return m(g,w(f._payload),y)}if(aa(f)||Hr(f))return f=Ps(f,g.mode,y,null),f.return=g,f;mi(g,f)}return null}function h(g,f,y,w){var _=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(g,f,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case si:return y.key===_?c(g,f,y,w):null;case nr:return y.key===_?d(g,f,y,w):null;case Vn:return _=y._init,h(g,f,_(y._payload),w)}if(aa(y)||Hr(y))return _!==null?null:u(g,f,y,w,null);mi(g,y)}return null}function p(g,f,y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,l(f,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case si:return g=g.get(w.key===null?y:w.key)||null,c(f,g,w,_);case nr:return g=g.get(w.key===null?y:w.key)||null,d(f,g,w,_);case Vn:var S=w._init;return p(g,f,y,S(w._payload),_)}if(aa(w)||Hr(w))return g=g.get(y)||null,u(f,g,w,_,null);mi(f,w)}return null}function v(g,f,y,w){for(var _=null,S=null,k=f,A=f=0,F=null;k!==null&&A<y.length;A++){k.index>A?(F=k,k=null):F=k.sibling;var R=h(g,k,y[A],w);if(R===null){k===null&&(k=F);break}e&&k&&R.alternate===null&&t(g,k),f=i(R,f,A),S===null?_=R:S.sibling=R,S=R,k=F}if(A===y.length)return n(g,k),et&&_s(g,A),_;if(k===null){for(;A<y.length;A++)k=m(g,y[A],w),k!==null&&(f=i(k,f,A),S===null?_=k:S.sibling=k,S=k);return et&&_s(g,A),_}for(k=s(g,k);A<y.length;A++)F=p(k,g,A,y[A],w),F!==null&&(e&&F.alternate!==null&&k.delete(F.key===null?A:F.key),f=i(F,f,A),S===null?_=F:S.sibling=F,S=F);return e&&k.forEach(function(Q){return t(g,Q)}),et&&_s(g,A),_}function x(g,f,y,w){var _=Hr(y);if(typeof _!="function")throw Error(me(150));if(y=_.call(y),y==null)throw Error(me(151));for(var S=_=null,k=f,A=f=0,F=null,R=y.next();k!==null&&!R.done;A++,R=y.next()){k.index>A?(F=k,k=null):F=k.sibling;var Q=h(g,k,R.value,w);if(Q===null){k===null&&(k=F);break}e&&k&&Q.alternate===null&&t(g,k),f=i(Q,f,A),S===null?_=Q:S.sibling=Q,S=Q,k=F}if(R.done)return n(g,k),et&&_s(g,A),_;if(k===null){for(;!R.done;A++,R=y.next())R=m(g,R.value,w),R!==null&&(f=i(R,f,A),S===null?_=R:S.sibling=R,S=R);return et&&_s(g,A),_}for(k=s(g,k);!R.done;A++,R=y.next())R=p(k,g,A,R.value,w),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?A:R.key),f=i(R,f,A),S===null?_=R:S.sibling=R,S=R);return e&&k.forEach(function(E){return t(g,E)}),et&&_s(g,A),_}function b(g,f,y,w){if(typeof y=="object"&&y!==null&&y.type===sr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case si:e:{for(var _=y.key,S=f;S!==null;){if(S.key===_){if(_=y.type,_===sr){if(S.tag===7){n(g,S.sibling),f=a(S,y.props.children),f.return=g,g=f;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vn&&xh(_)===S.type){n(g,S.sibling),f=a(S,y.props),f.ref=Jr(g,S,y),f.return=g,g=f;break e}n(g,S);break}else t(g,S);S=S.sibling}y.type===sr?(f=Ps(y.props.children,g.mode,w,y.key),f.return=g,g=f):(w=Fi(y.type,y.key,y.props,null,g.mode,w),w.ref=Jr(g,f,y),w.return=g,g=w)}return o(g);case nr:e:{for(S=y.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(g,f.sibling),f=a(f,y.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else t(g,f);f=f.sibling}f=Al(y,g.mode,w),f.return=g,g=f}return o(g);case Vn:return S=y._init,b(g,f,S(y._payload),w)}if(aa(y))return v(g,f,y,w);if(Hr(y))return x(g,f,y,w);mi(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(g,f.sibling),f=a(f,y),f.return=g,g=f):(n(g,f),f=Tl(y,g.mode,w),f.return=g,g=f),o(g)):n(g,f)}return b}var Dr=w0(!0),N0=w0(!1),to=xs(null),no=null,ur=null,$d=null;function Ud(){$d=ur=no=null}function Bd(e){var t=to.current;Je(to),e._currentValue=t}function jc(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function wr(e,t){no=e,$d=ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ft=!0),e.firstContext=null)}function sn(e){var t=e._currentValue;if($d!==e)if(e={context:e,memoizedValue:t,next:null},ur===null){if(no===null)throw Error(me(308));ur=e,no.dependencies={lanes:0,firstContext:e}}else ur=ur.next=e;return t}var As=null;function Wd(e){As===null?As=[e]:As.push(e)}function j0(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,Wd(t)):(n.next=a.next,a.next=n),t.interleaved=n,Mn(e,s)}function Mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kn=!1;function Gd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function In(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function is(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ue&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Mn(e,n)}return a=s.interleaved,a===null?(t.next=t,Wd(s)):(t.next=a.next,a.next=t),s.interleaved=t,Mn(e,n)}function Ii(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Ed(e,n)}}function yh(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function so(e,t,n,s){var a=e.updateQueue;Kn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(h=t,p=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){m=v.call(p,m,h);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(p,m,h):v,h==null)break e;m=rt({},m,h);break e;case 2:Kn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);zs|=o,e.lanes=o,e.memoizedState=m}}function vh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(me(191,a));a.call(s)}}}var Ka={},Sn=xs(Ka),Pa=xs(Ka),Ma=xs(Ka);function Is(e){if(e===Ka)throw Error(me(174));return e}function Hd(e,t){switch(Ye(Ma,t),Ye(Pa,e),Ye(Sn,Ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sc(t,e)}Je(Sn),Ye(Sn,t)}function Cr(){Je(Sn),Je(Pa),Je(Ma)}function _0(e){Is(Ma.current);var t=Is(Sn.current),n=sc(t,e.type);t!==n&&(Ye(Pa,e),Ye(Sn,n))}function qd(e){Pa.current===e&&(Je(Sn),Je(Pa))}var nt=xs(0);function ro(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sl=[];function Yd(){for(var e=0;e<Sl.length;e++)Sl[e]._workInProgressVersionPrimary=null;Sl.length=0}var Oi=Un.ReactCurrentDispatcher,_l=Un.ReactCurrentBatchConfig,Fs=0,st=null,ft=null,yt=null,ao=!1,ga=!1,Ra=0,X1=0;function St(){throw Error(me(321))}function Vd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gn(e[n],t[n]))return!1;return!0}function Kd(e,t,n,s,a,i){if(Fs=i,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oi.current=e===null||e.memoizedState===null?sy:ry,e=n(s,a),ga){i=0;do{if(ga=!1,Ra=0,25<=i)throw Error(me(301));i+=1,yt=ft=null,t.updateQueue=null,Oi.current=ay,e=n(s,a)}while(ga)}if(Oi.current=io,t=ft!==null&&ft.next!==null,Fs=0,yt=ft=st=null,ao=!1,t)throw Error(me(300));return e}function Jd(){var e=Ra!==0;return Ra=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?st.memoizedState=yt=e:yt=yt.next=e,yt}function rn(){if(ft===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=yt===null?st.memoizedState:yt.next;if(t!==null)yt=t,ft=e;else{if(e===null)throw Error(me(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},yt===null?st.memoizedState=yt=e:yt=yt.next=e}return yt}function Fa(e,t){return typeof t=="function"?t(e):t}function kl(e){var t=rn(),n=t.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=e;var s=ft,a=s.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Fs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=s):c=c.next=m,st.lanes|=u,zs|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,gn(s,t.memoizedState)||(Ft=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do i=a.lane,st.lanes|=i,zs|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Dl(e){var t=rn(),n=t.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);gn(i,t.memoizedState)||(Ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function k0(){}function D0(e,t){var n=st,s=rn(),a=t(),i=!gn(s.memoizedState,a);if(i&&(s.memoizedState=a,Ft=!0),s=s.queue,Zd(T0.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,za(9,E0.bind(null,n,s,a,t),void 0,null),vt===null)throw Error(me(349));Fs&30||C0(n,t,a)}return a}function C0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function E0(e,t,n,s){t.value=n,t.getSnapshot=s,A0(t)&&I0(e)}function T0(e,t,n){return n(function(){A0(t)&&I0(e)})}function A0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gn(e,n)}catch{return!0}}function I0(e){var t=Mn(e,1);t!==null&&mn(t,e,1,-1)}function bh(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:e},t.queue=e,e=e.dispatch=ny.bind(null,st,e),[t.memoizedState,e]}function za(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function O0(){return rn().memoizedState}function Li(e,t,n,s){var a=yn();st.flags|=e,a.memoizedState=za(1|t,n,void 0,s===void 0?null:s)}function Ao(e,t,n,s){var a=rn();s=s===void 0?null:s;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,s!==null&&Vd(s,o.deps)){a.memoizedState=za(t,n,i,s);return}}st.flags|=e,a.memoizedState=za(1|t,n,i,s)}function wh(e,t){return Li(8390656,8,e,t)}function Zd(e,t){return Ao(2048,8,e,t)}function L0(e,t){return Ao(4,2,e,t)}function P0(e,t){return Ao(4,4,e,t)}function M0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function R0(e,t,n){return n=n!=null?n.concat([e]):null,Ao(4,4,M0.bind(null,t,e),n)}function Qd(){}function F0(e,t){var n=rn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Vd(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function z0(e,t){var n=rn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Vd(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function $0(e,t,n){return Fs&21?(gn(n,t)||(n=Hm(),st.lanes|=n,zs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ft=!0),e.memoizedState=n)}function ey(e,t){var n=We;We=n!==0&&4>n?n:4,e(!0);var s=_l.transition;_l.transition={};try{e(!1),t()}finally{We=n,_l.transition=s}}function U0(){return rn().memoizedState}function ty(e,t,n){var s=ls(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},B0(e))W0(t,n);else if(n=j0(e,t,n,s),n!==null){var a=It();mn(n,e,s,a),G0(n,t,s)}}function ny(e,t,n){var s=ls(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(B0(e))W0(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,gn(l,o)){var c=t.interleaved;c===null?(a.next=a,Wd(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=j0(e,t,a,s),n!==null&&(a=It(),mn(n,e,s,a),G0(n,t,s))}}function B0(e){var t=e.alternate;return e===st||t!==null&&t===st}function W0(e,t){ga=ao=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function G0(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Ed(e,n)}}var io={readContext:sn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},sy={readContext:sn,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:sn,useEffect:wh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Li(4194308,4,M0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var n=yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=yn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=ty.bind(null,st,e),[s.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:bh,useDebugValue:Qd,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=bh(!1),t=e[0];return e=ey.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=st,a=yn();if(et){if(n===void 0)throw Error(me(407));n=n()}else{if(n=t(),vt===null)throw Error(me(349));Fs&30||C0(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,wh(T0.bind(null,s,i,e),[e]),s.flags|=2048,za(9,E0.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=yn(),t=vt.identifierPrefix;if(et){var n=An,s=Tn;n=(s&~(1<<32-fn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ra++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=X1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ry={readContext:sn,useCallback:F0,useContext:sn,useEffect:Zd,useImperativeHandle:R0,useInsertionEffect:L0,useLayoutEffect:P0,useMemo:z0,useReducer:kl,useRef:O0,useState:function(){return kl(Fa)},useDebugValue:Qd,useDeferredValue:function(e){var t=rn();return $0(t,ft.memoizedState,e)},useTransition:function(){var e=kl(Fa)[0],t=rn().memoizedState;return[e,t]},useMutableSource:k0,useSyncExternalStore:D0,useId:U0,unstable_isNewReconciler:!1},ay={readContext:sn,useCallback:F0,useContext:sn,useEffect:Zd,useImperativeHandle:R0,useInsertionEffect:L0,useLayoutEffect:P0,useMemo:z0,useReducer:Dl,useRef:O0,useState:function(){return Dl(Fa)},useDebugValue:Qd,useDeferredValue:function(e){var t=rn();return ft===null?t.memoizedState=e:$0(t,ft.memoizedState,e)},useTransition:function(){var e=Dl(Fa)[0],t=rn().memoizedState;return[e,t]},useMutableSource:k0,useSyncExternalStore:D0,useId:U0,unstable_isNewReconciler:!1};function cn(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Sc(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Io={isMounted:function(e){return(e=e._reactInternals)?Gs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=It(),a=ls(e),i=In(s,a);i.payload=t,n!=null&&(i.callback=n),t=is(e,i,a),t!==null&&(mn(t,e,a,s),Ii(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=It(),a=ls(e),i=In(s,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=is(e,i,a),t!==null&&(mn(t,e,a,s),Ii(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=It(),s=ls(e),a=In(n,s);a.tag=2,t!=null&&(a.callback=t),t=is(e,a,s),t!==null&&(mn(t,e,s,n),Ii(t,e,s))}};function Nh(e,t,n,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Aa(n,s)||!Aa(a,i):!0}function H0(e,t,n){var s=!1,a=us,i=t.contextType;return typeof i=="object"&&i!==null?i=sn(i):(a=$t(t)?Ms:Ct.current,s=t.contextTypes,i=(s=s!=null)?_r(e,a):us),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Io,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function jh(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Io.enqueueReplaceState(t,t.state,null)}function _c(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Gd(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=sn(i):(i=$t(t)?Ms:Ct.current,a.context=_r(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Sc(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Io.enqueueReplaceState(a,a.state,null),so(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Er(e,t){try{var n="",s=t;do n+=Ox(s),s=s.return;while(s);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Cl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iy=typeof WeakMap=="function"?WeakMap:Map;function q0(e,t,n){n=In(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){lo||(lo=!0,Mc=s),kc(e,t)},n}function Y0(e,t,n){n=In(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){kc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kc(e,t),typeof s!="function"&&(os===null?os=new Set([this]):os.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Sh(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new iy;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=by.bind(null,e,t,n),t.then(e,e))}function _h(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kh(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=In(-1,1),t.tag=2,is(n,t,1))),n.lanes|=1),e)}var oy=Un.ReactCurrentOwner,Ft=!1;function Tt(e,t,n,s){t.child=e===null?N0(t,null,n,s):Dr(t,e.child,n,s)}function Dh(e,t,n,s,a){n=n.render;var i=t.ref;return wr(t,a),s=Kd(e,t,n,s,i,a),n=Jd(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(et&&n&&Rd(t),t.flags|=1,Tt(e,t,s,a),t.child)}function Ch(e,t,n,s,a){if(e===null){var i=n.type;return typeof i=="function"&&!iu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,V0(e,t,i,s,a)):(e=Fi(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,s)&&e.ref===t.ref)return Rn(e,t,a)}return t.flags|=1,e=cs(i,s),e.ref=t.ref,e.return=t,t.child=e}function V0(e,t,n,s,a){if(e!==null){var i=e.memoizedProps;if(Aa(i,s)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Ft=!0);else return t.lanes=e.lanes,Rn(e,t,a)}return Dc(e,t,n,s,a)}function K0(e,t,n){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(fr,Wt),Wt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ye(fr,Wt),Wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Ye(fr,Wt),Wt|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Ye(fr,Wt),Wt|=s;return Tt(e,t,a,n),t.child}function J0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Dc(e,t,n,s,a){var i=$t(n)?Ms:Ct.current;return i=_r(t,i),wr(t,a),n=Kd(e,t,n,s,i,a),s=Jd(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(et&&s&&Rd(t),t.flags|=1,Tt(e,t,n,a),t.child)}function Eh(e,t,n,s,a){if($t(n)){var i=!0;Qi(t)}else i=!1;if(wr(t,a),t.stateNode===null)Pi(e,t),H0(t,n,s),_c(t,n,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=sn(d):(d=$t(n)?Ms:Ct.current,d=_r(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&jh(t,o,s,d),Kn=!1;var h=t.memoizedState;o.state=h,so(t,s,o,a),c=t.memoizedState,l!==s||h!==c||zt.current||Kn?(typeof u=="function"&&(Sc(t,n,u,s),c=t.memoizedState),(l=Kn||Nh(t,n,l,s,h,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,S0(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:cn(t.type,l),o.props=d,m=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=$t(n)?Ms:Ct.current,c=_r(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&jh(t,o,s,c),Kn=!1,h=t.memoizedState,o.state=h,so(t,s,o,a);var v=t.memoizedState;l!==m||h!==v||zt.current||Kn?(typeof p=="function"&&(Sc(t,n,p,s),v=t.memoizedState),(d=Kn||Nh(t,n,d,s,h,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Cc(e,t,n,s,i,a)}function Cc(e,t,n,s,a,i){J0(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&mh(t,n,!1),Rn(e,t,i);s=t.stateNode,oy.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Dr(t,e.child,null,i),t.child=Dr(t,null,l,i)):Tt(e,t,l,i),t.memoizedState=s.state,a&&mh(t,n,!0),t.child}function Z0(e){var t=e.stateNode;t.pendingContext?fh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fh(e,t.context,!1),Hd(e,t.containerInfo)}function Th(e,t,n,s,a){return kr(),zd(a),t.flags|=256,Tt(e,t,n,s),t.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Tc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Q0(e,t,n){var s=t.pendingProps,a=nt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ye(nt,a&1),e===null)return Nc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Po(o,s,0,null),e=Ps(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Tc(n),t.memoizedState=Ec,e):Xd(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return ly(e,t,o,s,l,a,n);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=cs(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=cs(l,i):(i=Ps(i,o,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?Tc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Ec,s}return i=e.child,e=i.sibling,s=cs(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Xd(e,t){return t=Po({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pi(e,t,n,s){return s!==null&&zd(s),Dr(t,e.child,null,n),e=Xd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ly(e,t,n,s,a,i,o){if(n)return t.flags&256?(t.flags&=-257,s=Cl(Error(me(422))),pi(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Po({mode:"visible",children:s.children},a,0,null),i=Ps(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Dr(t,e.child,null,o),t.child.memoizedState=Tc(o),t.memoizedState=Ec,i);if(!(t.mode&1))return pi(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(me(419)),s=Cl(i,s,void 0),pi(e,t,o,s)}if(l=(o&e.childLanes)!==0,Ft||l){if(s=vt,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Mn(e,a),mn(s,e,a,-1))}return au(),s=Cl(Error(me(421))),pi(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wy.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Gt=as(a.nextSibling),Ht=t,et=!0,hn=null,e!==null&&(Qt[Xt++]=Tn,Qt[Xt++]=An,Qt[Xt++]=Rs,Tn=e.id,An=e.overflow,Rs=t),t=Xd(t,s.children),t.flags|=4096,t)}function Ah(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),jc(e.return,t,n)}function El(e,t,n,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function X0(e,t,n){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(Tt(e,t,s.children,n),s=nt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ah(e,n,t);else if(e.tag===19)Ah(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ye(nt,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ro(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),El(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ro(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}El(t,!0,n,null,i);break;case"together":El(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,n=cs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cy(e,t,n){switch(t.tag){case 3:Z0(t),kr();break;case 5:_0(t);break;case 1:$t(t.type)&&Qi(t);break;case 4:Hd(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Ye(to,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ye(nt,nt.current&1),t.flags|=128,null):n&t.child.childLanes?Q0(e,t,n):(Ye(nt,nt.current&1),e=Rn(e,t,n),e!==null?e.sibling:null);Ye(nt,nt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return X0(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ye(nt,nt.current),s)break;return null;case 22:case 23:return t.lanes=0,K0(e,t,n)}return Rn(e,t,n)}var ep,Ac,tp,np;ep=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ac=function(){};tp=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Is(Sn.current);var i=null;switch(n){case"input":a=Xl(e,a),s=Xl(e,s),i=[];break;case"select":a=rt({},a,{value:void 0}),s=rt({},s,{value:void 0}),i=[];break;case"textarea":a=nc(e,a),s=nc(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ji)}rc(n,s);var o;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Sa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};np=function(e,t,n,s){n!==s&&(t.flags|=4)};function Zr(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function _t(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function dy(e,t,n){var s=t.pendingProps;switch(Fd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(t),null;case 1:return $t(t.type)&&Zi(),_t(t),null;case 3:return s=t.stateNode,Cr(),Je(zt),Je(Ct),Yd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(fi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(zc(hn),hn=null))),Ac(e,t),_t(t),null;case 5:qd(t);var a=Is(Ma.current);if(n=t.type,e!==null&&t.stateNode!=null)tp(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(me(166));return _t(t),null}if(e=Is(Sn.current),fi(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[bn]=t,s[La]=i,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(a=0;a<oa.length;a++)Ve(oa[a],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":$u(s,i),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",s);break;case"textarea":Bu(s,i),Ve("invalid",s)}rc(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&hi(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&hi(s.textContent,l,e),a=["children",""+l]):Sa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",s)}switch(n){case"input":ri(s),Uu(s,i,!0);break;case"textarea":ri(s),Wu(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Ji)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[bn]=t,e[La]=s,ep(e,t,!1,!1),t.stateNode=e;e:{switch(o=ac(n,s),n){case"dialog":Ve("cancel",e),Ve("close",e),a=s;break;case"iframe":case"object":case"embed":Ve("load",e),a=s;break;case"video":case"audio":for(a=0;a<oa.length;a++)Ve(oa[a],e);a=s;break;case"source":Ve("error",e),a=s;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=s;break;case"details":Ve("toggle",e),a=s;break;case"input":$u(e,s),a=Xl(e,s),Ve("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=rt({},s,{value:void 0}),Ve("invalid",e);break;case"textarea":Bu(e,s),a=nc(e,s),Ve("invalid",e);break;default:a=s}rc(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Om(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Am(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_a(e,c):typeof c=="number"&&_a(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",e):c!=null&&jd(e,i,c,o))}switch(n){case"input":ri(e),Uu(e,s,!1);break;case"textarea":ri(e),Wu(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ds(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?xr(e,!!s.multiple,i,!1):s.defaultValue!=null&&xr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _t(t),null;case 6:if(e&&t.stateNode!=null)np(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(me(166));if(n=Is(Ma.current),Is(Sn.current),fi(t)){if(s=t.stateNode,n=t.memoizedProps,s[bn]=t,(i=s.nodeValue!==n)&&(e=Ht,e!==null))switch(e.tag){case 3:hi(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hi(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[bn]=t,t.stateNode=s}return _t(t),null;case 13:if(Je(nt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&Gt!==null&&t.mode&1&&!(t.flags&128))b0(),kr(),t.flags|=98560,i=!1;else if(i=fi(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(me(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[bn]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_t(t),i=!1}else hn!==null&&(zc(hn),hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?mt===0&&(mt=3):au())),t.updateQueue!==null&&(t.flags|=4),_t(t),null);case 4:return Cr(),Ac(e,t),e===null&&Ia(t.stateNode.containerInfo),_t(t),null;case 10:return Bd(t.type._context),_t(t),null;case 17:return $t(t.type)&&Zi(),_t(t),null;case 19:if(Je(nt),i=t.memoizedState,i===null)return _t(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Zr(i,!1);else{if(mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ro(e),o!==null){for(t.flags|=128,Zr(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ye(nt,nt.current&1|2),t.child}e=e.sibling}i.tail!==null&&dt()>Tr&&(t.flags|=128,s=!0,Zr(i,!1),t.lanes=4194304)}else{if(!s)if(e=ro(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return _t(t),null}else 2*dt()-i.renderingStartTime>Tr&&n!==1073741824&&(t.flags|=128,s=!0,Zr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=dt(),t.sibling=null,n=nt.current,Ye(nt,s?n&1|2:n&1),t):(_t(t),null);case 22:case 23:return ru(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Wt&1073741824&&(_t(t),t.subtreeFlags&6&&(t.flags|=8192)):_t(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function uy(e,t){switch(Fd(t),t.tag){case 1:return $t(t.type)&&Zi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cr(),Je(zt),Je(Ct),Yd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qd(t),null;case 13:if(Je(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Je(nt),null;case 4:return Cr(),null;case 10:return Bd(t.type._context),null;case 22:case 23:return ru(),null;case 24:return null;default:return null}}var gi=!1,Dt=!1,hy=typeof WeakSet=="function"?WeakSet:Set,we=null;function hr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){lt(e,t,s)}else n.current=null}function Ic(e,t,n){try{n()}catch(s){lt(e,t,s)}}var Ih=!1;function fy(e,t){if(pc=Yi,e=o0(),Md(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==n||a!==0&&m.nodeType!==3||(l=o+a),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)h=m,m=p;for(;;){if(m===e)break t;if(h===n&&++d===a&&(l=o),h===i&&++u===s&&(c=o),(p=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gc={focusedElem:e,selectionRange:n},Yi=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:cn(t.type,x),b);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(w){lt(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return v=Ih,Ih=!1,v}function xa(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ic(t,n,i)}a=a.next}while(a!==s)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Oc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sp(e){var t=e.alternate;t!==null&&(e.alternate=null,sp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bn],delete t[La],delete t[vc],delete t[K1],delete t[J1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rp(e){return e.tag===5||e.tag===3||e.tag===4}function Oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ji));else if(s!==4&&(e=e.child,e!==null))for(Lc(e,t,n),e=e.sibling;e!==null;)Lc(e,t,n),e=e.sibling}function Pc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Pc(e,t,n),e=e.sibling;e!==null;)Pc(e,t,n),e=e.sibling}var wt=null,dn=!1;function Wn(e,t,n){for(n=n.child;n!==null;)ap(e,t,n),n=n.sibling}function ap(e,t,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(_o,n)}catch{}switch(n.tag){case 5:Dt||hr(n,t);case 6:var s=wt,a=dn;wt=null,Wn(e,t,n),wt=s,dn=a,wt!==null&&(dn?(e=wt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(dn?(e=wt,n=n.stateNode,e.nodeType===8?Nl(e.parentNode,n):e.nodeType===1&&Nl(e,n),Ea(e)):Nl(wt,n.stateNode));break;case 4:s=wt,a=dn,wt=n.stateNode.containerInfo,dn=!0,Wn(e,t,n),wt=s,dn=a;break;case 0:case 11:case 14:case 15:if(!Dt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ic(n,t,o),a=a.next}while(a!==s)}Wn(e,t,n);break;case 1:if(!Dt&&(hr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){lt(n,t,l)}Wn(e,t,n);break;case 21:Wn(e,t,n);break;case 22:n.mode&1?(Dt=(s=Dt)||n.memoizedState!==null,Wn(e,t,n),Dt=s):Wn(e,t,n);break;default:Wn(e,t,n)}}function Lh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hy),t.forEach(function(s){var a=Ny.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function on(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,dn=!1;break e;case 3:wt=l.stateNode.containerInfo,dn=!0;break e;case 4:wt=l.stateNode.containerInfo,dn=!0;break e}l=l.return}if(wt===null)throw Error(me(160));ap(i,o,a),wt=null,dn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){lt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ip(t,e),t=t.sibling}function ip(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(on(t,e),xn(e),s&4){try{xa(3,e,e.return),Oo(3,e)}catch(x){lt(e,e.return,x)}try{xa(5,e,e.return)}catch(x){lt(e,e.return,x)}}break;case 1:on(t,e),xn(e),s&512&&n!==null&&hr(n,n.return);break;case 5:if(on(t,e),xn(e),s&512&&n!==null&&hr(n,n.return),e.flags&32){var a=e.stateNode;try{_a(a,"")}catch(x){lt(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Cm(a,i),ac(l,o);var d=ac(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Om(a,m):u==="dangerouslySetInnerHTML"?Am(a,m):u==="children"?_a(a,m):jd(a,u,m,d)}switch(l){case"input":ec(a,i);break;case"textarea":Em(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?xr(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?xr(a,!!i.multiple,i.defaultValue,!0):xr(a,!!i.multiple,i.multiple?[]:"",!1))}a[La]=i}catch(x){lt(e,e.return,x)}}break;case 6:if(on(t,e),xn(e),s&4){if(e.stateNode===null)throw Error(me(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){lt(e,e.return,x)}}break;case 3:if(on(t,e),xn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ea(t.containerInfo)}catch(x){lt(e,e.return,x)}break;case 4:on(t,e),xn(e);break;case 13:on(t,e),xn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(nu=dt())),s&4&&Lh(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Dt=(d=Dt)||u,on(t,e),Dt=d):on(t,e),xn(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(we=e,u=e.child;u!==null;){for(m=we=u;we!==null;){switch(h=we,p=h.child,h.tag){case 0:case 11:case 14:case 15:xa(4,h,h.return);break;case 1:hr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){lt(s,n,x)}}break;case 5:hr(h,h.return);break;case 22:if(h.memoizedState!==null){Mh(m);continue}}p!==null?(p.return=h,we=p):Mh(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Im("display",o))}catch(x){lt(e,e.return,x)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(x){lt(e,e.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:on(t,e),xn(e),s&4&&Lh(e);break;case 21:break;default:on(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rp(n)){var s=n;break e}n=n.return}throw Error(me(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(_a(a,""),s.flags&=-33);var i=Oh(e);Pc(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Oh(e);Lc(e,l,o);break;default:throw Error(me(161))}}catch(c){lt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function my(e,t,n){we=e,op(e)}function op(e,t,n){for(var s=(e.mode&1)!==0;we!==null;){var a=we,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||gi;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=gi;var d=Dt;if(gi=o,(Dt=c)&&!d)for(we=a;we!==null;)o=we,c=o.child,o.tag===22&&o.memoizedState!==null?Rh(a):c!==null?(c.return=o,we=c):Rh(a);for(;i!==null;)we=i,op(i),i=i.sibling;we=a,gi=l,Dt=d}Ph(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,we=i):Ph(e)}}function Ph(e){for(;we!==null;){var t=we;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dt||Oo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Dt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:cn(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vh(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}vh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ea(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}Dt||t.flags&512&&Oc(t)}catch(h){lt(t,t.return,h)}}if(t===e){we=null;break}if(n=t.sibling,n!==null){n.return=t.return,we=n;break}we=t.return}}function Mh(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var n=t.sibling;if(n!==null){n.return=t.return,we=n;break}we=t.return}}function Rh(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Oo(4,t)}catch(c){lt(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){lt(t,a,c)}}var i=t.return;try{Oc(t)}catch(c){lt(t,i,c)}break;case 5:var o=t.return;try{Oc(t)}catch(c){lt(t,o,c)}}}catch(c){lt(t,t.return,c)}if(t===e){we=null;break}var l=t.sibling;if(l!==null){l.return=t.return,we=l;break}we=t.return}}var py=Math.ceil,oo=Un.ReactCurrentDispatcher,eu=Un.ReactCurrentOwner,tn=Un.ReactCurrentBatchConfig,Ue=0,vt=null,ht=null,Nt=0,Wt=0,fr=xs(0),mt=0,$a=null,zs=0,Lo=0,tu=0,ya=null,Mt=null,nu=0,Tr=1/0,kn=null,lo=!1,Mc=null,os=null,xi=!1,ts=null,co=0,va=0,Rc=null,Mi=-1,Ri=0;function It(){return Ue&6?dt():Mi!==-1?Mi:Mi=dt()}function ls(e){return e.mode&1?Ue&2&&Nt!==0?Nt&-Nt:Q1.transition!==null?(Ri===0&&(Ri=Hm()),Ri):(e=We,e!==0||(e=window.event,e=e===void 0?16:Qm(e.type)),e):1}function mn(e,t,n,s){if(50<va)throw va=0,Rc=null,Error(me(185));qa(e,n,s),(!(Ue&2)||e!==vt)&&(e===vt&&(!(Ue&2)&&(Lo|=n),mt===4&&Qn(e,Nt)),Ut(e,s),n===1&&Ue===0&&!(t.mode&1)&&(Tr=dt()+500,To&&ys()))}function Ut(e,t){var n=e.callbackNode;Qx(e,t);var s=qi(e,e===vt?Nt:0);if(s===0)n!==null&&qu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&qu(n),t===1)e.tag===0?Z1(Fh.bind(null,e)):x0(Fh.bind(null,e)),Y1(function(){!(Ue&6)&&ys()}),n=null;else{switch(qm(s)){case 1:n=Cd;break;case 4:n=Wm;break;case 16:n=Hi;break;case 536870912:n=Gm;break;default:n=Hi}n=pp(n,lp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lp(e,t){if(Mi=-1,Ri=0,Ue&6)throw Error(me(327));var n=e.callbackNode;if(Nr()&&e.callbackNode!==n)return null;var s=qi(e,e===vt?Nt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=uo(e,s);else{t=s;var a=Ue;Ue|=2;var i=dp();(vt!==e||Nt!==t)&&(kn=null,Tr=dt()+500,Ls(e,t));do try{yy();break}catch(l){cp(e,l)}while(1);Ud(),oo.current=i,Ue=a,ht!==null?t=0:(vt=null,Nt=0,t=mt)}if(t!==0){if(t===2&&(a=dc(e),a!==0&&(s=a,t=Fc(e,a))),t===1)throw n=$a,Ls(e,0),Qn(e,s),Ut(e,dt()),n;if(t===6)Qn(e,s);else{if(a=e.current.alternate,!(s&30)&&!gy(a)&&(t=uo(e,s),t===2&&(i=dc(e),i!==0&&(s=i,t=Fc(e,i))),t===1))throw n=$a,Ls(e,0),Qn(e,s),Ut(e,dt()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(me(345));case 2:ks(e,Mt,kn);break;case 3:if(Qn(e,s),(s&130023424)===s&&(t=nu+500-dt(),10<t)){if(qi(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){It(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=yc(ks.bind(null,e,Mt,kn),t);break}ks(e,Mt,kn);break;case 4:if(Qn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-fn(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=dt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*py(s/1960))-s,10<s){e.timeoutHandle=yc(ks.bind(null,e,Mt,kn),s);break}ks(e,Mt,kn);break;case 5:ks(e,Mt,kn);break;default:throw Error(me(329))}}}return Ut(e,dt()),e.callbackNode===n?lp.bind(null,e):null}function Fc(e,t){var n=ya;return e.current.memoizedState.isDehydrated&&(Ls(e,t).flags|=256),e=uo(e,t),e!==2&&(t=Mt,Mt=n,t!==null&&zc(t)),e}function zc(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function gy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!gn(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t){for(t&=~tu,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-fn(t),s=1<<n;e[n]=-1,t&=~s}}function Fh(e){if(Ue&6)throw Error(me(327));Nr();var t=qi(e,0);if(!(t&1))return Ut(e,dt()),null;var n=uo(e,t);if(e.tag!==0&&n===2){var s=dc(e);s!==0&&(t=s,n=Fc(e,s))}if(n===1)throw n=$a,Ls(e,0),Qn(e,t),Ut(e,dt()),n;if(n===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ks(e,Mt,kn),Ut(e,dt()),null}function su(e,t){var n=Ue;Ue|=1;try{return e(t)}finally{Ue=n,Ue===0&&(Tr=dt()+500,To&&ys())}}function $s(e){ts!==null&&ts.tag===0&&!(Ue&6)&&Nr();var t=Ue;Ue|=1;var n=tn.transition,s=We;try{if(tn.transition=null,We=1,e)return e()}finally{We=s,tn.transition=n,Ue=t,!(Ue&6)&&ys()}}function ru(){Wt=fr.current,Je(fr)}function Ls(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,q1(n)),ht!==null)for(n=ht.return;n!==null;){var s=n;switch(Fd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Zi();break;case 3:Cr(),Je(zt),Je(Ct),Yd();break;case 5:qd(s);break;case 4:Cr();break;case 13:Je(nt);break;case 19:Je(nt);break;case 10:Bd(s.type._context);break;case 22:case 23:ru()}n=n.return}if(vt=e,ht=e=cs(e.current,null),Nt=Wt=t,mt=0,$a=null,tu=Lo=zs=0,Mt=ya=null,As!==null){for(t=0;t<As.length;t++)if(n=As[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}n.pending=s}As=null}return e}function cp(e,t){do{var n=ht;try{if(Ud(),Oi.current=io,ao){for(var s=st.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ao=!1}if(Fs=0,yt=ft=st=null,ga=!1,Ra=0,eu.current=null,n===null||n.return===null){mt=1,$a=t,ht=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=_h(o);if(p!==null){p.flags&=-257,kh(p,o,l,i,t),p.mode&1&&Sh(i,d,t),t=p,c=d;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){Sh(i,d,t),au();break e}c=Error(me(426))}}else if(et&&l.mode&1){var b=_h(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),kh(b,o,l,i,t),zd(Er(c,l));break e}}i=c=Er(c,l),mt!==4&&(mt=2),ya===null?ya=[i]:ya.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=q0(i,c,t);yh(i,g);break e;case 1:l=c;var f=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(os===null||!os.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Y0(i,l,t);yh(i,w);break e}}i=i.return}while(i!==null)}hp(n)}catch(_){t=_,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(1)}function dp(){var e=oo.current;return oo.current=io,e===null?io:e}function au(){(mt===0||mt===3||mt===2)&&(mt=4),vt===null||!(zs&268435455)&&!(Lo&268435455)||Qn(vt,Nt)}function uo(e,t){var n=Ue;Ue|=2;var s=dp();(vt!==e||Nt!==t)&&(kn=null,Ls(e,t));do try{xy();break}catch(a){cp(e,a)}while(1);if(Ud(),Ue=n,oo.current=s,ht!==null)throw Error(me(261));return vt=null,Nt=0,mt}function xy(){for(;ht!==null;)up(ht)}function yy(){for(;ht!==null&&!Wx();)up(ht)}function up(e){var t=mp(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,t===null?hp(e):ht=t,eu.current=null}function hp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uy(n,t),n!==null){n.flags&=32767,ht=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,ht=null;return}}else if(n=dy(n,t,Wt),n!==null){ht=n;return}if(t=t.sibling,t!==null){ht=t;return}ht=t=e}while(t!==null);mt===0&&(mt=5)}function ks(e,t,n){var s=We,a=tn.transition;try{tn.transition=null,We=1,vy(e,t,n,s)}finally{tn.transition=a,We=s}return null}function vy(e,t,n,s){do Nr();while(ts!==null);if(Ue&6)throw Error(me(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Xx(e,i),e===vt&&(ht=vt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xi||(xi=!0,pp(Hi,function(){return Nr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=We;We=1;var l=Ue;Ue|=4,eu.current=null,fy(e,n),ip(n,e),z1(gc),Yi=!!pc,gc=pc=null,e.current=n,my(n),Gx(),Ue=l,We=o,tn.transition=i}else e.current=n;if(xi&&(xi=!1,ts=e,co=a),i=e.pendingLanes,i===0&&(os=null),Yx(n.stateNode),Ut(e,dt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(lo)throw lo=!1,e=Mc,Mc=null,e;return co&1&&e.tag!==0&&Nr(),i=e.pendingLanes,i&1?e===Rc?va++:(va=0,Rc=e):va=0,ys(),null}function Nr(){if(ts!==null){var e=qm(co),t=tn.transition,n=We;try{if(tn.transition=null,We=16>e?16:e,ts===null)var s=!1;else{if(e=ts,ts=null,co=0,Ue&6)throw Error(me(331));var a=Ue;for(Ue|=4,we=e.current;we!==null;){var i=we,o=i.child;if(we.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(we=d;we!==null;){var u=we;switch(u.tag){case 0:case 11:case 15:xa(8,u,i)}var m=u.child;if(m!==null)m.return=u,we=m;else for(;we!==null;){u=we;var h=u.sibling,p=u.return;if(sp(u),u===d){we=null;break}if(h!==null){h.return=p,we=h;break}we=p}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}we=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,we=o;else e:for(;we!==null;){if(i=we,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xa(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,we=g;break e}we=i.return}}var f=e.current;for(we=f;we!==null;){o=we;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,we=y;else e:for(o=f;we!==null;){if(l=we,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oo(9,l)}}catch(_){lt(l,l.return,_)}if(l===o){we=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,we=w;break e}we=l.return}}if(Ue=a,ys(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(_o,e)}catch{}s=!0}return s}finally{We=n,tn.transition=t}}return!1}function zh(e,t,n){t=Er(n,t),t=q0(e,t,1),e=is(e,t,1),t=It(),e!==null&&(qa(e,1,t),Ut(e,t))}function lt(e,t,n){if(e.tag===3)zh(e,e,n);else for(;t!==null;){if(t.tag===3){zh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(os===null||!os.has(s))){e=Er(n,e),e=Y0(t,e,1),t=is(t,e,1),e=It(),t!==null&&(qa(t,1,e),Ut(t,e));break}}t=t.return}}function by(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&n,vt===e&&(Nt&n)===n&&(mt===4||mt===3&&(Nt&130023424)===Nt&&500>dt()-nu?Ls(e,0):tu|=n),Ut(e,t)}function fp(e,t){t===0&&(e.mode&1?(t=oi,oi<<=1,!(oi&130023424)&&(oi=4194304)):t=1);var n=It();e=Mn(e,t),e!==null&&(qa(e,t,n),Ut(e,n))}function wy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),fp(e,n)}function Ny(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(me(314))}s!==null&&s.delete(t),fp(e,n)}var mp;mp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ft=!1,cy(e,t,n);Ft=!!(e.flags&131072)}else Ft=!1,et&&t.flags&1048576&&y0(t,eo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Pi(e,t),e=t.pendingProps;var a=_r(t,Ct.current);wr(t,n),a=Kd(null,t,s,e,a,n);var i=Jd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$t(s)?(i=!0,Qi(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Gd(t),a.updater=Io,t.stateNode=a,a._reactInternals=t,_c(t,s,e,n),t=Cc(null,t,s,!0,i,n)):(t.tag=0,et&&i&&Rd(t),Tt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Pi(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Sy(s),e=cn(s,e),a){case 0:t=Dc(null,t,s,e,n);break e;case 1:t=Eh(null,t,s,e,n);break e;case 11:t=Dh(null,t,s,e,n);break e;case 14:t=Ch(null,t,s,cn(s.type,e),n);break e}throw Error(me(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:cn(s,a),Dc(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:cn(s,a),Eh(e,t,s,a,n);case 3:e:{if(Z0(t),e===null)throw Error(me(387));s=t.pendingProps,i=t.memoizedState,a=i.element,S0(e,t),so(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Er(Error(me(423)),t),t=Th(e,t,s,n,a);break e}else if(s!==a){a=Er(Error(me(424)),t),t=Th(e,t,s,n,a);break e}else for(Gt=as(t.stateNode.containerInfo.firstChild),Ht=t,et=!0,hn=null,n=N0(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),s===a){t=Rn(e,t,n);break e}Tt(e,t,s,n)}t=t.child}return t;case 5:return _0(t),e===null&&Nc(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,xc(s,a)?o=null:i!==null&&xc(s,i)&&(t.flags|=32),J0(e,t),Tt(e,t,o,n),t.child;case 6:return e===null&&Nc(t),null;case 13:return Q0(e,t,n);case 4:return Hd(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Dr(t,null,s,n):Tt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:cn(s,a),Dh(e,t,s,a,n);case 7:return Tt(e,t,t.pendingProps,n),t.child;case 8:return Tt(e,t,t.pendingProps.children,n),t.child;case 12:return Tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ye(to,s._currentValue),s._currentValue=o,i!==null)if(gn(i.value,o)){if(i.children===a.children&&!zt.current){t=Rn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=In(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),jc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(me(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),jc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,wr(t,n),a=sn(a),s=s(a),t.flags|=1,Tt(e,t,s,n),t.child;case 14:return s=t.type,a=cn(s,t.pendingProps),a=cn(s.type,a),Ch(e,t,s,a,n);case 15:return V0(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:cn(s,a),Pi(e,t),t.tag=1,$t(s)?(e=!0,Qi(t)):e=!1,wr(t,n),H0(t,s,a),_c(t,s,a,n),Cc(null,t,s,!0,e,n);case 19:return X0(e,t,n);case 22:return K0(e,t,n)}throw Error(me(156,t.tag))};function pp(e,t){return Bm(e,t)}function jy(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,s){return new jy(e,t,n,s)}function iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sy(e){if(typeof e=="function")return iu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_d)return 11;if(e===kd)return 14}return 2}function cs(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fi(e,t,n,s,a,i){var o=2;if(s=e,typeof e=="function")iu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case sr:return Ps(n.children,a,i,t);case Sd:o=8,a|=8;break;case Kl:return e=en(12,n,t,a|2),e.elementType=Kl,e.lanes=i,e;case Jl:return e=en(13,n,t,a),e.elementType=Jl,e.lanes=i,e;case Zl:return e=en(19,n,t,a),e.elementType=Zl,e.lanes=i,e;case _m:return Po(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jm:o=10;break e;case Sm:o=9;break e;case _d:o=11;break e;case kd:o=14;break e;case Vn:o=16,s=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=en(o,n,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Ps(e,t,n,s){return e=en(7,e,s,t),e.lanes=n,e}function Po(e,t,n,s){return e=en(22,e,s,t),e.elementType=_m,e.lanes=n,e.stateNode={isHidden:!1},e}function Tl(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function Al(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _y(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ul(0),this.expirationTimes=ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ul(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ou(e,t,n,s,a,i,o,l,c){return e=new _y(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=en(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gd(i),e}function ky(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function gp(e){if(!e)return us;e=e._reactInternals;e:{if(Gs(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var n=e.type;if($t(n))return g0(e,n,t)}return t}function xp(e,t,n,s,a,i,o,l,c){return e=ou(n,s,!0,e,a,i,o,l,c),e.context=gp(null),n=e.current,s=It(),a=ls(n),i=In(s,a),i.callback=t??null,is(n,i,a),e.current.lanes=a,qa(e,a,s),Ut(e,s),e}function Mo(e,t,n,s){var a=t.current,i=It(),o=ls(a);return n=gp(n),t.context===null?t.context=n:t.pendingContext=n,t=In(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=is(a,t,o),e!==null&&(mn(e,a,o,i),Ii(e,a,o)),o}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $h(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lu(e,t){$h(e,t),(e=e.alternate)&&$h(e,t)}function Dy(){return null}var yp=typeof reportError=="function"?reportError:function(e){console.error(e)};function cu(e){this._internalRoot=e}Ro.prototype.render=cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));Mo(e,t,null,null)};Ro.prototype.unmount=cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$s(function(){Mo(null,e,null,null)}),t[Pn]=null}};function Ro(e){this._internalRoot=e}Ro.prototype.unstable_scheduleHydration=function(e){if(e){var t=Km();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zn.length&&t!==0&&t<Zn[n].priority;n++);Zn.splice(n,0,e),n===0&&Zm(e)}};function du(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uh(){}function Cy(e,t,n,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=ho(o);i.call(d)}}var o=xp(t,s,e,0,null,!1,!1,"",Uh);return e._reactRootContainer=o,e[Pn]=o.current,Ia(e.nodeType===8?e.parentNode:e),$s(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=ho(c);l.call(d)}}var c=ou(e,0,!1,null,null,!1,!1,"",Uh);return e._reactRootContainer=c,e[Pn]=c.current,Ia(e.nodeType===8?e.parentNode:e),$s(function(){Mo(t,c,n,s)}),c}function zo(e,t,n,s,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=ho(o);l.call(c)}}Mo(t,o,e,a)}else o=Cy(n,t,e,a,s);return ho(o)}Ym=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ia(t.pendingLanes);n!==0&&(Ed(t,n|1),Ut(t,dt()),!(Ue&6)&&(Tr=dt()+500,ys()))}break;case 13:$s(function(){var s=Mn(e,1);if(s!==null){var a=It();mn(s,e,1,a)}}),lu(e,1)}};Td=function(e){if(e.tag===13){var t=Mn(e,134217728);if(t!==null){var n=It();mn(t,e,134217728,n)}lu(e,134217728)}};Vm=function(e){if(e.tag===13){var t=ls(e),n=Mn(e,t);if(n!==null){var s=It();mn(n,e,t,s)}lu(e,t)}};Km=function(){return We};Jm=function(e,t){var n=We;try{return We=e,t()}finally{We=n}};oc=function(e,t,n){switch(t){case"input":if(ec(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Eo(s);if(!a)throw Error(me(90));Dm(s),ec(s,a)}}}break;case"textarea":Em(e,n);break;case"select":t=n.value,t!=null&&xr(e,!!n.multiple,t,!1)}};Mm=su;Rm=$s;var Ey={usingClientEntryPoint:!1,Events:[Va,or,Eo,Lm,Pm,su]},Qr={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ty={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$m(e),e===null?null:e.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||Dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{_o=yi.inject(Ty),jn=yi}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ey;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!du(t))throw Error(me(200));return ky(e,t,null,n)};Yt.createRoot=function(e,t){if(!du(e))throw Error(me(299));var n=!1,s="",a=yp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ou(e,1,!1,null,null,n,!1,s,a),e[Pn]=t.current,Ia(e.nodeType===8?e.parentNode:e),new cu(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=$m(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return $s(e)};Yt.hydrate=function(e,t,n){if(!Fo(t))throw Error(me(200));return zo(null,e,t,!0,n)};Yt.hydrateRoot=function(e,t,n){if(!du(e))throw Error(me(405));var s=n!=null&&n.hydratedSources||null,a=!1,i="",o=yp;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=xp(t,null,e,1,n??null,a,!1,i,o),e[Pn]=t.current,Ia(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ro(t)};Yt.render=function(e,t,n){if(!Fo(t))throw Error(me(200));return zo(null,e,t,!1,n)};Yt.unmountComponentAtNode=function(e){if(!Fo(e))throw Error(me(40));return e._reactRootContainer?($s(function(){zo(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Yt.unstable_batchedUpdates=su;Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Fo(n))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return zo(e,t,n,!1,s)};Yt.version="18.3.1-next-f1338f8080-20240426";function vp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vp)}catch(e){console.error(e)}}vp(),vm.exports=Yt;var Ay=vm.exports,Bh=Ay;Yl.createRoot=Bh.createRoot,Yl.hydrateRoot=Bh.hydrateRoot;const Iy="modulepreload",Oy=function(e){return"/udms/"+e},Wh={},Ja=function(t,n,s){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Oy(i),i in Wh)return;Wh[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let u=a.length-1;u>=0;u--){const m=a[u];if(m.href===i&&(!o||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Iy,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,m)=>{d.addEventListener("load",u),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Ly=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ja(()=>Promise.resolve().then(()=>zr),void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)};class uu extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class Py extends uu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Gh extends uu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Hh extends uu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $c;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($c||($c={}));var My=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class Ry{constructor(t,{headers:n={},customFetch:s,region:a=$c.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=Ly(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var s;return My(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(x=>{throw new Py(x)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new Gh(m);if(!m.ok)throw new Hh(m);let p=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield m.json():p==="application/octet-stream"?v=yield m.blob():p==="text/event-stream"?v=m:p==="multipart/form-data"?v=yield m.formData():v=yield m.text(),{data:v,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Hh||a instanceof Gh?a.context:void 0}}})}}var Rt={},hu={},$o={},Za={},Uo={},Bo={},Fy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ar=Fy();const zy=Ar.fetch,bp=Ar.fetch.bind(Ar),wp=Ar.Headers,$y=Ar.Request,Uy=Ar.Response,zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:wp,Request:$y,Response:Uy,default:bp,fetch:zy},Symbol.toStringTag,{value:"Module"})),By=ax(zr);var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});let Wy=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Wo.default=Wy;var Np=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});const Gy=Np(By),Hy=Np(Wo);let qy=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Gy.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,m=null,h=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&b&&b.length>1&&(m=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await i.text();try{d=JSON.parse(x),Array.isArray(d)&&i.status===404&&(u=[],d=null,h=200,p="OK")}catch{i.status===404&&x===""?(h=204,p="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,h=200,p="OK"),d&&this.shouldThrowOnError)throw new Hy.default(d)}return{error:d,data:u,count:m,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Bo.default=qy;var Yy=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});const Vy=Yy(Bo);let Ky=class extends Vy.default{select(t){let n=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Uo.default=Ky;var Jy=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Za,"__esModule",{value:!0});const Zy=Jy(Uo);let Qy=class extends Zy.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const s=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(t,n,s){return this.url.searchParams.append(t,`not.${n}.${s}`),this}or(t,{foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,s){return this.url.searchParams.append(t,`${n}.${s}`),this}};Za.default=Qy;var Xy=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($o,"__esModule",{value:!0});const Xr=Xy(Za);let e2=class{constructor(t,{headers:n={},schema:s,fetch:a}){this.url=t,this.headers=n,this.schema=s,this.fetch=a}select(t,{head:n=!1,count:s}={}){const a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Xr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:s=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Xr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Xr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Xr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Xr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$o.default=e2;var Go={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.version=void 0;Ho.version="0.0.0-automated";Object.defineProperty(Go,"__esModule",{value:!0});Go.DEFAULT_HEADERS=void 0;const t2=Ho;Go.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t2.version}`};var jp=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hu,"__esModule",{value:!0});const n2=jp($o),s2=jp(Za),r2=Go;let a2=class Sp{constructor(t,{headers:n={},schema:s,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},r2.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new n2.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Sp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:s=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;s||a?(o=s?"HEAD":"GET",Object.entries(n).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(o="POST",c=n);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new s2.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};hu.default=a2;var $r=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.PostgrestError=Rt.PostgrestBuilder=Rt.PostgrestTransformBuilder=Rt.PostgrestFilterBuilder=Rt.PostgrestQueryBuilder=Rt.PostgrestClient=void 0;const _p=$r(hu);Rt.PostgrestClient=_p.default;const kp=$r($o);Rt.PostgrestQueryBuilder=kp.default;const Dp=$r(Za);Rt.PostgrestFilterBuilder=Dp.default;const Cp=$r(Uo);Rt.PostgrestTransformBuilder=Cp.default;const Ep=$r(Bo);Rt.PostgrestBuilder=Ep.default;const Tp=$r(Wo);Rt.PostgrestError=Tp.default;var i2=Rt.default={PostgrestClient:_p.default,PostgrestQueryBuilder:kp.default,PostgrestFilterBuilder:Dp.default,PostgrestTransformBuilder:Cp.default,PostgrestBuilder:Ep.default,PostgrestError:Tp.default};const{PostgrestClient:o2,PostgrestQueryBuilder:Dj,PostgrestFilterBuilder:Cj,PostgrestTransformBuilder:Ej,PostgrestBuilder:Tj,PostgrestError:Aj}=i2;function l2(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const c2=l2(),d2="2.11.15",u2=`realtime-js/${d2}`,h2="1.0.0",Ap=1e4,f2=1e3;var ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ba||(ba={}));var kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kt||(kt={}));var un;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(un||(un={}));var Uc;(function(e){e.websocket="websocket"})(Uc||(Uc={}));var Es;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Es||(Es={}));class m2{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,n,s)}_decodeBroadcast(t,n,s){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(t.slice(o,o+a));o=o+a;const c=s.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Ip{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(qe||(qe={}));const qh=(e,t,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,o)=>(i[o]=p2(o,e,t,a),i),{})},p2=(e,t,n,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!s.includes(i)?Op(i,o):Bc(o)},Op=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return v2(t,n)}switch(e){case qe.bool:return g2(t);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return x2(t);case qe.json:case qe.jsonb:return y2(t);case qe.timestamp:return b2(t);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Bc(t);default:return Bc(t)}},Bc=e=>e,g2=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},x2=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},y2=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},v2=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Op(t,l))}return e},b2=e=>typeof e=="string"?e.replace(" ","T"):e,Lp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Il{constructor(t,n,s={},a=Ap){this.channel=t,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yh;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yh||(Yh={}));class wa{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wa.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=wa.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wa.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const m=i[d];if(m){const h=u.map(b=>b.presence_ref),p=m.map(b=>b.presence_ref),v=u.filter(b=>p.indexOf(b.presence_ref)<0),x=m.filter(b=>h.indexOf(b.presence_ref)<0);v.length>0&&(l[d]=v),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,n,s,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const m=t[l].map(p=>p.presence_ref),h=u.filter(p=>m.indexOf(p.presence_ref)<0);t[l].unshift(...h)}s(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const a=t[s];return"metas"in a?n[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[s]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Vh||(Vh={}));var Kh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Kh||(Kh={}));var Dn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class fu{constructor(t,n={config:{}},s){this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Il(this,un.join,this.params,this.timeout),this.rejoinTimer=new Ip(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(un.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new wa(this),this.broadcastEndpointURL=Lp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(Dn.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Dn.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var m;if(this.socket.setAuth(),u===void 0){t==null||t(Dn.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(m=h==null?void 0:h.length)!==null&&m!==void 0?m:0,v=[];for(let x=0;x<p;x++){const b=h[x],{filter:{event:g,schema:f,table:y,filter:w}}=b,_=u&&u[x];if(_&&_.event===g&&_.schema===f&&_.table===y&&_.filter===w)v.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=kt.errored,t==null||t(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Dn.SUBSCRIBED);return}}).receive("error",u=>{this.state=kt.errored,t==null||t(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this._on(t,n,s)}async send(t,n={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(un.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Il(this,un.leave,{},t),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Il(this,t,n,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=un;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let h=this._onMessage(o,n,s);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,x,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(h,s)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,x,b,g,f,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,_=(v=p.filter)===null||v===void 0?void 0:v.event;return w&&((x=n.ids)===null||x===void 0?void 0:x.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(f=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:x,table:b,commit_timestamp:g,type:f,errors:y}=v;h=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:g,eventType:f,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(h,s)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&fu.isEqual(a.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(un.close,{},t)}_onError(t){this._on(un.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=qh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=qh(t.columns,t.old_record)),n}}const Jh=()=>{},w2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class N2{constructor(t,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ap,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jh,this.ref=0,this.logger=Jh,this.conn=null,this.sendBuffer=[],this.serializer=new m2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Ja(()=>Promise.resolve().then(()=>zr),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Uc.websocket}`,this.httpEndpoint=Lp(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ip(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=c2),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:h2}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ba.connecting:return Es.Connecting;case ba.open:return Es.Open;case ba.closing:return Es.Closing;default:return Es.Closed}}isConnected(){return this.connectionState()===Es.Open}channel(t,n={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new fu(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:u2};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(un.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(f2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:s,event:a,payload:i,ref:o}=n;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(un.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${s}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([w2],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class mu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function xt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class j2 extends mu{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Wc extends mu{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var S2=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Pp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ja(()=>Promise.resolve().then(()=>zr),void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)},_2=()=>S2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ja(()=>Promise.resolve().then(()=>zr),void 0)).Response:Response}),Gc=e=>{if(Array.isArray(e))return e.map(n=>Gc(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Gc(s)}),t};var Hs=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Ol=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k2=(e,t,n)=>Hs(void 0,void 0,void 0,function*(){const s=yield _2();e instanceof s&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{t(new j2(Ol(a),e.status||500))}).catch(a=>{t(new Wc(Ol(a),a))}):t(new Wc(Ol(e),e))}),D2=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),n))};function Qa(e,t,n,s,a,i){return Hs(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,D2(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>k2(c,l,s))})})}function fo(e,t,n,s){return Hs(this,void 0,void 0,function*(){return Qa(e,"GET",t,n,s)})}function Jn(e,t,n,s,a){return Hs(this,void 0,void 0,function*(){return Qa(e,"POST",t,s,a,n)})}function C2(e,t,n,s,a){return Hs(this,void 0,void 0,function*(){return Qa(e,"PUT",t,s,a,n)})}function E2(e,t,n,s){return Hs(this,void 0,void 0,function*(){return Qa(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Mp(e,t,n,s,a){return Hs(this,void 0,void 0,function*(){return Qa(e,"DELETE",t,s,a,n)})}var Pt=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const T2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class A2{constructor(t,n={},s,a){this.url=t,this.headers=n,this.bucketId=s,this.fetch=Pp(a)}uploadOrUpdate(t,n,s,a){return Pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Zh),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield m.json();return m.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(xt(i))return{data:null,error:i};throw i}})}upload(t,n,s){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,s)})}uploadToSignedUrl(t,n,s,a){return Pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:Zh.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),h=yield m.json();return m.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(xt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Pt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield Jn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new mu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(xt(s))return{data:null,error:s};throw s}})}update(t,n,s){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,s)})}move(t,n,s){return Pt(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}})}copy(t,n,s){return Pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,s){return Pt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Jn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,s){return Pt(this,void 0,void 0,function*(){try{const a=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}})}download(t,n){return Pt(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield fo(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xt(l))return{data:null,error:l};throw l}})}info(t){return Pt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const s=yield fo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Gc(s),error:null}}catch(s){if(xt(s))return{data:null,error:s};throw s}})}exists(t){return Pt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield E2(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(xt(s)&&s instanceof Wc){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,n){const s=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Pt(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}})}list(t,n,s){return Pt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},T2),n),{prefix:t||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const I2="2.7.1",O2={"X-Client-Info":`storage-js/${I2}`};var Vs=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class L2{constructor(t,n={},s){this.url=t,this.headers=Object.assign(Object.assign({},O2),n),this.fetch=Pp(s)}listBuckets(){return Vs(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}})}getBucket(t){return Vs(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Vs(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Vs(this,void 0,void 0,function*(){try{return{data:yield C2(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xt(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Vs(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Vs(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}})}}class P2 extends L2{constructor(t,n={},s){super(t,n,s)}from(t){return new A2(this.url,this.headers,t,this.fetch)}}const M2="2.52.0";let la="";typeof Deno<"u"?la="deno":typeof document<"u"?la="web":typeof navigator<"u"&&navigator.product==="ReactNative"?la="react-native":la="node";const R2={"X-Client-Info":`supabase-js-${la}/${M2}`},F2={headers:R2},z2={schema:"public"},$2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U2={};var B2=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const W2=e=>{let t;return e?t=e:typeof fetch>"u"?t=bp:t=fetch,(...n)=>t(...n)},G2=()=>typeof Headers>"u"?wp:Headers,H2=(e,t,n)=>{const s=W2(n),a=G2();return(i,o)=>B2(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var q2=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function Y2(e){return e.endsWith("/")?e:e+"/"}function V2(e,t){var n,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:m}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>q2(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Rp="2.71.1",er=30*1e3,Hc=3,Ll=Hc*er,K2="http://localhost:9999",J2="supabase.auth.token",Z2={"X-Client-Info":`gotrue-js/${Rp}`},qc="X-Supabase-Api-Version",Fp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,X2=10*60*1e3;class pu extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ev extends pu{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function tv(e){return Le(e)&&e.name==="AuthApiError"}class zp extends pu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class vs extends pu{constructor(t,n,s,a){super(t,s,a),this.name=n,this.status=s}}class Yn extends vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nv(e){return Le(e)&&e.name==="AuthSessionMissingError"}class vi extends vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bi extends vs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wi extends vs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sv(e){return Le(e)&&e.name==="AuthImplicitGrantRedirectError"}class Qh extends vs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yc extends vs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Pl(e){return Le(e)&&e.name==="AuthRetryableFetchError"}class Xh extends vs{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Vc extends vs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ef=` 	
\r=`.split(""),rv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ef.length;t+=1)e[ef[t].charCodeAt(0)]=-2;for(let t=0;t<mo.length;t+=1)e[mo[t].charCodeAt(0)]=t;return e})();function tf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(mo[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(mo[s]),t.queuedBits-=6}}function $p(e,t,n){const s=rv[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function nf(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{ov(o,s,n)};for(let o=0;o<e.length;o+=1)$p(e.charCodeAt(o),a,i);return t.join("")}function av(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function iv(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}av(s,t)}}function ov(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function lv(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)$p(e.charCodeAt(a),n,s);return new Uint8Array(t)}function cv(e){const t=[];return iv(e,n=>t.push(n)),new Uint8Array(t)}function dv(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>tf(a,n,s)),tf(null,n,s),t.join("")}function uv(e){return Math.round(Date.now()/1e3)+e}function hv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ln=()=>typeof window<"u"&&typeof document<"u",ws={tested:!1,writable:!1},Up=()=>{if(!ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ws.tested)return ws.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ws.tested=!0,ws.writable=!0}catch{ws.tested=!0,ws.writable=!1}return ws.writable};function fv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((s,a)=>{t[a]=s}),t}const Bp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ja(()=>Promise.resolve().then(()=>zr),void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)},mv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",tr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ns=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gn=async(e,t)=>{await e.removeItem(t)};class qo{constructor(){this.promise=new qo.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}qo.promiseConstructor=Promise;function Ml(e){const t=e.split(".");if(t.length!==3)throw new Vc("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Q2.test(t[s]))throw new Vc("JWT not in base64url format");return{header:JSON.parse(nf(t[0])),payload:JSON.parse(nf(t[1])),signature:lv(t[2]),raw:{header:t[0],payload:t[1]}}}async function pv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function gv(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function xv(e){return("0"+e.toString(16)).substr(-2)}function yv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,xv).join("")}async function vv(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function bv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await vv(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ks(e,t,n=!1){const s=yv();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await tr(e,`${t}-code-verifier`,a);const i=await bv(s);return[i,s===i?"plain":"s256"]}const wv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nv(e){const t=e.headers.get(qc);if(!t||!t.match(wv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function jv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Sv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _v=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Js(e){if(!_v.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rl(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sf(e){return JSON.parse(JSON.stringify(e))}var kv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};const Ds=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Dv=[502,503,504];async function rf(e){var t;if(!mv(e))throw new Yc(Ds(e),0);if(Dv.includes(e.status))throw new Yc(Ds(e),e.status);let n;try{n=await e.json()}catch(i){throw new zp(Ds(i),i)}let s;const a=Nv(e);if(a&&a.getTime()>=Fp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Xh(Ds(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Yn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Xh(Ds(n),e.status,n.weak_password.reasons);throw new ev(Ds(n),e.status||500,s)}const Cv=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Re(e,t,n,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[qc]||(i[qc]=Fp["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ev(e,t,n+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Ev(e,t,n,s,a,i){const o=Cv(t,s,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Yc(Ds(c),0)}if(l.ok||await rf(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await rf(c)}}function _n(e){var t;let n=null;Ov(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=uv(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function af(e){const t=_n(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Tv(e){return{data:e,error:null}}function Av(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i}=e,o=kv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Iv(e){return e}function Ov(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fl=["global","local","others"];var Lv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};class Pv{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=Bp(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Fl[0]){if(Fl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fl.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xn})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=Lv(t,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Av,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xn})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Iv});if(u.error)throw u.error;const m=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=x}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Le(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Js(t);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xn})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Js(t);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Xn})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){Js(t);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xn})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Js(t.userId);try{const{data:n,error:s}=await Re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Js(t.userId),Js(t.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}}function of(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Mv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zs={debug:!!(globalThis&&Up()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Rv extends Wp{}async function Fv(e,t,n){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Rv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Zs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Mv();const zv={url:K2,storageKey:J2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lf(e,t,n){return await n()}const Qs={};class Ua{constructor(t){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ua.nextInstanceID,Ua.nextInstanceID+=1,this.instanceID>0&&ln()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},zv),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Pv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Bp(a.fetch),this.lock=a.lock||lf,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ln()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Fv:this.lock=lf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Up()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=of(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=of(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Qs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Qs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=fv(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),ln()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sv(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Le(n)?{error:n}:{error:new zp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,a;try{const i=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:_n}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Le(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,s,a;try{let i;if("email"in t){const{email:u,password:m,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Ks(this.storage,this.storageKey)),i=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:_n})}else if("phone"in t){const{phone:u,password:m,options:h}=t;i=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_n})}else throw new bi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Le(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:af})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:af})}else throw new bi("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new vi}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,s,a,i,o,l,c,d,u,m,h,p;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:b,wallet:g,statement:f,options:y}=t;let w;if(ln())if(typeof g=="object")w=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const _=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),f?{statement:f}:null));let k;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")k=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)k=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((m=(u=y==null?void 0:y.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...y.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:b,error:g}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:dv(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:_n});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new vi}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(Le(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Ns(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:i,error:o}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:_n});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new vi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Le(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:s,token:a,access_token:i,nonce:o}=t,l=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_n}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vi}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,s,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ks(this.storage,this.storageKey));const{error:m}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new bi("You must provide either an email or phone number.")}catch(l){if(Le(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,s;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:_n});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ks(this.storage,this.storageKey)),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Tv})}catch(i){if(Le(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new Yn;const{error:a}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Le(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await Re(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await Re(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new bi("You must provide either an email or phone number and a type")}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Ll:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await Ns(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Rl()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xn}):await this._useSession(async n=>{var s,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yn}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Xn})})}catch(n){if(Le(n))return nv(n)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Yn;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ks(this.storage,this.storageKey));const{data:d,error:u}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Xn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Yn;const n=Date.now()/1e3;let s=n,a=!0,i=null;const{payload:o}=Ml(t.access_token);if(o.exp&&(s=o.exp,a=s<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Yn;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!ln())throw new wi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Qh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Qh("No code detected.");const{data:f,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new wi("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let h=u+m;c&&(h=parseInt(c));const p=h-u;p*1e3<=er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const v=h-m;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,u);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:h,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(s){if(Le(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ns(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(tv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=hv(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Ks(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Le(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:m,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ln()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Le(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,a;const{data:i,error:o}=n;if(o)throw o;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await gv(async a=>(a>0&&await pv(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_n})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Pl(i)&&Date.now()+o-s<er})}catch(s){if(this._debug(n,"error",s),Le(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),ln()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Ns(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await tr(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Rl()}else if(a&&!a.user&&!a.user){const o=await Ns(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Gn(this.storage,this.storageKey+"-user"),await tr(this.storage,this.storageKey,a)):a.user=Rl()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ll;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Ll}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Pl(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new Yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new qo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Yn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Le(i)){const o={session:null,error:i};return Pl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await tr(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=sf(a);await tr(this.storage,this.storageKey,i)}else{const a=sf(n);await tr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),er);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${er}ms, refresh threshold is ${Hc} ticks`),a<=Hc&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Wp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ks(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?{data:null,error:i}:await Re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await Re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?{data:null,error:i}:await Re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(t==null?void 0:t.factors)||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,s;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ml(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(l=>l.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+X2>a)return s;const{data:i,error:o}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};s=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Ml(s);n!=null&&n.allowExpired||jv(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=Sv(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,o,cv(`${l}.${c}`)))throw new Vc("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}}}Ua.nextInstanceID=0;const $v=Ua;class Uv extends $v{constructor(t){super(t)}}var Bv=globalThis&&globalThis.__awaiter||function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(m){o(m)}}function c(u){try{d(s.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class Wv{constructor(t,n,s){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Y2(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:z2,realtime:U2,auth:Object.assign(Object.assign({},$2),{storageKey:d}),global:F2},m=V2(s??{},u);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=H2(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new o2(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new Ry(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new P2(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},s={}){return this.rest.rpc(t,n,s)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Bv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:s,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Uv({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:s,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new N2(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,n,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Gv=(e,t,n)=>new Wv(e,t,n),Hv="https://xsukqhvchoknflfqolgy.supabase.co",qv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhzdWtxaHZjaG9rbmZsZnFvbGd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNDAxNDAsImV4cCI6MjA2ODcxNjE0MH0.MZd2NtioXJDnPgfKQWG_TZeNsemxWv1voLupv3X82zc",Pe=Gv(Hv,qv),Yv=e=>e.replace(/_([a-z])/g,(t,n)=>n.toUpperCase()),Vv=e=>e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`),Cn=e=>{if(e==null)return e;if(Array.isArray(e))return e.map(Cn);if(typeof e!="object")return e;const t={};for(const[n,s]of Object.entries(e)){const a=Yv(n);t[a]=Cn(s)}return t},po=e=>{if(e==null)return e;if(Array.isArray(e))return e.map(po);if(typeof e!="object")return e;const t={};for(const[n,s]of Object.entries(e)){const a=Vv(n);t[a]=po(s)}return t},Gp=e=>e?e.toLowerCase().replace(//g,"g").replace(//g,"u").replace(//g,"s").replace(//g,"i").replace(//g,"o").replace(//g,"c").replace(//g,"i").replace(/[^a-z0-9.-]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").substring(0,50):"",ve={getAll:async e=>{const{data:t,error:n}=await Pe.from(e).select("*");if(n)throw n;return Cn(t)},getById:async(e,t)=>{const{data:n,error:s}=await Pe.from(e).select("*").eq("id",t).single();if(s)throw s;return Cn(n)},create:async(e,t)=>{console.log("apiClient.create called with:",{tableName:e,newData:JSON.stringify(t,null,2)});const n=po(t);console.log("Converted to snake_case:",JSON.stringify(n,null,2));const{data:s,error:a}=await Pe.from(e).insert(n).select().single();if(console.log("Supabase response:",{data:s,error:a}),a)throw a;const i=Cn(s);return console.log("Final result:",i),i},update:async(e,t,n)=>{const s=po(n),{data:a,error:i}=await Pe.from(e).update(s).eq("id",t).single();if(i)throw i;return Cn(a)},delete:async(e,t)=>{const{data:n,error:s}=await Pe.from(e).delete().eq("id",t);if(s)throw s;return Cn(n)},getStudentsWithGroups:async()=>{const{data:e,error:t}=await Pe.from("students").select(`
            *,
            group:groups(*)
        `);if(t)throw t;return Cn(e)},getGroupsWithStudentCount:async()=>{const{data:e,error:t}=await Pe.rpc("get_groups_with_student_count");if(t)throw t;return Cn(e)}},gu=I.createContext(),at=()=>{const e=I.useContext(gu);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},Kv=({children:e})=>{const[t,n]=I.useState([]),[s,a]=I.useState([]),[i,o]=I.useState([]),[l,c]=I.useState([]),[d,u]=I.useState([]),[m,h]=I.useState([]),[p,v]=I.useState([]),[x,b]=I.useState(!0),[g,f]=I.useState(null),y=I.useCallback(async()=>{try{b(!0),f(null);const[_,S,k,A,F,R,Q]=await Promise.all([ve.getAll("students"),ve.getAll("groups"),ve.getAll("lessons"),ve.getAll("events"),ve.getAll("todos"),ve.getAll("documents"),ve.getAll("transactions")]);n(_),a(S),o(k),c(A),u(F),h(R),v(Q)}catch(_){console.error("Error fetching data:",_),f(_.message)}finally{b(!1)}},[]);I.useEffect(()=>{y()},[y]);const w={students:t,groups:s,lessons:i,events:l,todos:d,documents:m,transactions:p,loading:x,error:g,fetchData:y};return r.jsx(gu.Provider,{value:w,children:e})},Hp=I.createContext(),Jv=({children:e})=>{const[t,n]=I.useState(null),[s,a]=I.useState(null),i=I.useCallback((l,c="info",d=3e3)=>{a(m=>(m&&clearTimeout(m),null)),n({message:l,type:c});const u=setTimeout(()=>{n(null),a(null)},d);a(u)},[]),o=I.useCallback(()=>{a(l=>(l&&clearTimeout(l),null)),n(null)},[]);return r.jsx(Hp.Provider,{value:{notification:t,showNotification:i,hideNotification:o},children:e})},Xe=()=>I.useContext(Hp);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function Zv(e,t,n){return(t=Xv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cf(Object(n),!0).forEach(function(s){Zv(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Qv(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xv(e){var t=Qv(e,"string");return typeof t=="symbol"?t:t+""}const df=()=>{};let xu={},qp={},Yp=null,Vp={mark:df,measure:df};try{typeof window<"u"&&(xu=window),typeof document<"u"&&(qp=document),typeof MutationObserver<"u"&&(Yp=MutationObserver),typeof performance<"u"&&(Vp=performance)}catch{}const{userAgent:uf=""}=xu.navigator||{},hs=xu,Ze=qp,hf=Yp,Ni=Vp;hs.document;const Bn=!!Ze.documentElement&&!!Ze.head&&typeof Ze.addEventListener=="function"&&typeof Ze.createElement=="function",Kp=~uf.indexOf("MSIE")||~uf.indexOf("Trident/");var eb=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,tb=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Jp={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},nb={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Zp=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Et="classic",Yo="duotone",sb="sharp",rb="sharp-duotone",Qp=[Et,Yo,sb,rb],ab={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},ib={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},ob=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),lb={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},cb=["fak","fa-kit","fakd","fa-kit-duotone"],ff={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},db=["kit"],ub={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},hb=["fak","fakd"],fb={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},mf={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},ji={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},mb=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],pb=["fak","fa-kit","fakd","fa-kit-duotone"],gb={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},xb={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},yb={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},Kc={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},vb=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Jc=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...mb,...vb],bb=["solid","regular","light","thin","duotone","brands"],Xp=[1,2,3,4,5,6,7,8,9,10],wb=Xp.concat([11,12,13,14,15,16,17,18,19,20]),Nb=[...Object.keys(yb),...bb,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ji.GROUP,ji.SWAP_OPACITY,ji.PRIMARY,ji.SECONDARY].concat(Xp.map(e=>"".concat(e,"x"))).concat(wb.map(e=>"w-".concat(e))),jb={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Fn="___FONT_AWESOME___",Zc=16,eg="fa",tg="svg-inline--fa",Us="data-fa-i2svg",Qc="data-fa-pseudo-element",Sb="data-fa-pseudo-element-pending",yu="data-prefix",vu="data-icon",pf="fontawesome-i2svg",_b="async",kb=["HTML","HEAD","STYLE","SCRIPT"],ng=(()=>{try{return!0}catch{return!1}})();function Xa(e){return new Proxy(e,{get(t,n){return n in t?t[n]:t[Et]}})}const sg=fe({},Jp);sg[Et]=fe(fe(fe(fe({},{"fa-duotone":"duotone"}),Jp[Et]),ff.kit),ff["kit-duotone"]);const Db=Xa(sg),Xc=fe({},lb);Xc[Et]=fe(fe(fe(fe({},{duotone:"fad"}),Xc[Et]),mf.kit),mf["kit-duotone"]);const gf=Xa(Xc),ed=fe({},Kc);ed[Et]=fe(fe({},ed[Et]),fb.kit);const bu=Xa(ed),td=fe({},xb);td[Et]=fe(fe({},td[Et]),ub.kit);Xa(td);const Cb=eb,rg="fa-layers-text",Eb=tb,Tb=fe({},ab);Xa(Tb);const Ab=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],zl=nb,Ib=[...db,...Nb],Na=hs.FontAwesomeConfig||{};function Ob(e){var t=Ze.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Lb(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}Ze&&typeof Ze.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[n,s]=t;const a=Lb(Ob(n));a!=null&&(Na[s]=a)});const ag={styleDefault:"solid",familyDefault:Et,cssPrefix:eg,replacementClass:tg,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Na.familyPrefix&&(Na.cssPrefix=Na.familyPrefix);const Ir=fe(fe({},ag),Na);Ir.autoReplaceSvg||(Ir.observeMutations=!1);const ke={};Object.keys(ag).forEach(e=>{Object.defineProperty(ke,e,{enumerable:!0,set:function(t){Ir[e]=t,ja.forEach(n=>n(ke))},get:function(){return Ir[e]}})});Object.defineProperty(ke,"familyPrefix",{enumerable:!0,set:function(e){Ir.cssPrefix=e,ja.forEach(t=>t(ke))},get:function(){return Ir.cssPrefix}});hs.FontAwesomeConfig=ke;const ja=[];function Pb(e){return ja.push(e),()=>{ja.splice(ja.indexOf(e),1)}}const Hn=Zc,wn={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Mb(e){if(!e||!Bn)return;const t=Ze.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=Ze.head.childNodes;let s=null;for(let a=n.length-1;a>-1;a--){const i=n[a],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(s=i)}return Ze.head.insertBefore(t,s),e}const Rb="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ba(){let e=12,t="";for(;e-- >0;)t+=Rb[Math.random()*62|0];return t}function Ur(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function wu(e){return e.classList?Ur(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function ig(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Fb(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(ig(e[n]),'" '),"").trim()}function Vo(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function Nu(e){return e.size!==wn.size||e.x!==wn.x||e.y!==wn.y||e.rotate!==wn.rotate||e.flipX||e.flipY}function zb(e){let{transform:t,containerWidth:n,iconWidth:s}=e;const a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(t.x*32,", ").concat(t.y*32,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(i," ").concat(o," ").concat(l)},d={transform:"translate(".concat(s/2*-1," -256)")};return{outer:a,inner:c,path:d}}function $b(e){let{transform:t,width:n=Zc,height:s=Zc,startCentered:a=!1}=e,i="";return a&&Kp?i+="translate(".concat(t.x/Hn-n/2,"em, ").concat(t.y/Hn-s/2,"em) "):a?i+="translate(calc(-50% + ".concat(t.x/Hn,"em), calc(-50% + ").concat(t.y/Hn,"em)) "):i+="translate(".concat(t.x/Hn,"em, ").concat(t.y/Hn,"em) "),i+="scale(".concat(t.size/Hn*(t.flipX?-1:1),", ").concat(t.size/Hn*(t.flipY?-1:1),") "),i+="rotate(".concat(t.rotate,"deg) "),i}var Ub=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function og(){const e=eg,t=tg,n=ke.cssPrefix,s=ke.replacementClass;let a=Ub;if(n!==e||s!==t){const i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");a=a.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(l,".".concat(s))}return a}let xf=!1;function $l(){ke.autoAddCss&&!xf&&(Mb(og()),xf=!0)}var Bb={mixout(){return{dom:{css:og,insertCss:$l}}},hooks(){return{beforeDOMElementCreation(){$l()},beforeI2svg(){$l()}}}};const zn=hs||{};zn[Fn]||(zn[Fn]={});zn[Fn].styles||(zn[Fn].styles={});zn[Fn].hooks||(zn[Fn].hooks={});zn[Fn].shims||(zn[Fn].shims=[]);var Nn=zn[Fn];const lg=[],cg=function(){Ze.removeEventListener("DOMContentLoaded",cg),go=1,lg.map(e=>e())};let go=!1;Bn&&(go=(Ze.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ze.readyState),go||Ze.addEventListener("DOMContentLoaded",cg));function Wb(e){Bn&&(go?setTimeout(e,0):lg.push(e))}function ei(e){const{tag:t,attributes:n={},children:s=[]}=e;return typeof e=="string"?ig(e):"<".concat(t," ").concat(Fb(n),">").concat(s.map(ei).join(""),"</").concat(t,">")}function yf(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var Gb=function(t,n){return function(s,a,i,o){return t.call(n,s,a,i,o)}},Ul=function(t,n,s,a){var i=Object.keys(t),o=i.length,l=a!==void 0?Gb(n,a):n,c,d,u;for(s===void 0?(c=1,u=t[i[0]]):(c=0,u=s);c<o;c++)d=i[c],u=l(u,t[d],d,t);return u};function Hb(e){const t=[];let n=0;const s=e.length;for(;n<s;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<s){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}function nd(e){const t=Hb(e);return t.length===1?t[0].toString(16):null}function qb(e,t){const n=e.length;let s=e.charCodeAt(t),a;return s>=55296&&s<=56319&&n>t+1&&(a=e.charCodeAt(t+1),a>=56320&&a<=57343)?(s-55296)*1024+a-56320+65536:s}function vf(e){return Object.keys(e).reduce((t,n)=>{const s=e[n];return!!s.icon?t[s.iconName]=s.icon:t[n]=s,t},{})}function sd(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:s=!1}=n,a=vf(t);typeof Nn.hooks.addPack=="function"&&!s?Nn.hooks.addPack(e,vf(t)):Nn.styles[e]=fe(fe({},Nn.styles[e]||{}),a),e==="fas"&&sd("fa",t)}const{styles:Wa,shims:Yb}=Nn,dg=Object.keys(bu),Vb=dg.reduce((e,t)=>(e[t]=Object.keys(bu[t]),e),{});let ju=null,ug={},hg={},fg={},mg={},pg={};function Kb(e){return~Ib.indexOf(e)}function Jb(e,t){const n=t.split("-"),s=n[0],a=n.slice(1).join("-");return s===e&&a!==""&&!Kb(a)?a:null}const gg=()=>{const e=s=>Ul(Wa,(a,i,o)=>(a[o]=Ul(i,s,{}),a),{});ug=e((s,a,i)=>(a[3]&&(s[a[3]]=i),a[2]&&a[2].filter(l=>typeof l=="number").forEach(l=>{s[l.toString(16)]=i}),s)),hg=e((s,a,i)=>(s[i]=i,a[2]&&a[2].filter(l=>typeof l=="string").forEach(l=>{s[l]=i}),s)),pg=e((s,a,i)=>{const o=a[2];return s[i]=i,o.forEach(l=>{s[l]=i}),s});const t="far"in Wa||ke.autoFetchSvg,n=Ul(Yb,(s,a)=>{const i=a[0];let o=a[1];const l=a[2];return o==="far"&&!t&&(o="fas"),typeof i=="string"&&(s.names[i]={prefix:o,iconName:l}),typeof i=="number"&&(s.unicodes[i.toString(16)]={prefix:o,iconName:l}),s},{names:{},unicodes:{}});fg=n.names,mg=n.unicodes,ju=Ko(ke.styleDefault,{family:ke.familyDefault})};Pb(e=>{ju=Ko(e.styleDefault,{family:ke.familyDefault})});gg();function Su(e,t){return(ug[e]||{})[t]}function Zb(e,t){return(hg[e]||{})[t]}function Os(e,t){return(pg[e]||{})[t]}function xg(e){return fg[e]||{prefix:null,iconName:null}}function Qb(e){const t=mg[e],n=Su("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function fs(){return ju}const yg=()=>({prefix:null,iconName:null,rest:[]});function Xb(e){let t=Et;const n=dg.reduce((s,a)=>(s[a]="".concat(ke.cssPrefix,"-").concat(a),s),{});return Qp.forEach(s=>{(e.includes(n[s])||e.some(a=>Vb[s].includes(a)))&&(t=s)}),t}function Ko(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Et}=t,s=Db[n][e];if(n===Yo&&!e)return"fad";const a=gf[n][e]||gf[n][s],i=e in Nn.styles?e:null;return a||i||null}function ew(e){let t=[],n=null;return e.forEach(s=>{const a=Jb(ke.cssPrefix,s);a?n=a:s&&t.push(s)}),{iconName:n,rest:t}}function bf(e){return e.sort().filter((t,n,s)=>s.indexOf(t)===n)}function Jo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=t;let s=null;const a=Jc.concat(pb),i=bf(e.filter(m=>a.includes(m))),o=bf(e.filter(m=>!Jc.includes(m))),l=i.filter(m=>(s=m,!Zp.includes(m))),[c=null]=l,d=Xb(i),u=fe(fe({},ew(o)),{},{prefix:Ko(c,{family:d})});return fe(fe(fe({},u),rw({values:e,family:d,styles:Wa,config:ke,canonical:u,givenPrefix:s})),tw(n,s,u))}function tw(e,t,n){let{prefix:s,iconName:a}=n;if(e||!s||!a)return{prefix:s,iconName:a};const i=t==="fa"?xg(a):{},o=Os(s,a);return a=i.iconName||o||a,s=i.prefix||s,s==="far"&&!Wa.far&&Wa.fas&&!ke.autoFetchSvg&&(s="fas"),{prefix:s,iconName:a}}const nw=Qp.filter(e=>e!==Et||e!==Yo),sw=Object.keys(Kc).filter(e=>e!==Et).map(e=>Object.keys(Kc[e])).flat();function rw(e){const{values:t,family:n,canonical:s,givenPrefix:a="",styles:i={},config:o={}}=e,l=n===Yo,c=t.includes("fa-duotone")||t.includes("fad"),d=o.familyDefault==="duotone",u=s.prefix==="fad"||s.prefix==="fa-duotone";if(!l&&(c||d||u)&&(s.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(s.prefix="fab"),!s.prefix&&nw.includes(n)&&(Object.keys(i).find(h=>sw.includes(h))||o.autoFetchSvg)){const h=ob.get(n).defaultShortPrefixId;s.prefix=h,s.iconName=Os(s.prefix,s.iconName)||s.iconName}return(s.prefix==="fa"||a==="fa")&&(s.prefix=fs()||"fas"),s}class aw{constructor(){this.definitions={}}add(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];const a=n.reduce(this._pullDefinitions,{});Object.keys(a).forEach(i=>{this.definitions[i]=fe(fe({},this.definitions[i]||{}),a[i]),sd(i,a[i]);const o=bu[Et][i];o&&sd(o,a[i]),gg()})}reset(){this.definitions={}}_pullDefinitions(t,n){const s=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(s).map(a=>{const{prefix:i,iconName:o,icon:l}=s[a],c=l[2];t[i]||(t[i]={}),c.length>0&&c.forEach(d=>{typeof d=="string"&&(t[i][d]=l)}),t[i][o]=l}),t}}let wf=[],mr={};const jr={},iw=Object.keys(jr);function ow(e,t){let{mixoutsTo:n}=t;return wf=e,mr={},Object.keys(jr).forEach(s=>{iw.indexOf(s)===-1&&delete jr[s]}),wf.forEach(s=>{const a=s.mixout?s.mixout():{};if(Object.keys(a).forEach(i=>{typeof a[i]=="function"&&(n[i]=a[i]),typeof a[i]=="object"&&Object.keys(a[i]).forEach(o=>{n[i]||(n[i]={}),n[i][o]=a[i][o]})}),s.hooks){const i=s.hooks();Object.keys(i).forEach(o=>{mr[o]||(mr[o]=[]),mr[o].push(i[o])})}s.provides&&s.provides(jr)}),n}function rd(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];return(mr[e]||[]).forEach(o=>{t=o.apply(null,[t,...s])}),t}function Bs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];(mr[e]||[]).forEach(i=>{i.apply(null,n)})}function ms(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return jr[e]?jr[e].apply(null,t):void 0}function ad(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||fs();if(t)return t=Os(n,t)||t,yf(vg.definitions,n,t)||yf(Nn.styles,n,t)}const vg=new aw,lw=()=>{ke.autoReplaceSvg=!1,ke.observeMutations=!1,Bs("noAuto")},cw={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Bn?(Bs("beforeI2svg",e),ms("pseudoElements2svg",e),ms("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;ke.autoReplaceSvg===!1&&(ke.autoReplaceSvg=!0),ke.observeMutations=!0,Wb(()=>{uw({autoReplaceSvgRoot:t}),Bs("watch",e)})}},dw={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Os(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=Ko(e[0]);return{prefix:n,iconName:Os(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(ke.cssPrefix,"-"))>-1||e.match(Cb))){const t=Jo(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||fs(),iconName:Os(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=fs();return{prefix:t,iconName:Os(t,e)||e}}}},Kt={noAuto:lw,config:ke,dom:cw,parse:dw,library:vg,findIconDefinition:ad,toHtml:ei},uw=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=Ze}=e;(Object.keys(Nn.styles).length>0||ke.autoFetchSvg)&&Bn&&ke.autoReplaceSvg&&Kt.dom.i2svg({node:t})};function Zo(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(n=>ei(n))}}),Object.defineProperty(e,"node",{get:function(){if(!Bn)return;const n=Ze.createElement("div");return n.innerHTML=e.html,n.children}}),e}function hw(e){let{children:t,main:n,mask:s,attributes:a,styles:i,transform:o}=e;if(Nu(o)&&n.found&&!s.found){const{width:l,height:c}=n,d={x:l/c/2,y:.5};a.style=Vo(fe(fe({},i),{},{"transform-origin":"".concat(d.x+o.x/16,"em ").concat(d.y+o.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}function fw(e){let{prefix:t,iconName:n,children:s,attributes:a,symbol:i}=e;const o=i===!0?"".concat(t,"-").concat(ke.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:fe(fe({},a),{},{id:o}),children:s}]}]}function _u(e){const{icons:{main:t,mask:n},prefix:s,iconName:a,transform:i,symbol:o,title:l,maskId:c,titleId:d,extra:u,watchable:m=!1}=e,{width:h,height:p}=n.found?n:t,v=hb.includes(s),x=[ke.replacementClass,a?"".concat(ke.cssPrefix,"-").concat(a):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let b={children:[],attributes:fe(fe({},u.attributes),{},{"data-prefix":s,"data-icon":a,class:x,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(p)})};const g=v&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/p*16*.0625,"em")}:{};m&&(b.attributes[Us]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(d||Ba())},children:[l]}),delete b.attributes.title);const f=fe(fe({},b),{},{prefix:s,iconName:a,main:t,mask:n,maskId:c,transform:i,symbol:o,styles:fe(fe({},g),u.styles)}),{children:y,attributes:w}=n.found&&t.found?ms("generateAbstractMask",f)||{children:[],attributes:{}}:ms("generateAbstractIcon",f)||{children:[],attributes:{}};return f.children=y,f.attributes=w,o?fw(f):hw(f)}function Nf(e){const{content:t,width:n,height:s,transform:a,title:i,extra:o,watchable:l=!1}=e,c=fe(fe(fe({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});l&&(c[Us]="");const d=fe({},o.styles);Nu(a)&&(d.transform=$b({transform:a,startCentered:!0,width:n,height:s}),d["-webkit-transform"]=d.transform);const u=Vo(d);u.length>0&&(c.style=u);const m=[];return m.push({tag:"span",attributes:c,children:[t]}),i&&m.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),m}function mw(e){const{content:t,title:n,extra:s}=e,a=fe(fe(fe({},s.attributes),n?{title:n}:{}),{},{class:s.classes.join(" ")}),i=Vo(s.styles);i.length>0&&(a.style=i);const o=[];return o.push({tag:"span",attributes:a,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Bl}=Nn;function id(e){const t=e[0],n=e[1],[s]=e.slice(4);let a=null;return Array.isArray(s)?a={tag:"g",attributes:{class:"".concat(ke.cssPrefix,"-").concat(zl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ke.cssPrefix,"-").concat(zl.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(ke.cssPrefix,"-").concat(zl.PRIMARY),fill:"currentColor",d:s[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:t,height:n,icon:a}}const pw={found:!1,width:512,height:512};function gw(e,t){!ng&&!ke.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function od(e,t){let n=t;return t==="fa"&&ke.styleDefault!==null&&(t=fs()),new Promise((s,a)=>{if(n==="fa"){const i=xg(e)||{};e=i.iconName||e,t=i.prefix||t}if(e&&t&&Bl[t]&&Bl[t][e]){const i=Bl[t][e];return s(id(i))}gw(e,t),s(fe(fe({},pw),{},{icon:ke.showMissingIcons&&e?ms("missingIconAbstract")||{}:{}}))})}const jf=()=>{},ld=ke.measurePerformance&&Ni&&Ni.mark&&Ni.measure?Ni:{mark:jf,measure:jf},ca='FA "6.7.2"',xw=e=>(ld.mark("".concat(ca," ").concat(e," begins")),()=>bg(e)),bg=e=>{ld.mark("".concat(ca," ").concat(e," ends")),ld.measure("".concat(ca," ").concat(e),"".concat(ca," ").concat(e," begins"),"".concat(ca," ").concat(e," ends"))};var ku={begin:xw,end:bg};const zi=()=>{};function Sf(e){return typeof(e.getAttribute?e.getAttribute(Us):null)=="string"}function yw(e){const t=e.getAttribute?e.getAttribute(yu):null,n=e.getAttribute?e.getAttribute(vu):null;return t&&n}function vw(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(ke.replacementClass)}function bw(){return ke.autoReplaceSvg===!0?$i.replace:$i[ke.autoReplaceSvg]||$i.replace}function ww(e){return Ze.createElementNS("http://www.w3.org/2000/svg",e)}function Nw(e){return Ze.createElement(e)}function wg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=e.tag==="svg"?ww:Nw}=t;if(typeof e=="string")return Ze.createTextNode(e);const s=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(i){s.setAttribute(i,e.attributes[i])}),(e.children||[]).forEach(function(i){s.appendChild(wg(i,{ceFn:n}))}),s}function jw(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const $i={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(n=>{t.parentNode.insertBefore(wg(n),t)}),t.getAttribute(Us)===null&&ke.keepOriginalSource){let n=Ze.createComment(jw(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~wu(t).indexOf(ke.replacementClass))return $i.replace(e);const s=new RegExp("".concat(ke.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const i=n[0].attributes.class.split(" ").reduce((o,l)=>(l===ke.replacementClass||l.match(s)?o.toSvg.push(l):o.toNode.push(l),o),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}const a=n.map(i=>ei(i)).join(`
`);t.setAttribute(Us,""),t.innerHTML=a}};function _f(e){e()}function Ng(e,t){const n=typeof t=="function"?t:zi;if(e.length===0)n();else{let s=_f;ke.mutateApproach===_b&&(s=hs.requestAnimationFrame||_f),s(()=>{const a=bw(),i=ku.begin("mutate");e.map(a),i(),n()})}}let Du=!1;function jg(){Du=!0}function cd(){Du=!1}let xo=null;function kf(e){if(!hf||!ke.observeMutations)return;const{treeCallback:t=zi,nodeCallback:n=zi,pseudoElementsCallback:s=zi,observeMutationsRoot:a=Ze}=e;xo=new hf(i=>{if(Du)return;const o=fs();Ur(i).forEach(l=>{if(l.type==="childList"&&l.addedNodes.length>0&&!Sf(l.addedNodes[0])&&(ke.searchPseudoElements&&s(l.target),t(l.target)),l.type==="attributes"&&l.target.parentNode&&ke.searchPseudoElements&&s(l.target.parentNode),l.type==="attributes"&&Sf(l.target)&&~Ab.indexOf(l.attributeName))if(l.attributeName==="class"&&yw(l.target)){const{prefix:c,iconName:d}=Jo(wu(l.target));l.target.setAttribute(yu,c||o),d&&l.target.setAttribute(vu,d)}else vw(l.target)&&n(l.target)})}),Bn&&xo.observe(a,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Sw(){xo&&xo.disconnect()}function _w(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((s,a)=>{const i=a.split(":"),o=i[0],l=i.slice(1);return o&&l.length>0&&(s[o]=l.join(":").trim()),s},{})),n}function kw(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),s=e.innerText!==void 0?e.innerText.trim():"";let a=Jo(wu(e));return a.prefix||(a.prefix=fs()),t&&n&&(a.prefix=t,a.iconName=n),a.iconName&&a.prefix||(a.prefix&&s.length>0&&(a.iconName=Zb(a.prefix,e.innerText)||Su(a.prefix,nd(e.innerText))),!a.iconName&&ke.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(a.iconName=e.firstChild.data)),a}function Dw(e){const t=Ur(e.attributes).reduce((a,i)=>(a.name!=="class"&&a.name!=="style"&&(a[i.name]=i.value),a),{}),n=e.getAttribute("title"),s=e.getAttribute("data-fa-title-id");return ke.autoA11y&&(n?t["aria-labelledby"]="".concat(ke.replacementClass,"-title-").concat(s||Ba()):(t["aria-hidden"]="true",t.focusable="false")),t}function Cw(){return{iconName:null,title:null,titleId:null,prefix:null,transform:wn,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Df(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:s,rest:a}=kw(e),i=Dw(e),o=rd("parseNodeAttributes",{},e);let l=t.styleParser?_w(e):[];return fe({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:s,transform:wn,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:l,attributes:i}},o)}const{styles:Ew}=Nn;function Sg(e){const t=ke.autoReplaceSvg==="nest"?Df(e,{styleParser:!1}):Df(e);return~t.extra.classes.indexOf(rg)?ms("generateLayersText",e,t):ms("generateSvgReplacementMutation",e,t)}function Tw(){return[...cb,...Jc]}function Cf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Bn)return Promise.resolve();const n=Ze.documentElement.classList,s=u=>n.add("".concat(pf,"-").concat(u)),a=u=>n.remove("".concat(pf,"-").concat(u)),i=ke.autoFetchSvg?Tw():Zp.concat(Object.keys(Ew));i.includes("fa")||i.push("fa");const o=[".".concat(rg,":not([").concat(Us,"])")].concat(i.map(u=>".".concat(u,":not([").concat(Us,"])"))).join(", ");if(o.length===0)return Promise.resolve();let l=[];try{l=Ur(e.querySelectorAll(o))}catch{}if(l.length>0)s("pending"),a("complete");else return Promise.resolve();const c=ku.begin("onTree"),d=l.reduce((u,m)=>{try{const h=Sg(m);h&&u.push(h)}catch(h){ng||h.name==="MissingIcon"&&console.error(h)}return u},[]);return new Promise((u,m)=>{Promise.all(d).then(h=>{Ng(h,()=>{s("active"),s("complete"),a("pending"),typeof t=="function"&&t(),c(),u()})}).catch(h=>{c(),m(h)})})}function Aw(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Sg(e).then(n=>{n&&Ng([n],t)})}function Iw(e){return function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=(t||{}).icon?t:ad(t||{});let{mask:a}=n;return a&&(a=(a||{}).icon?a:ad(a||{})),e(s,fe(fe({},n),{},{mask:a}))}}const Ow=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=wn,symbol:s=!1,mask:a=null,maskId:i=null,title:o=null,titleId:l=null,classes:c=[],attributes:d={},styles:u={}}=t;if(!e)return;const{prefix:m,iconName:h,icon:p}=e;return Zo(fe({type:"icon"},e),()=>(Bs("beforeDOMElementCreation",{iconDefinition:e,params:t}),ke.autoA11y&&(o?d["aria-labelledby"]="".concat(ke.replacementClass,"-title-").concat(l||Ba()):(d["aria-hidden"]="true",d.focusable="false")),_u({icons:{main:id(p),mask:a?id(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:m,iconName:h,transform:fe(fe({},wn),n),symbol:s,title:o,maskId:i,titleId:l,extra:{attributes:d,styles:u,classes:c}})))};var Lw={mixout(){return{icon:Iw(Ow)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=Cf,e.nodeCallback=Aw,e}}},provides(e){e.i2svg=function(t){const{node:n=Ze,callback:s=()=>{}}=t;return Cf(n,s)},e.generateSvgReplacementMutation=function(t,n){const{iconName:s,title:a,titleId:i,prefix:o,transform:l,symbol:c,mask:d,maskId:u,extra:m}=n;return new Promise((h,p)=>{Promise.all([od(s,o),d.iconName?od(d.iconName,d.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(v=>{let[x,b]=v;h([t,_u({icons:{main:x,mask:b},prefix:o,iconName:s,transform:l,symbol:c,maskId:u,title:a,titleId:i,extra:m,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){let{children:n,attributes:s,main:a,transform:i,styles:o}=t;const l=Vo(o);l.length>0&&(s.style=l);let c;return Nu(i)&&(c=ms("generateAbstractTransformGrouping",{main:a,transform:i,containerWidth:a.width,iconWidth:a.width})),n.push(c||a.icon),{children:n,attributes:s}}}},Pw={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=t;return Zo({type:"layer"},()=>{Bs("beforeDOMElementCreation",{assembler:e,params:t});let s=[];return e(a=>{Array.isArray(a)?a.map(i=>{s=s.concat(i.abstract)}):s=s.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(ke.cssPrefix,"-layers"),...n].join(" ")},children:s}]})}}}},Mw={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:s=[],attributes:a={},styles:i={}}=t;return Zo({type:"counter",content:e},()=>(Bs("beforeDOMElementCreation",{content:e,params:t}),mw({content:e.toString(),title:n,extra:{attributes:a,styles:i,classes:["".concat(ke.cssPrefix,"-layers-counter"),...s]}})))}}}},Rw={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=wn,title:s=null,classes:a=[],attributes:i={},styles:o={}}=t;return Zo({type:"text",content:e},()=>(Bs("beforeDOMElementCreation",{content:e,params:t}),Nf({content:e,transform:fe(fe({},wn),n),title:s,extra:{attributes:i,styles:o,classes:["".concat(ke.cssPrefix,"-layers-text"),...a]}})))}}},provides(e){e.generateLayersText=function(t,n){const{title:s,transform:a,extra:i}=n;let o=null,l=null;if(Kp){const c=parseInt(getComputedStyle(t).fontSize,10),d=t.getBoundingClientRect();o=d.width/c,l=d.height/c}return ke.autoA11y&&!s&&(i.attributes["aria-hidden"]="true"),Promise.resolve([t,Nf({content:t.innerHTML,width:o,height:l,transform:a,title:s,extra:i,watchable:!0})])}}};const Fw=new RegExp('"',"ug"),Ef=[1105920,1112319],Tf=fe(fe(fe(fe({},{FontAwesome:{normal:"fas",400:"fas"}}),ib),jb),gb),dd=Object.keys(Tf).reduce((e,t)=>(e[t.toLowerCase()]=Tf[t],e),{}),zw=Object.keys(dd).reduce((e,t)=>{const n=dd[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function $w(e){const t=e.replace(Fw,""),n=qb(t,0),s=n>=Ef[0]&&n<=Ef[1],a=t.length===2?t[0]===t[1]:!1;return{value:nd(a?t[0]:t),isSecondary:s||a}}function Uw(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),s=parseInt(t),a=isNaN(s)?"normal":s;return(dd[n]||{})[a]||zw[n]}function Af(e,t){const n="".concat(Sb).concat(t.replace(":","-"));return new Promise((s,a)=>{if(e.getAttribute(n)!==null)return s();const o=Ur(e.children).filter(h=>h.getAttribute(Qc)===t)[0],l=hs.getComputedStyle(e,t),c=l.getPropertyValue("font-family"),d=c.match(Eb),u=l.getPropertyValue("font-weight"),m=l.getPropertyValue("content");if(o&&!d)return e.removeChild(o),s();if(d&&m!=="none"&&m!==""){const h=l.getPropertyValue("content");let p=Uw(c,u);const{value:v,isSecondary:x}=$w(h),b=d[0].startsWith("FontAwesome");let g=Su(p,v),f=g;if(b){const y=Qb(v);y.iconName&&y.prefix&&(g=y.iconName,p=y.prefix)}if(g&&!x&&(!o||o.getAttribute(yu)!==p||o.getAttribute(vu)!==f)){e.setAttribute(n,f),o&&e.removeChild(o);const y=Cw(),{extra:w}=y;w.attributes[Qc]=t,od(g,p).then(_=>{const S=_u(fe(fe({},y),{},{icons:{main:_,mask:yg()},prefix:p,iconName:f,extra:w,watchable:!0})),k=Ze.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=S.map(A=>ei(A)).join(`
`),e.removeAttribute(n),s()}).catch(a)}else s()}else s()})}function Bw(e){return Promise.all([Af(e,"::before"),Af(e,"::after")])}function Ww(e){return e.parentNode!==document.head&&!~kb.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Qc)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function If(e){if(Bn)return new Promise((t,n)=>{const s=Ur(e.querySelectorAll("*")).filter(Ww).map(Bw),a=ku.begin("searchPseudoElements");jg(),Promise.all(s).then(()=>{a(),cd(),t()}).catch(()=>{a(),cd(),n()})})}var Gw={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=If,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:n=Ze}=t;ke.searchPseudoElements&&If(n)}}};let Of=!1;var Hw={mixout(){return{dom:{unwatch(){jg(),Of=!0}}}},hooks(){return{bootstrap(){kf(rd("mutationObserverCallbacks",{}))},noAuto(){Sw()},watch(e){const{observeMutationsRoot:t}=e;Of?cd():kf(rd("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const Lf=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((n,s)=>{const a=s.toLowerCase().split("-"),i=a[0];let o=a.slice(1).join("-");if(i&&o==="h")return n.flipX=!0,n;if(i&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(i){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},t)};var qw={mixout(){return{parse:{transform:e=>Lf(e)}}},hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=Lf(n)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:n,transform:s,containerWidth:a,iconWidth:i}=t;const o={transform:"translate(".concat(a/2," 256)")},l="translate(".concat(s.x*32,", ").concat(s.y*32,") "),c="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),d="rotate(".concat(s.rotate," 0 0)"),u={transform:"".concat(l," ").concat(c," ").concat(d)},m={transform:"translate(".concat(i/2*-1," -256)")},h={outer:o,inner:u,path:m};return{tag:"g",attributes:fe({},h.outer),children:[{tag:"g",attributes:fe({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:fe(fe({},n.icon.attributes),h.path)}]}]}}}};const Wl={x:0,y:0,width:"100%",height:"100%"};function Pf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Yw(e){return e.tag==="g"?e.children:[e]}var Vw={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),s=n?Jo(n.split(" ").map(a=>a.trim())):yg();return s.prefix||(s.prefix=fs()),e.mask=s,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:n,attributes:s,main:a,mask:i,maskId:o,transform:l}=t;const{width:c,icon:d}=a,{width:u,icon:m}=i,h=zb({transform:l,containerWidth:u,iconWidth:c}),p={tag:"rect",attributes:fe(fe({},Wl),{},{fill:"white"})},v=d.children?{children:d.children.map(Pf)}:{},x={tag:"g",attributes:fe({},h.inner),children:[Pf(fe({tag:d.tag,attributes:fe(fe({},d.attributes),h.path)},v))]},b={tag:"g",attributes:fe({},h.outer),children:[x]},g="mask-".concat(o||Ba()),f="clip-".concat(o||Ba()),y={tag:"mask",attributes:fe(fe({},Wl),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,b]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:f},children:Yw(m)},y]};return n.push(w,{tag:"rect",attributes:fe({fill:"currentColor","clip-path":"url(#".concat(f,")"),mask:"url(#".concat(g,")")},Wl)}),{children:n,attributes:s}}}},Kw={provides(e){let t=!1;hs.matchMedia&&(t=hs.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const n=[],s={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:fe(fe({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=fe(fe({},a),{},{attributeName:"opacity"}),o={tag:"circle",attributes:fe(fe({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:fe(fe({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:fe(fe({},i),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:fe(fe({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:fe(fe({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:fe(fe({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:fe(fe({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},Jw={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),s=n===null?!1:n===""?!0:n;return e.symbol=s,e}}}},Zw=[Bb,Lw,Pw,Mw,Rw,Gw,Hw,qw,Vw,Kw,Jw];ow(Zw,{mixoutsTo:Kt});Kt.noAuto;Kt.config;Kt.library;Kt.dom;const ud=Kt.parse;Kt.findIconDefinition;Kt.toHtml;const Qw=Kt.icon;Kt.layer;Kt.text;Kt.counter;var _g={exports:{}},Xw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",e3=Xw,t3=e3;function kg(){}function Dg(){}Dg.resetWarningCache=kg;var n3=function(){function e(s,a,i,o,l,c){if(c!==t3){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Dg,resetWarningCache:kg};return n.PropTypes=n,n};_g.exports=n3();var s3=_g.exports;const Me=gd(s3);function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mf(Object(n),!0).forEach(function(s){pr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yo(e){"@babel/helpers - typeof";return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yo(e)}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r3(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function a3(e,t){if(e==null)return{};var n=r3(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function hd(e){return i3(e)||o3(e)||l3(e)||c3()}function i3(e){if(Array.isArray(e))return fd(e)}function o3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l3(e,t){if(e){if(typeof e=="string")return fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fd(e,t)}}function fd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function c3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d3(e){var t,n=e.beat,s=e.fade,a=e.beatFade,i=e.bounce,o=e.shake,l=e.flash,c=e.spin,d=e.spinPulse,u=e.spinReverse,m=e.pulse,h=e.fixedWidth,p=e.inverse,v=e.border,x=e.listItem,b=e.flip,g=e.size,f=e.rotation,y=e.pull,w=(t={"fa-beat":n,"fa-fade":s,"fa-beat-fade":a,"fa-bounce":i,"fa-shake":o,"fa-flash":l,"fa-spin":c,"fa-spin-reverse":u,"fa-spin-pulse":d,"fa-pulse":m,"fa-fw":h,"fa-inverse":p,"fa-border":v,"fa-li":x,"fa-flip":b===!0,"fa-flip-horizontal":b==="horizontal"||b==="both","fa-flip-vertical":b==="vertical"||b==="both"},pr(t,"fa-".concat(g),typeof g<"u"&&g!==null),pr(t,"fa-rotate-".concat(f),typeof f<"u"&&f!==null&&f!==0),pr(t,"fa-pull-".concat(y),typeof y<"u"&&y!==null),pr(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map(function(_){return w[_]?_:null}).filter(function(_){return _})}function u3(e){return e=e-0,e===e}function Cg(e){return u3(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,n){return n?n.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var h3=["style"];function f3(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m3(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var s=n.indexOf(":"),a=Cg(n.slice(0,s)),i=n.slice(s+1).trim();return a.startsWith("webkit")?t[f3(a)]=i:t[a]=i,t},{})}function Eg(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var s=(t.children||[]).map(function(c){return Eg(e,c)}),a=Object.keys(t.attributes||{}).reduce(function(c,d){var u=t.attributes[d];switch(d){case"class":c.attrs.className=u,delete t.attributes.class;break;case"style":c.attrs.style=m3(u);break;default:d.indexOf("aria-")===0||d.indexOf("data-")===0?c.attrs[d.toLowerCase()]=u:c.attrs[Cg(d)]=u}return c},{attrs:{}}),i=n.style,o=i===void 0?{}:i,l=a3(n,h3);return a.attrs.style=vn(vn({},a.attrs.style),o),e.apply(void 0,[t.tag,vn(vn({},a.attrs),l)].concat(hd(s)))}var Tg=!1;try{Tg=!0}catch{}function p3(){if(!Tg&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Rf(e){if(e&&yo(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(ud.icon)return ud.icon(e);if(e===null)return null;if(e&&yo(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Gl(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?pr({},e,t):{}}var Ff={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},gr=So.forwardRef(function(e,t){var n=vn(vn({},Ff),e),s=n.icon,a=n.mask,i=n.symbol,o=n.className,l=n.title,c=n.titleId,d=n.maskId,u=Rf(s),m=Gl("classes",[].concat(hd(d3(n)),hd((o||"").split(" ")))),h=Gl("transform",typeof n.transform=="string"?ud.transform(n.transform):n.transform),p=Gl("mask",Rf(a)),v=Qw(u,vn(vn(vn(vn({},m),h),p),{},{symbol:i,title:l,titleId:c,maskId:d}));if(!v)return p3("Could not find icon",u),null;var x=v.abstract,b={ref:t};return Object.keys(n).forEach(function(g){Ff.hasOwnProperty(g)||(b[g]=n[g])}),g3(x[0],b)});gr.displayName="FontAwesomeIcon";gr.propTypes={beat:Me.bool,border:Me.bool,beatFade:Me.bool,bounce:Me.bool,className:Me.string,fade:Me.bool,flash:Me.bool,mask:Me.oneOfType([Me.object,Me.array,Me.string]),maskId:Me.string,fixedWidth:Me.bool,inverse:Me.bool,flip:Me.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Me.oneOfType([Me.object,Me.array,Me.string]),listItem:Me.bool,pull:Me.oneOf(["right","left"]),pulse:Me.bool,rotation:Me.oneOf([0,90,180,270]),shake:Me.bool,size:Me.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Me.bool,spinPulse:Me.bool,spinReverse:Me.bool,symbol:Me.oneOfType([Me.bool,Me.string]),title:Me.string,titleId:Me.string,transform:Me.oneOfType([Me.string,Me.object]),swapOpacity:Me.bool};var g3=Eg.bind(null,So.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const x3={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},y3=x3,v3={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},b3=v3,w3={prefix:"fas",iconName:"circle-minus",icon:[512,512,["minus-circle"],"f056","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232l144 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-144 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},N3=w3,j3={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},S3=j3,_3={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32L48 32C21.5 32 0 53.5 0 80L0 400c0 26.5 21.5 48 48 48l144 0 0-272c0-44.2 35.8-80 80-80l48 0 0-16c0-26.5-21.5-48-48-48l-56.6 0C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48l0 272 0 16c0 26.5 21.5 48 48 48l192 0c26.5 0 48-21.5 48-48l0-220.1c0-12.7-5.1-24.9-14.1-33.9l-67.9-67.9c-9-9-21.2-14.1-33.9-14.1L320 128l-48 0zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},k3={prefix:"fas",iconName:"box-archive",icon:[512,512,["archive"],"f187","M32 32l448 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96L0 64C0 46.3 14.3 32 32 32zm0 128l448 0 0 256c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-256zm128 80c0 8.8 7.2 16 16 16l160 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-160 0c-8.8 0-16 7.2-16 16z"]},D3=k3,C3={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},E3={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},Ui=E3,T3={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},A3={prefix:"fas",iconName:"lock",icon:[448,512,[128274],"f023","M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"]},I3={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},O3=I3,zf={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"]},L3={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},P3={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},M3={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},R3={prefix:"fas",iconName:"bullhorn",icon:[512,512,[128226,128363],"f0a1","M480 32c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9L381.7 53c-48 48-113.1 75-181 75l-8.7 0-32 0-96 0c-35.3 0-64 28.7-64 64l0 96c0 35.3 28.7 64 64 64l0 128c0 17.7 14.3 32 32 32l64 0c17.7 0 32-14.3 32-32l0-128 8.7 0c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-147.6c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4L480 32zm-64 76.7L416 240l0 131.3C357.2 317.8 280.5 288 200.7 288l-8.7 0 0-96 8.7 0c79.8 0 156.5-29.8 215.3-83.3z"]},F3={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M352 256c0 22.2-1.2 43.6-3.3 64l-185.3 0c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64l185.3 0c2.2 20.4 3.3 41.8 3.3 64zm28.8-64l123.1 0c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64l-123.1 0c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32l-116.7 0c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0l-176.6 0c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0L18.6 160C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192l123.1 0c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64L8.1 320C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6l176.6 0c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352l116.7 0zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6l116.7 0z"]},$f={prefix:"fas",iconName:"money-bill-wave",icon:[576,512,[],"f53a","M0 112.5L0 422.3c0 18 10.1 35 27 41.3c87 32.5 174 10.3 261-11.9c79.8-20.3 159.6-40.7 239.3-18.9c23 6.3 48.7-9.5 48.7-33.4l0-309.9c0-18-10.1-35-27-41.3C462 15.9 375 38.1 288 60.3C208.2 80.6 128.4 100.9 48.7 79.1C25.6 72.8 0 88.6 0 112.5zM288 352c-44.2 0-80-43-80-96s35.8-96 80-96s80 43 80 96s-35.8 96-80 96zM64 352c35.3 0 64 28.7 64 64l-64 0 0-64zm64-208c0 35.3-28.7 64-64 64l0-64 64 0zM512 304l0 64-64 0c0-35.3 28.7-64 64-64zM448 96l64 0 0 64c-35.3 0-64-28.7-64-64z"]},z3={prefix:"fas",iconName:"ban",icon:[512,512,[128683,"cancel"],"f05e","M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]},$3={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},U3=$3,B3={prefix:"fas",iconName:"user-minus",icon:[640,512,[],"f503","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM472 200l144 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-144 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},W3={prefix:"fas",iconName:"clipboard",icon:[384,512,[128203],"f328","M192 0c-41.8 0-77.4 26.7-90.5 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-37.5 0C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},G3={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},H3=G3,q3={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},Y3={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},V3=Y3,K3={prefix:"fas",iconName:"file-contract",icon:[384,512,[],"f56c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM80 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L80 96c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm54.2 253.8c-6.1 20.3-24.8 34.2-46 34.2L80 416c-8.8 0-16-7.2-16-16s7.2-16 16-16l8.2 0c7.1 0 13.3-4.6 15.3-11.4l14.9-49.5c3.4-11.3 13.8-19.1 25.6-19.1s22.2 7.7 25.6 19.1l11.6 38.6c7.4-6.2 16.8-9.7 26.8-9.7c15.9 0 30.4 9 37.5 23.2l4.4 8.8 54.1 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-6.1 0-11.6-3.4-14.3-8.8l-8.8-17.7c-1.7-3.4-5.1-5.5-8.8-5.5s-7.2 2.1-8.8 5.5l-8.8 17.7c-2.9 5.9-9.2 9.4-15.7 8.8s-12.1-5.1-13.9-11.3L144 349l-9.8 32.8z"]},Uf={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},J3={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},Z3={prefix:"fas",iconName:"screwdriver-wrench",icon:[512,512,["tools"],"f7d9","M78.6 5C69.1-2.4 55.6-1.5 47 7L7 47c-8.5 8.5-9.4 22-2.1 31.6l80 104c4.5 5.9 11.6 9.4 19 9.4l54.1 0 109 109c-14.7 29-10 65.4 14.3 89.6l112 112c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-112-112c-24.2-24.2-60.6-29-89.6-14.3l-109-109 0-54.1c0-7.5-3.5-14.5-9.4-19L78.6 5zM19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L233.7 374.3c-7.8-20.9-9-43.6-3.6-65.1l-61.7-61.7L19.9 396.1zM512 144c0-10.5-1.1-20.7-3.2-30.5c-2.4-11.2-16.1-14.1-24.2-6l-63.9 63.9c-3 3-7.1 4.7-11.3 4.7L352 176c-8.8 0-16-7.2-16-16l0-57.4c0-4.2 1.7-8.3 4.7-11.3l63.9-63.9c8.1-8.1 5.2-21.8-6-24.2C388.7 1.1 378.5 0 368 0C288.5 0 224 64.5 224 144l0 .8 85.3 85.3c36-9.1 75.8 .5 104 28.7L429 274.5c49-23 83-72.8 83-130.5zM56 432a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},Q3=Z3,X3={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},e4={prefix:"fas",iconName:"wallet",icon:[512,512,[],"f555","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L80 128c-8.8 0-16-7.2-16-16s7.2-16 16-16l368 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L64 32zM416 272a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},t4={prefix:"fas",iconName:"clipboard-check",icon:[384,512,[],"f46c","M192 0c-41.8 0-77.4 26.7-90.5 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-37.5 0C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM305 273L177 401c-9.4 9.4-24.6 9.4-33.9 0L79 337c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L271 239c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},n4={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},s4={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},r4=s4,a4={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},i4=a4,o4={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"]},l4={prefix:"fas",iconName:"calendar-xmark",icon:[448,512,["calendar-times"],"f273","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM305 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-47 47-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l47 47-47 47c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l47-47 47 47c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-47-47 47-47z"]},c4=l4,Bf={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},d4={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},u4={prefix:"fas",iconName:"cake-candles",icon:[448,512,[127874,"birthday-cake","cake"],"f1fd","M86.4 5.5L61.8 47.6C58 54.1 56 61.6 56 69.2L56 72c0 22.1 17.9 40 40 40s40-17.9 40-40l0-2.8c0-7.6-2-15-5.8-21.6L105.6 5.5C103.6 2.1 100 0 96 0s-7.6 2.1-9.6 5.5zm128 0L189.8 47.6c-3.8 6.5-5.8 14-5.8 21.6l0 2.8c0 22.1 17.9 40 40 40s40-17.9 40-40l0-2.8c0-7.6-2-15-5.8-21.6L233.6 5.5C231.6 2.1 228 0 224 0s-7.6 2.1-9.6 5.5zM317.8 47.6c-3.8 6.5-5.8 14-5.8 21.6l0 2.8c0 22.1 17.9 40 40 40s40-17.9 40-40l0-2.8c0-7.6-2-15-5.8-21.6L361.6 5.5C359.6 2.1 356 0 352 0s-7.6 2.1-9.6 5.5L317.8 47.6zM128 176c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 48c-35.3 0-64 28.7-64 64l0 71c8.3 5.2 18.1 9 28.8 9c13.5 0 27.2-6.1 38.4-13.4c5.4-3.5 9.9-7.1 13-9.7c1.5-1.3 2.7-2.4 3.5-3.1c.4-.4 .7-.6 .8-.8l.1-.1s0 0 0 0s0 0 0 0s0 0 0 0s0 0 0 0c3.1-3.2 7.4-4.9 11.9-4.8s8.6 2.1 11.6 5.4c0 0 0 0 0 0s0 0 0 0l.1 .1c.1 .1 .4 .4 .7 .7c.7 .7 1.7 1.7 3.1 3c2.8 2.6 6.8 6.1 11.8 9.5c10.2 7.1 23 13.1 36.3 13.1s26.1-6 36.3-13.1c5-3.5 9-6.9 11.8-9.5c1.4-1.3 2.4-2.3 3.1-3c.3-.3 .6-.6 .7-.7l.1-.1c3-3.5 7.4-5.4 12-5.4s9 2 12 5.4l.1 .1c.1 .1 .4 .4 .7 .7c.7 .7 1.7 1.7 3.1 3c2.8 2.6 6.8 6.1 11.8 9.5c10.2 7.1 23 13.1 36.3 13.1s26.1-6 36.3-13.1c5-3.5 9-6.9 11.8-9.5c1.4-1.3 2.4-2.3 3.1-3c.3-.3 .6-.6 .7-.7l.1-.1c2.9-3.4 7.1-5.3 11.6-5.4s8.7 1.6 11.9 4.8c0 0 0 0 0 0s0 0 0 0s0 0 0 0l.1 .1c.2 .2 .4 .4 .8 .8c.8 .7 1.9 1.8 3.5 3.1c3.1 2.6 7.5 6.2 13 9.7c11.2 7.3 24.9 13.4 38.4 13.4c10.7 0 20.5-3.9 28.8-9l0-71c0-35.3-28.7-64-64-64l0-48c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 48-64 0 0-48c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 48-64 0 0-48zM448 394.6c-8.5 3.3-18.2 5.4-28.8 5.4c-22.5 0-42.4-9.9-55.8-18.6c-4.1-2.7-7.8-5.4-10.9-7.8c-2.8 2.4-6.1 5-9.8 7.5C329.8 390 310.6 400 288 400s-41.8-10-54.6-18.9c-3.5-2.4-6.7-4.9-9.4-7.2c-2.7 2.3-5.9 4.7-9.4 7.2C201.8 390 182.6 400 160 400s-41.8-10-54.6-18.9c-3.7-2.6-7-5.2-9.8-7.5c-3.1 2.4-6.8 5.1-10.9 7.8C71.2 390.1 51.3 400 28.8 400c-10.6 0-20.3-2.2-28.8-5.4L0 480c0 17.7 14.3 32 32 32l384 0c17.7 0 32-14.3 32-32l0-85.4z"]},h4=u4,Wf={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},f4={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},m4=f4,p4={prefix:"fas",iconName:"camera",icon:[512,512,[62258,"camera-alt"],"f030","M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},g4={prefix:"fas",iconName:"calendar-check",icon:[448,512,[],"f274","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM329 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L329 305z"]},x4={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]},y4=x4,v4={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},b4=v4,w4={prefix:"fas",iconName:"cart-shopping",icon:[576,512,[128722,"shopping-cart"],"f07a","M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},N4=w4,j4={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},S4={prefix:"fas",iconName:"calculator",icon:[384,512,[128425],"f1ec","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"]},_4={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},k4={prefix:"fas",iconName:"mobile",icon:[384,512,[128241,"mobile-android","mobile-phone"],"f3ce","M80 0C44.7 0 16 28.7 16 64l0 384c0 35.3 28.7 64 64 64l224 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L80 0zm80 432l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},D4={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96l576 0c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96zm0 32L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-288L0 128zM64 405.3c0-29.5 23.9-53.3 53.3-53.3l117.3 0c29.5 0 53.3 23.9 53.3 53.3c0 5.9-4.8 10.7-10.7 10.7L74.7 416c-5.9 0-10.7-4.8-10.7-10.7zM176 192a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm176 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},C4={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},E4=C4,Gf={prefix:"fas",iconName:"utensils",icon:[448,512,[127860,61685,"cutlery"],"f2e7","M416 0C400 0 288 32 288 176l0 112c0 35.3 28.7 64 64 64l32 0 0 128c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128 0-112 0-208c0-17.7-14.3-32-32-32zM64 16C64 7.8 57.9 1 49.7 .1S34.2 4.6 32.4 12.5L2.1 148.8C.7 155.1 0 161.5 0 167.9c0 45.9 35.1 83.6 80 87.7L80 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-224.4c44.9-4.1 80-41.8 80-87.7c0-6.4-.7-12.8-2.1-19.1L191.6 12.5c-1.8-8-9.3-13.3-17.4-12.4S160 7.8 160 16l0 134.2c0 5.4-4.4 9.8-9.8 9.8c-5.1 0-9.3-3.9-9.8-9L127.9 14.6C127.2 6.3 120.3 0 112 0s-15.2 6.3-15.9 14.6L83.7 151c-.5 5.1-4.7 9-9.8 9c-5.4 0-9.8-4.4-9.8-9.8L64 16zm48.3 152l-.3 0-.3 0 .3-.7 .3 .7z"]},T4={prefix:"fas",iconName:"upload",icon:[512,512,[],"f093","M288 109.3L288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-242.7-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352l128 0c0 35.3 28.7 64 64 64s64-28.7 64-64l128 0c35.3 0 64 28.7 64 64l0 32c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64l0-32c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},A4={prefix:"fas",iconName:"bolt",icon:[448,512,[9889,"zap"],"f0e7","M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288l111.5 0L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7l-111.5 0L349.4 44.6z"]},I4={prefix:"fas",iconName:"credit-card",icon:[576,512,[128179,62083,"credit-card-alt"],"f09d","M64 32C28.7 32 0 60.7 0 96l0 32 576 0 0-32c0-35.3-28.7-64-64-64L64 32zM576 224L0 224 0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-192zM112 352l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm112 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},O4={prefix:"fas",iconName:"car",icon:[512,512,[128664,"automobile"],"f1b9","M135.2 117.4L109.1 192l293.8 0-26.1-74.6C372.3 104.6 360.2 96 346.6 96L165.4 96c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32l181.2 0c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2l0 144 0 48c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-48L96 400l0 48c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-48L0 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},Hf={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},L4={prefix:"fas",iconName:"inbox",icon:[512,512,[],"f01c","M121 32C91.6 32 66 52 58.9 80.5L1.9 308.4C.6 313.5 0 318.7 0 323.9L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-92.1c0-5.2-.6-10.4-1.9-15.5l-57-227.9C446 52 420.4 32 391 32L121 32zm0 64l270 0 48 192-51.2 0c-12.1 0-23.2 6.8-28.6 17.7l-14.3 28.6c-5.4 10.8-16.5 17.7-28.6 17.7l-120.4 0c-12.1 0-23.2-6.8-28.6-17.7l-14.3-28.6c-5.4-10.8-16.5-17.7-28.6-17.7L73 288 121 96z"]},P4={prefix:"fas",iconName:"gauge-high",icon:[512,512,[62461,"tachometer-alt","tachometer-alt-fast"],"f625","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM256 416c35.3 0 64-28.7 64-64c0-17.4-6.9-33.1-18.1-44.6L366 161.7c5.3-12.1-.2-26.3-12.3-31.6s-26.3 .2-31.6 12.3L257.9 288c-.6 0-1.3 0-1.9 0c-35.3 0-64 28.7-64 64s28.7 64 64 64zM176 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM96 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm352-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},M4=P4,R4={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},F4=R4,z4={prefix:"fas",iconName:"receipt",icon:[384,512,[129534],"f543","M14 2.2C22.5-1.7 32.5-.3 39.6 5.8L80 40.4 120.4 5.8c9-7.7 22.3-7.7 31.2 0L192 40.4 232.4 5.8c9-7.7 22.3-7.7 31.2 0L304 40.4 344.4 5.8c7.1-6.1 17.1-7.5 25.6-3.6s14 12.4 14 21.8l0 464c0 9.4-5.5 17.9-14 21.8s-18.5 2.5-25.6-3.6L304 471.6l-40.4 34.6c-9 7.7-22.3 7.7-31.2 0L192 471.6l-40.4 34.6c-9 7.7-22.3 7.7-31.2 0L80 471.6 39.6 506.2c-7.1 6.1-17.1 7.5-25.6 3.6S0 497.4 0 488L0 24C0 14.6 5.5 6.1 14 2.2zM96 144c-8.8 0-16 7.2-16 16s7.2 16 16 16l192 0c8.8 0 16-7.2 16-16s-7.2-16-16-16L96 144zM80 352c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16s-7.2-16-16-16L96 336c-8.8 0-16 7.2-16 16zM96 240c-8.8 0-16 7.2-16 16s7.2 16 16 16l192 0c8.8 0 16-7.2 16-16s-7.2-16-16-16L96 240z"]},$4={prefix:"fas",iconName:"user-graduate",icon:[448,512,[],"f501","M219.3 .5c3.1-.6 6.3-.6 9.4 0l200 40C439.9 42.7 448 52.6 448 64s-8.1 21.3-19.3 23.5L352 102.9l0 57.1c0 70.7-57.3 128-128 128s-128-57.3-128-128l0-57.1L48 93.3l0 65.1 15.7 78.4c.9 4.7-.3 9.6-3.3 13.3s-7.6 5.9-12.4 5.9l-32 0c-4.8 0-9.3-2.1-12.4-5.9s-4.3-8.6-3.3-13.3L16 158.4l0-71.8C6.5 83.3 0 74.3 0 64C0 52.6 8.1 42.7 19.3 40.5l200-40zM111.9 327.7c10.5-3.4 21.8 .4 29.4 8.5l71 75.5c6.3 6.7 17 6.7 23.3 0l71-75.5c7.6-8.1 18.9-11.9 29.4-8.5C401 348.6 448 409.4 448 481.3c0 17-13.8 30.7-30.7 30.7L30.7 512C13.8 512 0 498.2 0 481.3c0-71.9 47-132.7 111.9-153.6z"]},U4={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},B4={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},W4={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},G4=W4,H4={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},q4={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},Y4={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},V4={prefix:"fas",iconName:"building",icon:[384,512,[127970,61687],"f1ad","M48 0C21.5 0 0 21.5 0 48L0 464c0 26.5 21.5 48 48 48l96 0 0-80c0-26.5 21.5-48 48-48s48 21.5 48 48l0 80 96 0c26.5 0 48-21.5 48-48l0-416c0-26.5-21.5-48-48-48L48 0zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm112-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM80 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM272 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"]},K4={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},J4={prefix:"fas",iconName:"music",icon:[512,512,[127925],"f001","M499.1 6.3c8.1 6 12.9 15.6 12.9 25.7l0 72 0 264c0 44.2-43 80-96 80s-96-35.8-96-80s43-80 96-80c11.2 0 22 1.6 32 4.6L448 147 192 223.8 192 432c0 44.2-43 80-96 80s-96-35.8-96-80s43-80 96-80c11.2 0 22 1.6 32 4.6L128 200l0-72c0-14.1 9.3-26.6 22.8-30.7l320-96c9.7-2.9 20.2-1.1 28.3 5z"]},Z4={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},Q4={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},qf={prefix:"fas",iconName:"briefcase",icon:[512,512,[128188],"f0b1","M184 48l144 0c4.4 0 8 3.6 8 8l0 40L176 96l0-40c0-4.4 3.6-8 8-8zm-56 8l0 40L64 96C28.7 96 0 124.7 0 160l0 96 192 0 128 0 192 0 0-96c0-35.3-28.7-64-64-64l-64 0 0-40c0-30.9-25.1-56-56-56L184 0c-30.9 0-56 25.1-56 56zM512 288l-192 0 0 32c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-32L0 288 0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-128z"]},Yf={prefix:"fas",iconName:"book-open",icon:[576,512,[128214,128366],"f518","M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5l0-377.4c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8L0 454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5l0-370.3c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11L304 456c0 11.4 11.7 19.3 22.4 15.5z"]},X4={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Vf=X4,e6={prefix:"fas",iconName:"paper-plane",icon:[512,512,[61913],"f1d8","M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"]},t6={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},n6=t6,s6={prefix:"fas",iconName:"file-invoice",icon:[384,512,[],"f570","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM80 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L80 96c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm16 96l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 352c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32zm0 32l0 64 192 0 0-64L96 256zM240 416l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},r6={prefix:"fas",iconName:"plane",icon:[576,512,[],"f072","M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64l-116.6 0L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1l-56.2 0c-10.6 0-18.3-10.2-15.4-20.4l49-171.6L112 320 68.8 377.6c-3 4-7.8 6.4-12.8 6.4l-42 0c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14l42 0c5 0 9.8 2.4 12.8 6.4L112 192l102.9 0-49-171.6C162.9 10.2 170.6 0 181.2 0l56.2 0c11.5 0 22.1 6.2 27.8 16.1L365.7 192l116.6 0z"]},a6={prefix:"fas",iconName:"print",icon:[512,512,[128424,128438,9113],"f02f","M128 0C92.7 0 64 28.7 64 64l0 96 64 0 0-96 226.7 0L384 93.3l0 66.7 64 0 0-66.7c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0L128 0zM384 352l0 32 0 64-256 0 0-64 0-16 0-16 256 0zm64 32l32 0c17.7 0 32-14.3 32-32l0-96c0-35.3-28.7-64-64-64L64 192c-35.3 0-64 28.7-64 64l0 96c0 17.7 14.3 32 32 32l32 0 0 64c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-64zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},i6={prefix:"fas",iconName:"dollar-sign",icon:[320,512,[128178,61781,"dollar","usd"],"24","M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"]},o6={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},B=({path:e,className:t=""})=>{if(!e)return console.warn("Icon component received an undefined path."),r.jsx(gr,{icon:Ui,className:t});if(typeof e!="object"||!e.iconName)return console.warn("Icon component received an invalid path:",e),r.jsx(gr,{icon:Ui,className:t});try{return r.jsx(gr,{icon:e,className:t})}catch(n){return console.error("Error rendering icon:",n,"Path:",e),r.jsx(gr,{icon:Ui,className:t})}},T={DASHBOARD:M4,STUDENTS:$4,GROUPS:zf,FINANCES:i6,DOCUMENTS:y3,SETTINGS:b4,MENU:C3,DELETE:Bf,TRASH:Bf,EDIT:O3,ADD:B4,CLOSE:G4,CALENDAR:b3,CLOCK:j4,CHEVRON_LEFT:H4,CHEVRON_RIGHT:q4,REMOVE_CIRCLE:N3,BUILDING:V4,SHOPPING_CART:N4,EYE:n4,EYE_OFF:L3,DOWNLOAD:_4,UPLOAD:T4,INFO:m4,CAKE:h4,LESSON:Yf,SAVE:r4,CHECK:Q4,EXCLAMATION:Vf,INCOME:$f,BUSINESS_EXPENSE:qf,BRIEFCASE:qf,PERSONAL_EXPENSE:Gf,PROFIT:Uf,LOGOUT:S3,WALLET:e4,WARNING:Vf,ARROW_LEFT:d4,EXCLAMATION_CIRCLE:Ui,CAR:O4,BOLT:A4,BULLHORN:R3,TOOLS:Q3,SHIELD:K4,CALCULATOR:S4,HEART:X3,GRADUATION_CAP:o6,HOME:E4,PLANE:r6,MUSIC:J4,CAMERA:p4,GLOBE:F3,CREDIT_CARD:I4,MOBILE:k4,BOOK_OPEN:Yf,MONEY_BILL_WAVE:$f,USER:M3,USERS:zf,SEARCH:F4,BELL:Hf,LOADING:Y4,CHART_LINE:Uf,MESSAGE:Wf,LIST:T3,UTENSILS:Gf,ARCHIVE:D3,BOX_OPEN:q3,USER_MINUS:B3,USER_PLUS:Z4,PRINT:a6,FILE_INVOICE:s6,CALENDAR_CHECK:g4,CALENDAR_TIMES:c4,CHECK_CIRCLE:H3,TIMES_CIRCLE:n6,BAN:z3,UNDO:y4,REDO:i4,COPY:U4,PASTE:_3,CLIPBOARD:W3,CLIPBOARD_CHECK:t4,PHONE:o4,ID_CARD:D4,FOLDER:P3,ARROW_RIGHT:J3,RECEIPT:z4,FILE_CONTRACT:K3,INBOX:L4,PAPER_PLANE:e6,NOTIFICATION:Hf,EMAIL:Wf,LOCK:A3,LOGIN:U3,REFRESH:V3},l6=()=>{const{notification:e,hideNotification:t}=Xe();if(!e)return null;const n={info:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"}[e.type]||"bg-gray-500",s={info:T.INFO,success:T.CHECK,warning:T.WARNING,error:T.CLOSE}[e.type]||T.INFO;return r.jsxs("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white flex items-center space-x-3 z-50 max-w-xs ${n}`,role:"alert",children:[r.jsx(B,{path:s,className:"w-6 h-6"}),r.jsx("p",{className:"text-wrap",children:e.message}),r.jsx("button",{onClick:t,className:"ml-auto p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:r.jsx(B,{path:T.CLOSE,className:"w-5 h-5"})})]})},tt=({isOpen:e,onClose:t,title:n,children:s,titleRightContent:a,headerStyle:i})=>{const[o,l]=I.useState(!1);return I.useEffect(()=>{e?setTimeout(()=>l(!0),10):l(!1)},[e]),e?r.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,onClick:t,children:[r.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),r.jsxs("div",{className:`bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-all duration-300 ${o?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:c=>c.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 sticky top-0 z-10 rounded-t-lg text-white",style:{backgroundColor:"#3B82F6",...i},children:[typeof n=="string"?r.jsx("h3",{className:"text-xl font-bold",children:n}):r.jsx("div",{children:n}),r.jsxs("div",{className:"flex items-center space-x-4",children:[a,r.jsx("button",{onClick:t,className:"p-2 rounded-full text-white/70 hover:bg-white/20 transition-colors",children:r.jsx(B,{path:T.CLOSE,className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"p-6 overflow-y-auto",children:s})]})]}):null},Ge=I.forwardRef(({label:e,icon:t,...n},s)=>r.jsxs("div",{children:[e&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:s,...n,className:`block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${t?"pr-10":""}`}),t&&r.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:r.jsx(B,{path:t,className:"w-5 h-5 text-gray-400"})})]})]})),On=({label:e,children:t,...n})=>r.jsxs("div",{children:[e&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),r.jsx("select",{...n,className:"block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:t})]}),At=({title:e,children:t,titleRightContent:n})=>r.jsxs("fieldset",{className:"mt-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 pb-6",children:[r.jsx("legend",{className:"text-lg font-medium text-gray-900",children:e}),n]}),r.jsx("div",{className:"mt-4 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:t})]}),Ag=(e,t)=>{I.useEffect(()=>{const n=s=>{!e.current||e.current.contains(s.target)||t(s)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,t])},He=(e,t={})=>{const{format:n="long"}=t,s=new Date(e);if(n==="short"){const l=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0");return`${l}/${c}`}const a=s.getDate().toString().padStart(2,"0"),i=(s.getMonth()+1).toString().padStart(2,"0"),o=s.getFullYear();return`${a}/${i}/${o}`},pn=({label:e,value:t,onChange:n,name:s})=>{const[a,i]=I.useState(!1),o=_=>_&&typeof _.toDate=="function"?_.toDate():_ instanceof Date?_:typeof _=="string"&&_?new Date(_.replace(/-/g,"/")):new Date,[l,c]=I.useState(o(t)),d=I.useRef(null);Ag(d,()=>i(!1)),I.useEffect(()=>{c(o(t))},[t,a]);const u=["Mo","Tu","We","Th","Fr","Sa","Su"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],p=(_=>(new Date(_.getFullYear(),_.getMonth(),1).getDay()+6)%7)(l),v=new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),x=_=>{c(S=>new Date(S.getFullYear(),S.getMonth()+_,1))},b=_=>{const S=new Date(l.getFullYear(),l.getMonth(),_),k=S.getFullYear(),A=(S.getMonth()+1).toString().padStart(2,"0"),F=S.getDate().toString().padStart(2,"0"),R=`${k}-${A}-${F}`;n({target:{name:s,value:R}}),i(!1)};let g=null;if(t&&typeof t=="string"){const[_,S,k]=t.split("-").map(Number);g=new Date(_,S-1,k)}const f=new Date;f.setHours(0,0,0,0);const y=_=>{c(S=>new Date(_,S.getMonth(),1))},w=Array.from({length:100},(_,S)=>new Date().getFullYear()-S);return r.jsxs("div",{className:"relative",ref:d,children:[r.jsx(Ge,{label:e,value:t?He(t):"",readOnly:!0,onClick:()=>i(!a),icon:T.CALENDAR,className:"cursor-pointer"}),a&&r.jsxs("div",{className:"absolute z-20 mt-1 w-80 bg-white shadow-lg rounded-lg p-4 border border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{type:"button",onClick:()=>x(-1),className:"p-1 rounded-full hover:bg-gray-100",children:r.jsx(B,{path:T.CHEVRON_LEFT,className:"w-5 h-5"})}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:m[l.getMonth()]}),r.jsx("select",{onChange:_=>y(_.target.value),value:l.getFullYear(),className:"ml-2 p-1 border-gray-300 rounded-md",children:w.map(_=>r.jsx("option",{value:_,children:_},_))})]}),r.jsx("button",{type:"button",onClick:()=>x(1),className:"p-1 rounded-full hover:bg-gray-100",children:r.jsx(B,{path:T.CHEVRON_RIGHT,className:"w-5 h-5"})})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:[u.map(_=>r.jsx("div",{className:"font-medium text-gray-500",children:_},_)),Array.from({length:p}).map((_,S)=>r.jsx("div",{},`empty-${S}`)),Array.from({length:v}).map((_,S)=>{const k=S+1,A=new Date(l.getFullYear(),l.getMonth(),k),F=g&&A.getTime()===g.getTime(),R=A.getTime()===f.getTime();return r.jsx("div",{onClick:()=>b(k),className:`p-2 rounded-full cursor-pointer 
                                     ${F?"bg-blue-600 text-white":R?"bg-blue-200 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:k},k)})]})]})]})},Ga=e=>{if(!e)return e;let t=e.replace(/[^\d]/g,"");if(t.startsWith("0")&&(t=t.substring(1)),!t.startsWith("90")&&t.length>=10&&(t="90"+t),t.startsWith("90")&&t.length===12){const n=t.slice(0,2),s=t.slice(2,5),a=t.slice(5,8),i=t.slice(8,10),o=t.slice(10,12);return`+${n} (${s}) ${a} ${i} ${o}`}else if(t.length>0)return e;return""},Ig=6048e5,c6=864e5,Cu=6e4,Eu=36e5,Kf=Symbol.for("constructDateFrom");function Bt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Kf in e?e[Kf](t):e instanceof Date?new e.constructor(t):new Date(t)}function Qe(e,t){return Bt(t||e,e)}function d6(e,t,n){const s=Qe(e,n==null?void 0:n.in);return isNaN(t)?Bt((n==null?void 0:n.in)||e,NaN):(t&&s.setDate(s.getDate()+t),s)}function u6(e,t,n){const s=Qe(e,n==null?void 0:n.in);if(isNaN(t))return Bt((n==null?void 0:n.in)||e,NaN);if(!t)return s;const a=s.getDate(),i=Bt((n==null?void 0:n.in)||e,s.getTime());i.setMonth(s.getMonth()+t+1,0);const o=i.getDate();return a>=o?i:(s.setFullYear(i.getFullYear(),i.getMonth(),a),s)}let h6={};function Qo(){return h6}function Or(e,t){var l,c,d,u;const n=Qo(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Qe(e,t==null?void 0:t.in),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function vo(e,t){return Or(e,{...t,weekStartsOn:1})}function Og(e,t){const n=Qe(e,t==null?void 0:t.in),s=n.getFullYear(),a=Bt(n,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const i=vo(a),o=Bt(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const l=vo(o);return n.getTime()>=i.getTime()?s+1:n.getTime()>=l.getTime()?s:s-1}function Jf(e){const t=Qe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Xo(e,...t){const n=Bt.bind(null,e||t.find(s=>typeof s=="object"));return t.map(n)}function Zf(e,t){const n=Qe(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Lg(e,t,n){const[s,a]=Xo(n==null?void 0:n.in,e,t),i=Zf(s),o=Zf(a),l=+i-Jf(i),c=+o-Jf(o);return Math.round((l-c)/c6)}function f6(e,t){const n=Og(e,t),s=Bt((t==null?void 0:t.in)||e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),vo(s)}function m6(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function p6(e){return!(!m6(e)&&typeof e!="number"||isNaN(+Qe(e)))}function bo(e,t,n){const[s,a]=Xo(n==null?void 0:n.in,e,t),i=Qf(s,a),o=Math.abs(Lg(s,a));s.setDate(s.getDate()-i*o);const l=+(Qf(s,a)===-i),c=i*(o-l);return c===0?0:c}function Qf(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Tu(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function Xf(e,t,n){const[s,a]=Xo(n==null?void 0:n.in,e,t),i=(+s-+a)/Eu;return Tu(n==null?void 0:n.roundingMethod)(i)}function g6(e,t){return+Qe(e)-+Qe(t)}function em(e,t,n){const s=g6(e,t)/Cu;return Tu(n==null?void 0:n.roundingMethod)(s)}function js(e,t){const n=Qe(e,t==null?void 0:t.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function x6(e,t,n){const s=bo(e,t,n)/7;return Tu(n==null?void 0:n.roundingMethod)(s)}function Pg(e,t){const[n,s]=Xo(e,t.start,t.end);return{start:n,end:s}}function Br(e,t){const{start:n,end:s}=Pg(t==null?void 0:t.in,e);let a=+n>+s;const i=a?+n:+s,o=a?s:n;o.setHours(0,0,0,0);let l=(t==null?void 0:t.step)??1;if(!l)return[];l<0&&(l=-l,a=!a);const c=[];for(;+o<=i;)c.push(Bt(n,o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function y6(e,t){const{start:n,end:s}=Pg(t==null?void 0:t.in,e);let a=+n>+s;const i=a?+n:+s,o=a?s:n;o.setHours(0,0,0,0),o.setDate(1);let l=(t==null?void 0:t.step)??1;if(!l)return[];l<0&&(l=-l,a=!a);const c=[];for(;+o<=i;)c.push(Bt(n,o)),o.setMonth(o.getMonth()+l);return a?c.reverse():c}function Ss(e,t){const n=Qe(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function md(e,t){const n=Qe(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const v6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},b6=(e,t,n)=>{let s;const a=v6[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Hl(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const w6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},j6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},S6={date:Hl({formats:w6,defaultWidth:"full"}),time:Hl({formats:N6,defaultWidth:"full"}),dateTime:Hl({formats:j6,defaultWidth:"full"})},_6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k6=(e,t,n,s)=>_6[e];function ea(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const D6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},C6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},E6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},T6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},A6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},I6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},O6=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},L6={ordinalNumber:O6,era:ea({values:D6,defaultWidth:"wide"}),quarter:ea({values:C6,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ea({values:E6,defaultWidth:"wide"}),day:ea({values:T6,defaultWidth:"wide"}),dayPeriod:ea({values:A6,defaultWidth:"wide",formattingValues:I6,defaultFormattingWidth:"wide"})};function ta(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?M6(l,m=>m.test(o)):P6(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function P6(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function M6(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function R6(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const F6=/^(\d+)(th|st|nd|rd)?/i,z6=/\d+/i,$6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},U6={any:[/^b/i,/^(a|c)/i]},B6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},W6={any:[/1/i,/2/i,/3/i,/4/i]},G6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},H6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Y6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},V6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},K6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},J6={ordinalNumber:R6({matchPattern:F6,parsePattern:z6,valueCallback:e=>parseInt(e,10)}),era:ta({matchPatterns:$6,defaultMatchWidth:"wide",parsePatterns:U6,defaultParseWidth:"any"}),quarter:ta({matchPatterns:B6,defaultMatchWidth:"wide",parsePatterns:W6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ta({matchPatterns:G6,defaultMatchWidth:"wide",parsePatterns:H6,defaultParseWidth:"any"}),day:ta({matchPatterns:q6,defaultMatchWidth:"wide",parsePatterns:Y6,defaultParseWidth:"any"}),dayPeriod:ta({matchPatterns:V6,defaultMatchWidth:"any",parsePatterns:K6,defaultParseWidth:"any"})},Z6={code:"en-US",formatDistance:b6,formatLong:S6,formatRelative:k6,localize:L6,match:J6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Q6(e,t){const n=Qe(e,t==null?void 0:t.in);return Lg(n,md(n))+1}function X6(e,t){const n=Qe(e,t==null?void 0:t.in),s=+vo(n)-+f6(n);return Math.round(s/Ig)+1}function Mg(e,t){var u,m,h,p;const n=Qe(e,t==null?void 0:t.in),s=n.getFullYear(),a=Qo(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=Bt((t==null?void 0:t.in)||e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=Or(o,t),c=Bt((t==null?void 0:t.in)||e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=Or(c,t);return+n>=+l?s+1:+n>=+d?s:s-1}function eN(e,t){var l,c,d,u;const n=Qo(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=Mg(e,t),i=Bt((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Or(i,t)}function tN(e,t){const n=Qe(e,t==null?void 0:t.in),s=+Or(n,t)-+eN(n,t);return Math.round(s/Ig)+1}function Be(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const qn={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return Be(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Be(n+1,2)},d(e,t){return Be(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Be(e.getHours()%12||12,t.length)},H(e,t){return Be(e.getHours(),t.length)},m(e,t){return Be(e.getMinutes(),t.length)},s(e,t){return Be(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return Be(a,t.length)}},Xs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tm={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return qn.y(e,t)},Y:function(e,t,n,s){const a=Mg(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Be(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Be(i,t.length)},R:function(e,t){const n=Og(e);return Be(n,t.length)},u:function(e,t){const n=e.getFullYear();return Be(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Be(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Be(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return qn.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Be(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=tN(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Be(a,t.length)},I:function(e,t,n){const s=X6(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):Be(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):qn.d(e,t)},D:function(e,t,n){const s=Q6(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Be(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Be(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Be(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Be(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=Xs.noon:s===0?a=Xs.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=Xs.evening:s>=12?a=Xs.afternoon:s>=4?a=Xs.morning:a=Xs.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return qn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):qn.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Be(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):Be(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):qn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):qn.s(e,t)},S:function(e,t){return qn.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return sm(s);case"XXXX":case"XX":return Cs(s);case"XXXXX":case"XXX":default:return Cs(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return sm(s);case"xxxx":case"xx":return Cs(s);case"xxxxx":case"xxx":default:return Cs(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+nm(s,":");case"OOOO":default:return"GMT"+Cs(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+nm(s,":");case"zzzz":default:return"GMT"+Cs(s,":")}},t:function(e,t,n){const s=Math.trunc(+e/1e3);return Be(s,t.length)},T:function(e,t,n){return Be(+e,t.length)}};function nm(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?n+String(a):n+String(a)+t+Be(i,2)}function sm(e,t){return e%60===0?(e>0?"-":"+")+Be(Math.abs(e)/60,2):Cs(e,t)}function Cs(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Be(Math.trunc(s/60),2),i=Be(s%60,2);return n+a+t+i}const rm=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Rg=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},nN=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return rm(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",rm(s,t)).replace("{{time}}",Rg(a,t))},sN={p:Rg,P:nN},rN=/^D+$/,aN=/^Y+$/,iN=["D","DD","YY","YYYY"];function oN(e){return rN.test(e)}function lN(e){return aN.test(e)}function cN(e,t,n){const s=dN(e,t,n);if(console.warn(s),iN.includes(e))throw new RangeError(s)}function dN(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const uN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fN=/^'([^]*?)'?$/,mN=/''/g,pN=/[a-zA-Z]/;function Ke(e,t,n){var u,m,h,p,v,x,b,g;const s=Qo(),a=(n==null?void 0:n.locale)??s.locale??Z6,i=(n==null?void 0:n.firstWeekContainsDate)??((m=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((x=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??s.weekStartsOn??((g=(b=s.locale)==null?void 0:b.options)==null?void 0:g.weekStartsOn)??0,l=Qe(e,n==null?void 0:n.in);if(!p6(l))throw new RangeError("Invalid time value");let c=t.match(hN).map(f=>{const y=f[0];if(y==="p"||y==="P"){const w=sN[y];return w(f,a.formatLong)}return f}).join("").match(uN).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const y=f[0];if(y==="'")return{isToken:!1,value:gN(f)};if(tm[y])return{isToken:!0,value:f};if(y.match(pN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(f=>{if(!f.isToken)return f.value;const y=f.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&lN(y)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&oN(y))&&cN(y,t,String(e));const w=tm[y[0]];return w(l,y,a.localize,d)}).join("")}function gN(e){const t=e.match(fN);return t?t[1].replace(mN,"'"):e}function Wr(e,t){return Qe(e,t==null?void 0:t.in).getDay()}function am(e,t){return+Qe(e)>+Qe(t)}function xN(e,t){return+Qe(e)<+Qe(t)}function yN(e){return+Qe(e)<Date.now()}function ps(e,t){const n=()=>Bt(t==null?void 0:t.in,NaN),s=(t==null?void 0:t.additionalDigits)??2,a=NN(e);let i;if(a.date){const d=jN(a.date,s);i=SN(d.restDateString,d.year)}if(!i||isNaN(+i))return n();const o=+i;let l=0,c;if(a.time&&(l=_N(a.time),isNaN(l)))return n();if(a.timezone){if(c=kN(a.timezone),isNaN(c))return n()}else{const d=new Date(o+l),u=Qe(0,t==null?void 0:t.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return Qe(o+l+c,t==null?void 0:t.in)}const Si={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},vN=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,bN=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wN=/^([+-])(\d{2})(?::?(\d{2}))?$/;function NN(e){const t={},n=e.split(Si.dateTimeDelimiter);let s;if(n.length>2)return t;if(/:/.test(n[0])?s=n[0]:(t.date=n[0],s=n[1],Si.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Si.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=Si.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function jN(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function SN(e,t){if(t===null)return new Date(NaN);const n=e.match(vN);if(!n)return new Date(NaN);const s=!!n[4],a=na(n[1]),i=na(n[2])-1,o=na(n[3]),l=na(n[4]),c=na(n[5])-1;if(s)return AN(t,l,c)?DN(t,l,c):new Date(NaN);{const d=new Date(0);return!EN(t,i,o)||!TN(t,a)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(a,o)),d)}}function na(e){return e?parseInt(e):1}function _N(e){const t=e.match(bN);if(!t)return NaN;const n=ql(t[1]),s=ql(t[2]),a=ql(t[3]);return IN(n,s,a)?n*Eu+s*Cu+a*1e3:NaN}function ql(e){return e&&parseFloat(e.replace(",","."))||0}function kN(e){if(e==="Z")return 0;const t=e.match(wN);if(!t)return 0;const n=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return ON(s,a)?n*(s*Eu+a*Cu):NaN}function DN(e,t,n){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,i=(t-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+i),s}const CN=[31,null,31,30,31,30,31,31,30,31,30,31];function Fg(e){return e%400===0||e%4===0&&e%100!==0}function EN(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(CN[t]||(Fg(e)?29:28))}function TN(e,t){return t>=1&&t<=(Fg(e)?366:365)}function AN(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function IN(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function ON(e,t){return t>=0&&t<=59}function da(e,t,n){return u6(e,-t,n)}const el={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6,Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},wo=(e,t,n)=>{if(!e||!t||!n||n.length===0)return 0;try{const s=ps(e),a=ps(t);if(s>a)return 0;const i=n.map(l=>el[l]).filter(l=>l!==void 0);return i.length===0?0:Br({start:s,end:a}).filter(l=>i.includes(Wr(l))).length}catch(s){return console.error("Error calculating lessons:",s),0}},_i=(e,t,n,s="monthly",a=[])=>{if(e<=0||!t||!n||!a||a.length===0)return[];try{const i=ps(t),o=ps(n);if(i>o)return[];const l=a.map(c=>el[c]).filter(c=>c!==void 0);if(l.length===0)return[];switch(s){case"daily":return LN(e,i,o,l);case"weekly":return PN(e,i,o,l);case"monthly":return im(e,i,o,l);default:return im(e,i,o,l)}}catch(i){return console.error("Error generating installments:",i),[]}},LN=(e,t,n,s)=>Br({start:t,end:n}).filter(o=>s.includes(Wr(o))).map((o,l)=>({number:l+1,amount:e,dueDate:Ke(o,"yyyy-MM-dd"),status:"Unpaid",frequency:"daily"})),PN=(e,t,n,s)=>{const i=Br({start:t,end:n}).filter(d=>s.includes(Wr(d))),o=new Map;i.forEach(d=>{const u=Ke(Or(d,{weekStartsOn:1}),"yyyy-MM-dd");o.has(u)||o.set(u,[]),o.get(u).push(d)});const l=[];let c=1;for(const[d,u]of o){const m=u[u.length-1],h=u.length*e;l.push({number:c,amount:h,dueDate:Ke(m,"yyyy-MM-dd"),status:"Unpaid",frequency:"weekly"}),c++}return l},im=(e,t,n,s)=>{const i=Br({start:t,end:n}).filter(d=>s.includes(Wr(d))),o=new Map;i.forEach(d=>{const m=Math.floor(x6(d,t)/4).toString();o.has(m)||o.set(m,[]),o.get(m).push(d)});const l=[];let c=1;for(const[d,u]of o){if(u.length===0)continue;const m=u[u.length-1],h=u.length*e;l.push({number:c,amount:h,dueDate:Ke(m,"yyyy-MM-dd"),status:"Unpaid",frequency:"monthly"}),c++}return l},No=(e,t,n,s="09:00",a="10:00")=>{if(!e||!e.schedule||!e.schedule.days||e.schedule.days.length===0)return console.warn("Group missing schedule details:",e==null?void 0:e.groupName,e==null?void 0:e.schedule),[];try{const i=ps(t),o=ps(n);if(i>o)return console.warn("Invalid date range for group:",e.groupName,"start:",t,"end:",n),[];const l=e.schedule.days.map(u=>el[u]).filter(u=>u!==void 0);if(l.length===0)return console.warn("No valid scheduled days found for group:",e.groupName,e.schedule.days),[];const d=Br({start:i,end:o}).filter(u=>l.includes(Wr(u)));return console.log(`Generating lessons for ${e.groupName}:`,{scheduleDays:e.schedule.days,startDate:t,endDate:n,lessonDaysCount:d.length,expectedCount:wo(t,n,e.schedule.days)}),d.map((u,m)=>({groupId:e.id,lessonDate:Ke(u,"yyyy-MM-dd"),topic:`Lesson ${m+1}`,startTime:e.schedule.startTime||s,endTime:e.schedule.endTime||a,status:"Incomplete",attendance:{}}))}catch(i){return console.error("Error generating group lessons:",i),[]}},om=(e,t,n,s="09:00",a="10:00")=>{if(!e||!e.tutoringDetails||!e.tutoringDetails.schedule||!e.tutoringDetails.schedule.days||e.tutoringDetails.schedule.days.length===0)return console.warn("Tutoring student missing schedule details:",e==null?void 0:e.fullName,e==null?void 0:e.tutoringDetails),[];try{const i=ps(t),o=ps(n);if(i>o)return[];const l=e.tutoringDetails.schedule.days.map(v=>el[v]).filter(v=>v!==void 0);if(l.length===0)return console.warn("No valid scheduled days found for student:",e.fullName,e.tutoringDetails.schedule.days),[];const c=e.tutoringDetails.numberOfLessons||0;if(c<=0)return console.warn("No lessons planned for student:",e.fullName),[];const m=Br({start:i,end:o}).filter(v=>l.includes(Wr(v))).slice(0,c),h=e.tutoringDetails.schedule.startTime||s,p=e.tutoringDetails.schedule.endTime||a;return console.log(`Generating lessons for ${e.fullName}:`,{scheduleDays:e.tutoringDetails.schedule.days,scheduleStartTime:h,scheduleEndTime:p,totalPlannedLessons:c,lessonDaysCount:m.length}),m.map((v,x)=>({studentId:e.id,lessonDate:Ke(v,"yyyy-MM-dd"),topic:`Tutoring Session ${x+1}`,startTime:h,endTime:p,status:"Incomplete",attendance:{}}))}catch(i){return console.error("Error generating tutoring lessons:",i),[]}},$n=({label:e,value:t,onChange:n,name:s,options:a})=>{const[i,o]=I.useState(!1),[l,c]=I.useState(!1),d=I.useRef(null),u=I.useRef(null),m=a||(()=>{const p=[];for(let v=8;v<=23;v++)for(let x=0;x<60;x+=30)v===8&&x===0||p.push(`${v.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`);return p})();Ag(d,()=>o(!1)),I.useEffect(()=>{if(i&&u.current){const p=u.current.getBoundingClientRect(),v=window.innerHeight-p.bottom,x=p.top;v<250&&x>250?c(!0):c(!1)}},[i]);const h=p=>{n({target:{name:s,value:p}}),o(!1)};return r.jsxs("div",{className:"relative",ref:d,children:[r.jsx(Ge,{label:e,value:t||"",placeholder:"Select Time",readOnly:!0,onClick:()=>o(!i),className:"cursor-pointer",ref:u}),i&&r.jsx("div",{className:`absolute z-10 w-full bg-white shadow-lg rounded-md max-h-60 overflow-auto border border-gray-200 ${l?"bottom-full mb-2":"top-full mt-2"}`,children:r.jsx("ul",{className:"py-1",children:m.map(p=>r.jsx("li",{onClick:()=>h(p),className:"px-3 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white cursor-pointer",children:p},p))})})]})},Au=({isOpen:e,onClose:t,studentToEdit:n})=>{var Q,E,q,N,Z;const{showNotification:s}=Xe(),{fetchData:a,settings:i}=I.useContext(gu),[o,l]=I.useState([]),[c,d]=I.useState({nationalId:null,agreement:null}),u=I.useMemo(()=>i&&i.pricePerLesson?parseFloat(i.pricePerLesson):800,[i]);I.useEffect(()=>{e&&(async()=>{try{const H=await ve.getAll("groups");if(l(H),n&&n.groupId){const K=H.find(D=>D.id===n.groupId);K&&K.isArchived&&s("Warning: This student is currently assigned to an archived group. Please reassign to an active group.","warning")}}catch(H){console.error("Error fetching groups:",H)}})()},[e,n,s]);const m=I.useCallback(()=>{const Y=O=>{if(!O)return"";try{return new Date(O).toISOString().split("T")[0]}catch{return""}},H=(O,z)=>{if(typeof O=="string")try{return JSON.parse(O)}catch{return z}return O||z},K=H(n==null?void 0:n.tutoringDetails,{}),D={pricePerLesson:K.pricePerLesson||u,totalCalculatedFee:K.totalCalculatedFee||0,numberOfLessons:K.numberOfLessons||0,endDate:K.endDate||"",schedule:{days:[],...K.schedule},installmentFrequency:K.installmentFrequency||"monthly"};return n?{fullName:(n==null?void 0:n.fullName)||"",studentContact:(n==null?void 0:n.studentContact)||"",parentName:(n==null?void 0:n.parentName)||"",parentContact:(n==null?void 0:n.parentContact)||"",nationalId:(n==null?void 0:n.nationalId)||"",enrollmentDate:Y(n==null?void 0:n.enrollmentDate)||new Date().toISOString().split("T")[0],birthDate:Y(n==null?void 0:n.birthDate)||"",isTutoring:(n==null?void 0:n.isTutoring)||!1,groupId:(n==null?void 0:n.groupId)||null,color:(n==null?void 0:n.color)||"#3B82F6",documents:H(n==null?void 0:n.documents,{nationalIdUrl:"",agreementUrl:""}),documentNames:H(n==null?void 0:n.documentNames,{nationalId:"",agreement:""}),feeDetails:H(n==null?void 0:n.feeDetails,{totalFee:"12000",numberOfInstallments:"3"}),tutoringDetails:D,installments:H(n==null?void 0:n.installments,[])}:{fullName:"",studentContact:"",parentName:"",parentContact:"",nationalId:"",enrollmentDate:new Date().toISOString().split("T")[0],birthDate:"",isTutoring:!1,groupId:null,color:"#3B82F6",documents:{nationalIdUrl:"",agreementUrl:""},documentNames:{nationalId:"",agreement:""},feeDetails:{totalFee:"12000",numberOfInstallments:"3"},tutoringDetails:D,installments:[]}},[n,u]),[h,p]=I.useState(m()),[v,x]=I.useState(!1),[b,g]=I.useState("");I.useEffect(()=>{e&&(p(m()),d({nationalId:null,agreement:null}))},[e,m]),I.useEffect(()=>{if(h.isTutoring){const{schedule:Y,endDate:H,pricePerLesson:K}=h.tutoringDetails,{enrollmentDate:D}=h,O=wo(D,H,Y.days),z=O*(parseFloat(K)||0);p(L=>({...L,tutoringDetails:{...L.tutoringDetails,numberOfLessons:O,totalCalculatedFee:z}}))}},[h.isTutoring,h.enrollmentDate,h.tutoringDetails.endDate,h.tutoringDetails.schedule.days,h.tutoringDetails.pricePerLesson]);const f=Y=>{const{name:H,value:K,type:D,checked:O}=Y.target;p(H==="studentContact"||H==="parentContact"?z=>({...z,[H]:Ga(K)}):H==="isTutoring"?z=>({...z,[H]:O}):z=>({...z,[H]:K}))},y=Y=>{const{name:H,value:K}=Y.target;p(D=>({...D,feeDetails:{...D.feeDetails,[H]:K}}))},w=Y=>{const{name:H,value:K}=Y.target;p(D=>({...D,tutoringDetails:{...D.tutoringDetails,[H]:K}}))},_=Y=>{const{name:H,value:K}=Y.target;p(D=>({...D,tutoringDetails:{...D.tutoringDetails,schedule:{...D.tutoringDetails.schedule,[H]:K}}}))},S=Y=>{const H=h.tutoringDetails.schedule.days,K=H.includes(Y)?H.filter(D=>D!==Y):[...H,Y];p(D=>({...D,tutoringDetails:{...D.tutoringDetails,schedule:{...D.tutoringDetails.schedule,days:K}}}))},k=(Y,H)=>{const K=Y.target.files;K&&K.length>0&&d(D=>({...D,[H]:K[0]}))},A=async(Y,H)=>{try{const{error:K}=await Pe.storage.from("udms").upload(H,Y);if(K)throw K;const{data:D}=Pe.storage.from("udms").getPublicUrl(H);return D.publicUrl}catch(K){throw K}},F=(Y,H,K)=>{const D=Gp(Y),O=K.split(".").pop().toLowerCase();switch(H){case"nationalId":return`${D}_National_ID.${O}`;case"agreement":return`${D}_Agreement.${O}`;default:return`${D}_${H}.${O}`}},R=async Y=>{Y.preventDefault(),x(!0),g("Validating form data...");try{if(!h.fullName.trim()){s("Full name is required.","error"),x(!1),g("");return}if(!h.studentContact.trim()){s("Phone number is required.","error"),x(!1),g("");return}if(!h.nationalId.trim()){s("National ID is required.","error"),x(!1),g("");return}if(c.nationalId&&c.nationalId.size>10*1024*1024){s("National ID file size must be less than 10MB.","error"),x(!1),g("");return}if(c.agreement&&c.agreement.size>10*1024*1024){s("Agreement file size must be less than 10MB.","error"),x(!1),g("");return}let H="",K="";const D=[];if(c.nationalId){const C=F(h.fullName,"nationalId",c.nationalId.name),W=`students/${Date.now()}_${C}`;D.push(A(c.nationalId,W).then(ie=>({type:"nationalId",url:ie})))}if(c.agreement){const C=F(h.fullName,"agreement",c.agreement.name),W=`students/${Date.now()}_${C}`;D.push(A(c.agreement,W).then(ie=>({type:"agreement",url:ie})))}D.length>0&&(g(`Uploading ${D.length} file${D.length>1?"s":""}...`),(await Promise.all(D)).forEach(V=>{V.type==="nationalId"?H=V.url:V.type==="agreement"&&(K=V.url)})),g("Saving student data...");let O=h.installments,z=h.feeDetails;if(!h.isTutoring&&h.feeDetails.totalFee&&h.feeDetails.numberOfInstallments)if(n&&h.installments&&h.installments.length>0)O=h.installments;else{const C=parseFloat(h.feeDetails.totalFee),V=parseInt(h.feeDetails.numberOfInstallments),W=C/V;O=Array.from({length:V},(ie,he)=>{const ye=new Date(h.enrollmentDate);return ye.setMonth(ye.getMonth()+he),{number:he+1,amount:W,dueDate:ye.toISOString().split("T")[0],status:"Unpaid",paidDate:null}})}else if(h.isTutoring){const C=_i(parseFloat(h.tutoringDetails.pricePerLesson),h.enrollmentDate,h.tutoringDetails.endDate,h.tutoringDetails.installmentFrequency,h.tutoringDetails.schedule.days);O=C,z={totalFee:h.tutoringDetails.totalCalculatedFee.toString(),numberOfInstallments:C.length.toString()}}const L={...h,enrollmentDate:h.enrollmentDate||null,birthDate:h.birthDate||null,feeDetails:JSON.stringify(z),installments:JSON.stringify(O),documents:JSON.stringify({nationalIdUrl:H,agreementUrl:K}),documentNames:JSON.stringify({nationalId:c.nationalId?F(h.fullName,"nationalId",c.nationalId.name):"",agreement:c.agreement?F(h.fullName,"agreement",c.agreement.name):""})};if(n)await ve.update("students",n.id,L),s("Student updated successfully!","success"),t();else{const C=await ve.create("students",L);s("Student enrolled successfully!","success"),t()}a()}catch(H){console.error("File upload error details:",H),console.error("Error message:",H.message),console.error("Error code:",H.code),s(`Enrollment failed: ${H.message}`,"error")}finally{x(!1),g("")}};return r.jsx(tt,{isOpen:e,onClose:t,title:n?"Edit Student":"Enroll New Student",headerStyle:{backgroundColor:"#4F46E5"},children:r.jsxs("form",{onSubmit:R,children:[r.jsxs(At,{title:"General Information",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Full Name",name:"fullName",value:h.fullName,onChange:f,required:!0})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"National ID",name:"nationalId",value:h.nationalId,onChange:f,required:!0})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Student Contact",name:"studentContact",type:"tel",value:h.studentContact,onChange:f,required:!0})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Parent Name (Optional)",name:"parentName",value:h.parentName,onChange:f})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Parent Contact (Optional)",name:"parentContact",type:"tel",value:h.parentContact,onChange:f})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(pn,{label:"Enrollment Date",name:"enrollmentDate",value:h.enrollmentDate,onChange:f})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(pn,{label:"Birth Date (Optional)",name:"birthDate",value:h.birthDate,onChange:f})}),r.jsxs("div",{className:"sm:col-span-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Color"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"color",name:"color",value:h.color,onChange:f,className:"w-12 h-12 rounded-xl border-2 border-gray-200 cursor-pointer shadow-sm hover:shadow-md transition-shadow duration-200",title:"Choose student color"}),r.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-white shadow-inner pointer-events-none",style:{backgroundColor:h.color}})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:h.color}}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.color.toUpperCase()})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"For calendar and dashboard display"})]})]})]}),r.jsx("div",{className:"sm:col-span-6 flex items-center justify-end pt-5",children:r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",name:"isTutoring",checked:h.isTutoring,onChange:f,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),r.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900",children:"Is Tutoring Student?"})]})})]}),h.isTutoring?r.jsxs(At,{title:"Tutoring Details",children:[r.jsx("div",{className:"sm:col-span-3",children:r.jsx(pn,{label:"End Date",name:"endDate",value:h.tutoringDetails.endDate,onChange:w})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Price Per Lesson ()",name:"pricePerLesson",type:"number",value:h.tutoringDetails.pricePerLesson,onChange:w})}),r.jsxs("div",{className:"sm:col-span-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recurring Schedule"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>r.jsx("button",{type:"button",onClick:()=>S(Y),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${h.tutoringDetails.schedule.days.includes(Y)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:Y},Y))}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx($n,{label:"Start Time",name:"startTime",value:h.tutoringDetails.schedule.startTime,onChange:_}),r.jsx($n,{label:"End Time",name:"endTime",value:h.tutoringDetails.schedule.endTime,onChange:_})]})]}),r.jsxs("div",{className:"sm:col-span-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Installment Frequency"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("label",{className:`flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${h.tutoringDetails.installmentFrequency==="daily"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"installmentFrequency",value:"daily",checked:h.tutoringDetails.installmentFrequency==="daily",onChange:w,className:"sr-only"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-medium",children:"Daily"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Every day"})]})]}),r.jsxs("label",{className:`flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${h.tutoringDetails.installmentFrequency==="weekly"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"installmentFrequency",value:"weekly",checked:h.tutoringDetails.installmentFrequency==="weekly",onChange:w,className:"sr-only"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-medium",children:"Weekly"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Every week"})]})]}),r.jsxs("label",{className:`flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${h.tutoringDetails.installmentFrequency==="monthly"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"installmentFrequency",value:"monthly",checked:h.tutoringDetails.installmentFrequency==="monthly",onChange:w,className:"sr-only"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-medium",children:"Monthly"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Every month"})]})]})]})]}),r.jsx("div",{className:"sm:col-span-6 mt-6",children:r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-lg font-bold text-gray-800 flex items-center",children:[r.jsx(B,{path:T.CALCULATOR,className:"w-5 h-5 mr-2 text-blue-600"}),"Calculated Plan"]}),r.jsx("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"Auto-calculated"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsx("div",{className:"bg-white rounded-lg p-3 border border-blue-100 shadow-sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Total Lessons"}),r.jsx("p",{className:"text-lg font-bold text-blue-600",children:h.tutoringDetails.numberOfLessons})]})}),r.jsx("div",{className:"bg-white rounded-lg p-3 border border-green-100 shadow-sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Total Fee"}),r.jsxs("p",{className:"text-lg font-bold text-green-600",children:[Math.round(h.tutoringDetails.totalCalculatedFee||0)," "]})]})}),r.jsx("div",{className:"bg-white rounded-lg p-3 border border-purple-100 shadow-sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Per Lesson"}),r.jsxs("p",{className:"text-lg font-bold text-purple-600",children:[Math.round(parseFloat(h.tutoringDetails.pricePerLesson||0))," "]})]})}),r.jsx("div",{className:"bg-white rounded-lg p-3 border border-orange-100 shadow-sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Weekly"}),r.jsxs("p",{className:"text-lg font-bold text-orange-600",children:[h.tutoringDetails.schedule.days.length," days"]})]})})]}),h.tutoringDetails.schedule.days.length>0&&h.tutoringDetails.pricePerLesson>0&&r.jsx("div",{className:"bg-white rounded-lg p-3 border border-indigo-100 shadow-sm mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Installment Plan"}),r.jsxs("p",{className:"text-base font-bold text-indigo-600 capitalize mb-2",children:[h.tutoringDetails.installmentFrequency," Payments"]}),r.jsx("p",{className:"text-xs text-gray-600",children:(()=>{var K,D;const Y=_i(parseFloat(h.tutoringDetails.pricePerLesson),h.enrollmentDate,h.tutoringDetails.endDate,h.tutoringDetails.installmentFrequency,h.tutoringDetails.schedule.days),H=h.tutoringDetails.installmentFrequency==="weekly"?`every ${new Date((K=Y[0])==null?void 0:K.dueDate).toLocaleDateString("en-GB",{weekday:"long"})}`:h.tutoringDetails.installmentFrequency;return`${Y.length} installments of ${Math.round(((D=Y[0])==null?void 0:D.amount)||0)}  ${H}`})()})]})}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[r.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[r.jsx(B,{path:T.INFO,className:"w-4 h-4 mr-2 text-gray-500"}),"Calculation Breakdown"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center py-1",children:[r.jsx("span",{className:"text-gray-600",children:"Enrollment Date:"}),r.jsx("span",{className:"font-medium text-gray-800",children:h.enrollmentDate?new Date(h.enrollmentDate).toLocaleDateString("en-GB"):"Not set"})]}),r.jsxs("div",{className:"flex justify-between items-center py-1",children:[r.jsx("span",{className:"text-gray-600",children:"End Date:"}),r.jsx("span",{className:"font-medium text-gray-800",children:h.tutoringDetails.endDate?new Date(h.tutoringDetails.endDate).toLocaleDateString("en-GB"):"Not set"})]}),r.jsxs("div",{className:"flex justify-between items-center py-1",children:[r.jsx("span",{className:"text-gray-600",children:"Schedule:"}),r.jsx("span",{className:"font-medium text-gray-800",children:h.tutoringDetails.schedule.days.length>0?`${h.tutoringDetails.schedule.days.join(", ")} (${h.tutoringDetails.schedule.startTime||"09:00"} - ${h.tutoringDetails.schedule.endTime||"10:00"})`:"No days selected"})]}),r.jsxs("div",{className:"flex justify-between items-center py-1",children:[r.jsx("span",{className:"text-gray-600",children:"Duration:"}),r.jsx("span",{className:"font-medium text-gray-800",children:h.enrollmentDate&&h.tutoringDetails.endDate?`${Math.ceil((new Date(h.tutoringDetails.endDate)-new Date(h.enrollmentDate))/(1e3*60*60*24*7))} weeks`:"Not calculated"})]})]})]}),h.tutoringDetails.schedule.days.length>0&&h.tutoringDetails.pricePerLesson>0&&r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[r.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[r.jsx(B,{path:T.CREDIT_CARD,className:"w-4 h-4 mr-2 text-green-600"}),h.tutoringDetails.installmentFrequency.charAt(0).toUpperCase()+h.tutoringDetails.installmentFrequency.slice(1)," Installment Preview"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:(()=>_i(parseFloat(h.tutoringDetails.pricePerLesson),h.enrollmentDate,h.tutoringDetails.endDate,h.tutoringDetails.installmentFrequency,h.tutoringDetails.schedule.days).slice(0,6).map((H,K)=>r.jsxs("div",{className:"bg-white rounded-md p-3 border border-green-100",children:[r.jsx("div",{className:"text-xs text-gray-500 capitalize",children:h.tutoringDetails.installmentFrequency==="weekly"?`${new Date(H.dueDate).toLocaleDateString("en-GB",{weekday:"short"})} ${H.number}`:`${h.tutoringDetails.installmentFrequency} ${H.number}`}),r.jsxs("div",{className:"text-sm font-semibold text-green-700",children:[Math.round(H.amount)," "]}),r.jsx("div",{className:"text-xs text-gray-400",children:new Date(H.dueDate).toLocaleDateString("en-GB")})]},K)))()}),(()=>{const Y=_i(parseFloat(h.tutoringDetails.pricePerLesson),h.enrollmentDate,h.tutoringDetails.endDate,h.tutoringDetails.installmentFrequency,h.tutoringDetails.schedule.days).length;if(Y>6)return r.jsxs("div",{className:"text-xs text-gray-500 mt-2 text-center",children:["+",Y-6," more ",h.tutoringDetails.installmentFrequency," installments"]})})()]}),r.jsxs("div",{className:"mt-4 space-y-2",children:[!h.tutoringDetails.endDate&&r.jsxs("div",{className:"flex items-center text-amber-600 bg-amber-50 rounded-md p-3",children:[r.jsx(B,{path:T.WARNING,className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"text-sm",children:"Please set an end date to calculate the plan"})]}),h.tutoringDetails.schedule.days.length===0&&r.jsxs("div",{className:"flex items-center text-amber-600 bg-amber-50 rounded-md p-3",children:[r.jsx(B,{path:T.WARNING,className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"text-sm",children:"Please select at least one day for the schedule"})]}),h.tutoringDetails.pricePerLesson<=0&&r.jsxs("div",{className:"flex items-center text-amber-600 bg-amber-50 rounded-md p-3",children:[r.jsx(B,{path:T.WARNING,className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"text-sm",children:"Please set a price per lesson"})]}),h.tutoringDetails.numberOfLessons>0&&h.tutoringDetails.totalCalculatedFee>0&&r.jsxs("div",{className:"flex items-center text-green-600 bg-green-50 rounded-md p-3",children:[r.jsx(B,{path:T.CHECK,className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"text-sm",children:"Plan calculated successfully! Ready to enroll."})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs(At,{title:"Group & Financial Details",children:[r.jsxs("div",{className:"sm:col-span-6",children:[r.jsxs(On,{label:"Assign to Group",name:"groupId",value:h.groupId||"",onChange:f,children:[r.jsx("option",{value:"",children:"Select a group"}),o.filter(Y=>!Y.isArchived).map(Y=>r.jsx("option",{value:Y.id,children:Y.groupName},Y.id))]}),o.filter(Y=>!Y.isArchived).length===0&&r.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"No active groups available. Please create a group first."}),n&&n.groupId&&((Q=o.find(Y=>Y.id===n.groupId))==null?void 0:Q.isArchived)&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:" This student is currently assigned to an archived group. Please select an active group above."})]}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Total Fee ()",name:"totalFee",type:"number",value:h.feeDetails.totalFee,onChange:y})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Number of Installments",name:"numberOfInstallments",type:"number",value:h.feeDetails.numberOfInstallments,onChange:y})})]}),r.jsxs(At,{title:"Document Uploads",children:[r.jsxs("div",{className:"sm:col-span-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"National ID"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:r.jsxs("div",{className:"space-y-1 text-center w-full",children:[r.jsx(B,{path:T.UPLOAD,className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[r.jsxs("label",{htmlFor:"nationalId",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none",children:[r.jsx("span",{children:c.nationalId?c.nationalId.name:((E=h.documentNames)==null?void 0:E.nationalId)||"Upload a file"}),r.jsx("input",{id:"nationalId",name:"nationalId",type:"file",className:"sr-only",onChange:Y=>k(Y,"nationalId")})]}),!c.nationalId&&!((q=h.documentNames)!=null&&q.nationalId)&&r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})})]}),r.jsxs("div",{className:"sm:col-span-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agreement"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:r.jsxs("div",{className:"space-y-1 text-center w-full",children:[r.jsx(B,{path:T.UPLOAD,className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[r.jsxs("label",{htmlFor:"agreement",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none",children:[r.jsx("span",{children:c.agreement?c.agreement.name:((N=h.documentNames)==null?void 0:N.agreement)||"Upload a file"}),r.jsx("input",{id:"agreement",name:"agreement",type:"file",className:"sr-only",onChange:Y=>k(Y,"agreement")})]}),!c.agreement&&!((Z=h.documentNames)!=null&&Z.agreement)&&r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})})]})]})]}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:v,className:"px-6 py-2 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[v&&r.jsx(B,{path:T.LOADING,className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:v?b||"Saving...":n?"Save Changes":"Enroll Student"})]})]})]})})},nn=({isOpen:e,onClose:t,onConfirm:n,title:s,message:a,confirmText:i="Confirm",confirmStyle:o="bg-red-600 hover:bg-red-700",disabled:l=!1})=>e?r.jsxs(tt,{isOpen:e,onClose:t,title:s,headerStyle:{backgroundColor:"#DC2626"},children:[r.jsx("p",{className:"text-gray-700 mb-6",children:a}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:t,disabled:l,className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsx("button",{onClick:n,disabled:l,className:`px-4 py-2 rounded-lg text-white ${o} disabled:opacity-50 disabled:cursor-not-allowed`,children:i})]})]}):null,Iu=({isOpen:e,onClose:t,group:n,lessonToEdit:s,student:a,onLessonSaved:i})=>{const{fetchData:o,lessons:l,events:c}=at(),{showNotification:d}=Xe(),u=[];for(let E=8;E<=23;E++)u.push(`${E.toString().padStart(2,"0")}:00`),E<23&&u.push(`${E.toString().padStart(2,"0")}:30`);const[m,h]=I.useState({date:"",topic:"",startTime:"",endTime:"",materialUrl:"",materialName:""}),[p,v]=I.useState(null),[x,b]=I.useState(!1),[g,f]=I.useState([]),[y,w]=I.useState([]);I.useEffect(()=>{var E;if(s)h({date:new Date(s.lessonDate).toISOString().split("T")[0],topic:s.topic,startTime:s.originalStartTime||s.startTime||"09:00",endTime:s.originalEndTime||s.endTime||"10:00",materialUrl:s.materialUrl||"",materialName:s.materialName||""});else{const q=((E=a==null?void 0:a.tutoringDetails)==null?void 0:E.schedule)||(n==null?void 0:n.schedule);h({date:new Date().toISOString().split("T")[0],topic:"",startTime:(q==null?void 0:q.startTime)||"09:00",endTime:(q==null?void 0:q.endTime)||"10:00",materialUrl:"",materialName:""})}},[s,e,n,a]),I.useEffect(()=>{},[l,c]);const _=E=>{E.target.files[0]&&v(E.target.files[0])},S=async(E,q)=>{try{const{data:N,error:Z}=await Pe.storage.from("udms").upload(q,E);if(Z)throw Z;return Pe.storage.from("udms").getPublicUrl(q).data.publicUrl}catch(N){throw console.error("File upload failed:",N),N}},k=(E,q,N,Z)=>{const Y=E.replace(/[^a-zA-Z\s]/g,"").trim().replace(/\s+/g,"_"),H=q.replace(/[^a-zA-Z\s]/g,"").trim().replace(/\s+/g,"_"),K=Z.split(".").pop().toLowerCase(),D=N?`_${N.replace(/-/g,"")}`:"";return`${Y}_${H}${D}_Material.${K}`},A=(E,q,N=null)=>{const Z=[];return l.forEach(Y=>{if(N&&Y.id===N)return;const H=new Date(`${Y.lessonDate}T${Y.startTime||"09:00"}:00`),K=new Date(`${Y.lessonDate}T${Y.endTime||"10:00"}:00`);E<K&&q>H&&Z.push({...Y,type:"lesson",displayName:Y.topic,category:"lesson",startTime:Y.startTime,endTime:Y.endTime})}),c.forEach(Y=>{const H=new Date(Y.startTime),K=new Date(Y.endTime),D=new Date(E),O=new Date(H);D.toDateString()===O.toDateString()&&E<K&&q>H&&Z.push({...Y,type:"event",displayName:Y.eventName,category:Y.category})}),Z},F=(E,q)=>{w(N=>q?[...N,E]:N.filter(Z=>Z!==E))},R=async()=>{const E=g.filter(q=>y.includes(q.id));for(const q of E)try{q.type==="event"?await ve.delete("events",q.id):q.type==="lesson"&&await ve.delete("lessons",q.id)}catch(N){console.error(`Error deleting ${q.type}:`,N),d(`Failed to delete ${q.type}.`,"error")}d(`Successfully deleted ${E.length} conflicting item(s).`,"success"),o(),f([]),w([])},Q=async E=>{if(E.preventDefault(),!m.date||!m.topic)return;const q=new Date(`${m.date}T${m.startTime}:00`),N=new Date(`${m.date}T${m.endTime}:00`),Z=A(q,N,s==null?void 0:s.id);if(Z.length>0&&g.length===0){f(Z);const D=Z.filter(L=>L.type==="event").length,O=Z.filter(L=>L.type==="lesson").length;let z="This lesson conflicts with the following existing items. Select the ones you want to delete to resolve conflicts:";D>0&&O>0?z=`This lesson conflicts with ${D} event(s) and ${O} lesson(s). Select the ones you want to delete to resolve conflicts:`:D>0?z=`This lesson conflicts with ${D} event(s). Select the ones you want to delete to resolve conflicts:`:O>0&&(z=`This lesson conflicts with ${O} lesson(s). Select the ones you want to delete to resolve conflicts:`),d(z,"warning");return}if(g.length>0&&g.filter(O=>!y.includes(O.id)).length>0){d("Please resolve all conflicts before saving.","error");return}b(!0);let Y=(s==null?void 0:s.materialUrl)||"",H=(s==null?void 0:s.materialName)||"";if(p){const D=(n==null?void 0:n.id)||(a==null?void 0:a.groupId),{data:{user:O}}=await Pe.auth.getUser();if(!O){d("You must be logged in to upload materials.","error"),b(!1);return}let z="Unknown";a?z=a.fullName:n&&(z=n.groupName);const L=k(z,m.topic,m.date,p.name),C=`lesson_materials/${O.id}/${D}/${Date.now()}_${L}`;Y=await S(p,C),H=L}const K={topic:m.topic,lessonDate:m.date,startTime:m.startTime,endTime:m.endTime,materialUrl:Y,materialName:H,status:"Incomplete"};n?K.groupId=n.id:a&&(K.groupId=a.groupId,K.studentId=a.id);try{s?await ve.update("lessons",s.id,K):await ve.create("lessons",K),o(),i&&i(),f([]),w([]),t()}catch(D){console.error("Error saving lesson: ",D)}finally{b(!1)}};return r.jsx(tt,{isOpen:e,onClose:t,title:s?"Edit Lesson":"Log New Lesson",headerStyle:{backgroundColor:"#0D9488"},children:r.jsxs("form",{onSubmit:Q,children:[r.jsxs(At,{title:"Lesson Details",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Topic",name:"topic",value:m.topic,onChange:E=>h({...m,topic:E.target.value}),required:!0})}),r.jsx("div",{className:"sm:col-span-2",children:r.jsx(pn,{label:"Date",name:"date",value:m.date,onChange:E=>h({...m,date:E.target.value}),required:!0})}),r.jsx("div",{className:"sm:col-span-2",children:r.jsx($n,{label:"Start Time",name:"startTime",value:m.startTime,onChange:E=>h({...m,startTime:E.target.value}),options:u})}),r.jsx("div",{className:"sm:col-span-2",children:r.jsx($n,{label:"End Time",name:"endTime",value:m.endTime,onChange:E=>h({...m,endTime:E.target.value}),options:u})})]}),r.jsx(At,{title:"Lesson Material",children:r.jsxs("div",{className:"sm:col-span-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Material"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(B,{path:T.UPLOAD,className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("div",{className:"flex text-sm text-gray-600",children:r.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none",children:[r.jsx("span",{children:p?p.name:m.material_name||"Upload a file"}),r.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:_})]})}),r.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOCX, etc. up to 10MB"})]})})]})}),g.length>0&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"This lesson conflicts with the following existing items. Select the ones you want to delete to resolve conflicts:"}),r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:g.map(E=>r.jsxs("div",{className:"flex items-center justify-between bg-white rounded p-2 border",children:[r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsx("input",{type:"checkbox",id:`conflict-${E.id}`,checked:y.includes(E.id),onChange:q=>F(E.id,q.target.checked),className:"h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500 mr-3"}),r.jsxs("div",{className:"flex items-center flex-1",children:[E.type==="lesson"?r.jsx(B,{path:T.LESSON,className:"w-4 h-4 text-blue-600 mr-2"}):r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 text-green-600 mr-2"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:E.displayName}),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",E.type,")"]})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:E.type==="lesson"?`${E.startTime||"09:00"} - ${E.endTime||"10:00"}`:E.startTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Europe/Istanbul"})})]},E.id))}),r.jsxs("div",{className:"flex space-x-2 mt-3",children:[r.jsx("button",{type:"button",onClick:()=>{f([]),w([])},className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{type:"button",onClick:R,disabled:y.length===0,className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:bg-gray-100 disabled:text-gray-400",children:["Delete ",y.length," Selected"]}),r.jsx("button",{type:"button",onClick:()=>{f([]),w([]),Q({preventDefault:()=>{}})},className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Create Lesson Anyway"})]})]})]})}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:x,className:"px-6 py-2 rounded-lg text-white bg-teal-600 hover:bg-teal-700 disabled:bg-teal-400 disabled:cursor-not-allowed",children:x?"Saving...":"Save Lesson"})]})]})})},Ou=({student:e,onClose:t})=>{var v;const n=x=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(x),s=x=>He(new Date(x),"dd/MM/yyyy"),a=x=>{switch(x==null?void 0:x.toLowerCase()){case"paid":return"dendi";case"unpaid":return"denmedi";case"partial":return"Ksmi deme";default:return x||"Bilinmiyor"}},i=x=>{if(!x||!Array.isArray(x))return"";const b={monday:"Pazartesi",tuesday:"Sal",wednesday:"aramba",thursday:"Perembe",friday:"Cuma",saturday:"Cumartesi",sunday:"Pazar",mon:"Pazartesi",tue:"Sal",wed:"aramba",thu:"Perembe",fri:"Cuma",sat:"Cumartesi",sun:"Pazar"};return x.map(f=>{const y=f.toLowerCase();return b[y]||f}).join(", ")},o=()=>{const g=`${(y=>y.replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"i").replace(//g,"I").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C"))(e.fullName).replace(/[^a-zA-Z\s]/g,"").trim().replace(/\s+/g,"_")}_PaymentPlan.pdf`,f=document.title;document.title=g,window.print(),setTimeout(()=>{document.title=f},1e3)},l=()=>{t()},c=typeof e.feeDetails=="string"?JSON.parse(e.feeDetails):e.feeDetails,d=typeof e.installments=="string"?JSON.parse(e.installments):e.installments,u=typeof e.tutoringDetails=="string"?JSON.parse(e.tutoringDetails):e.tutoringDetails,m=e.isTutoring?(u==null?void 0:u.totalCalculatedFee)||0:(c==null?void 0:c.totalFee)||0,h=(d==null?void 0:d.length)||0;d!=null&&d.reduce((x,b)=>{var g;return((g=b.status)==null?void 0:g.toLowerCase())!=="paid"?x+(b.amount||0):x},0);const p=d&&d.length>0?d[0].amount:0;return!e||!e.id?(console.error("PaymentPlanPrint: No valid student data provided"),null):r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] overflow-hidden",children:[r.jsxs("div",{className:"bg-blue-600 text-white p-6 flex items-center justify-between print:hidden",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"deme Plan"}),r.jsx("p",{className:"text-blue-100",children:"Payment Plan"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{onClick:o,className:"bg-blue-700 hover:bg-blue-800 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[r.jsx(B,{path:T.DOWNLOAD,className:"w-4 h-4"}),r.jsx("span",{children:"Yazdr"})]}),r.jsxs("button",{onClick:l,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[r.jsx(B,{path:T.CLOSE,className:"w-4 h-4"}),r.jsx("span",{children:"Kapat"})]})]})]}),r.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-120px)] print:p-0 print:max-h-none",children:r.jsxs("div",{className:"print-content bg-white",children:[r.jsx("div",{className:"hidden print:block mb-6 border-b-2 border-gray-800 pb-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"DEME PLANI"}),r.jsx("p",{className:"text-sm text-gray-700 font-medium",children:e.fullName})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-sm text-gray-600",children:He(new Date,"dd/MM/yyyy")})})]})}),r.jsxs("div",{className:"flex gap-6",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 border-b border-gray-300 pb-1",children:"RENC BLGLER"}),r.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Ad Soyad:"}),r.jsx("span",{children:e.fullName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"T.C. Kimlik No:"}),r.jsx("span",{children:e.nationalId||"Belirtilmemi"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"letiim:"}),r.jsx("span",{children:e.studentContact})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Veli Ad:"}),r.jsx("span",{children:e.parentName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Veli letiim:"}),r.jsx("span",{children:e.parentContact})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Kayt Tarihi:"}),r.jsx("span",{children:He(e.enrollmentDate,"dd/MM/yyyy")})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 border-b border-gray-300 pb-1",children:"DEME ZET"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-blue-50 p-2 text-center border border-blue-200",children:[r.jsx("div",{className:"font-bold text-blue-900",children:n(m)}),r.jsx("div",{className:"text-blue-600",children:"Toplam Tutar"})]}),r.jsxs("div",{className:"bg-green-50 p-2 text-center border border-green-200",children:[r.jsx("div",{className:"font-bold text-green-900",children:h}),r.jsx("div",{className:"text-green-600",children:"Taksit Says"})]}),r.jsxs("div",{className:"bg-orange-50 p-2 text-center border border-orange-200",children:[r.jsx("div",{className:"font-bold text-orange-900",children:n(p)}),r.jsx("div",{className:"text-orange-600",children:"Taksit Tutar"})]})]})]}),e.isTutoring&&u&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 border-b border-gray-300 pb-1",children:"BREYSEL DERS DETAYLARI"}),r.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Ders Bana cret:"}),r.jsx("span",{children:n(u.pricePerLesson||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Toplam Ders Says:"}),r.jsx("span",{children:u.numberOfLessons||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Ders Gnleri:"}),r.jsx("span",{children:i((v=u.schedule)==null?void 0:v.days)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Biti Tarihi:"}),r.jsx("span",{children:u.endDate?He(new Date(u.endDate),"dd/MM/yyyy"):"Belirtilmemi"})]})]})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 border-b border-gray-300 pb-1",children:"TAKST DETAYLARI"}),r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-purple-100",children:[r.jsx("th",{className:"border border-purple-300 px-2 py-1 text-center text-purple-900",children:"No"}),r.jsx("th",{className:"border border-purple-300 px-2 py-1 text-center text-purple-900",children:"Tutar"}),r.jsx("th",{className:"border border-purple-300 px-2 py-1 text-center text-purple-900",children:"Vade"}),r.jsx("th",{className:"border border-purple-300 px-2 py-1 text-center text-purple-900",children:"Durum"})]})}),r.jsx("tbody",{children:d&&d.length>0?d.map((x,b)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"border border-purple-200 px-2 py-1 text-center font-medium",children:x.number}),r.jsx("td",{className:"border border-purple-200 px-2 py-1 text-center font-medium",children:n(x.amount)}),r.jsx("td",{className:"border border-purple-200 px-2 py-1 text-center",children:s(x.dueDate)}),r.jsx("td",{className:"border border-purple-200 px-2 py-1 text-center",children:r.jsx("span",{className:`print:hidden px-2 py-1 rounded text-xs font-medium \${
                                                                installment.status?.toLowerCase() === 'paid' 
                                                                    ? 'bg-green-100 text-green-800' 
                                                                    : 'bg-red-100 text-red-800'
                                                            }`,children:a(x.status)})})]},b)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",className:"border border-purple-200 px-2 py-2 text-center text-gray-500",children:"Taksit plan bulunamad"})})})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 border-b border-gray-300 pb-1",children:"NEML NOTLAR"}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 text-xs",children:r.jsxs("div",{className:"space-y-2 text-gray-700",children:[r.jsx("p",{children:"1. Taksitler vade tarihinde denmelidir."}),r.jsx("p",{children:"2. Kurum, vadesi geen demeler iin gerekli resmi kurululara bavurma, ve yasal takip talebinde bulunma hakkna sahiptir."})]})})]})]})]}),r.jsx("div",{className:"print:block hidden mt-8 pt-6",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{className:"text-center flex-1",children:[r.jsx("div",{className:"border-b-2 border-gray-400 mb-3",style:{minHeight:"60px",width:"100%"}}),r.jsx("p",{className:"text-sm font-bold text-gray-900 mb-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600",children:"RENC / VEL"})]}),r.jsxs("div",{className:"text-center flex-1",children:[r.jsx("div",{className:"border-b-2 border-gray-400 mb-3",style:{minHeight:"60px",width:"100%"}}),r.jsx("p",{className:"text-sm font-bold text-gray-900 mb-1",children:"Nazm nl"}),r.jsx("p",{className:"text-xs text-gray-600",children:"KURUCU MDR"})]})]})})]})})]}),r.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    @media print {
                        /* Hide everything except print content */
                        body * {
                            visibility: hidden !important;
                        }
                        .print-content, .print-content * {
                            visibility: visible !important;
                        }
                        
                        /* Reset and center the print content */
                        .print-content {
                            position: absolute !important;
                            left: 0 !important;
                            top: 0 !important;
                            width: 100% !important;
                            margin: 0 !important;
                            padding: 15px !important;
                            background: white !important;
                            font-family: Arial, sans-serif !important;
                            text-align: left !important;
                            display: block !important;
                            line-height: 1.3 !important;
                        }
                        
                        /* Header styling */
                        .print-content h1 {
                            font-size: 18px !important;
                            font-weight: bold !important;
                            color: #1f2937 !important;
                            margin: 0 !important;
                            text-transform: uppercase !important;
                        }
                        
                        .print-content h3 {
                            font-size: 12px !important;
                            font-weight: bold !important;
                            color: #374151 !important;
                            margin: 0 0 8px 0 !important;
                            text-transform: uppercase !important;
                        }
                        
                        .print-content p {
                            margin: 2px 0 !important;
                            font-size: 10px !important;
                        }
                        
                        /* Two column layout */
                        .print-content .flex {
                            display: flex !important;
                            gap: 20px !important;
                        }
                        
                        .print-content .flex-1 {
                            flex: 1 !important;
                        }
                        
                        /* Grid styling */
                        .print-content .grid {
                            margin: 8px 0 !important;
                        }
                        
                        .print-content .grid-cols-1 > div {
                            display: flex !important;
                            justify-content: space-between !important;
                            margin: 2px 0 !important;
                            font-size: 10px !important;
                        }
                        
                        .print-content .grid-cols-3 {
                            display: grid !important;
                            grid-template-columns: 1fr 1fr 1fr !important;
                            gap: 8px !important;
                        }
                        
                        .print-content .grid-cols-3 > div {
                            background: #f8f9fa !important;
                            border: 1px solid #ddd !important;
                            padding: 6px !important;
                            text-align: center !important;
                            font-size: 10px !important;
                        }
                        
                        .print-content .grid-cols-2 {
                            display: grid !important;
                            grid-template-columns: 1fr 1fr !important;
                            gap: 8px !important;
                        }
                        
                        .print-content .grid-cols-2 > div {
                            display: flex !important;
                            justify-content: space-between !important;
                            margin: 2px 0 !important;
                            font-size: 10px !important;
                        }
                        
                        /* Table styling */
                        .print-content table {
                            width: 100% !important;
                            border-collapse: collapse !important;
                            margin: 8px 0 !important;
                            font-size: 9px !important;
                        }
                        
                        .print-content table th {
                            background: #f1f5f9 !important;
                            color: #1f2937 !important;
                            font-weight: bold !important;
                            padding: 4px 6px !important;
                            border: 1px solid #cbd5e1 !important;
                            text-align: left !important;
                        }
                        
                        .print-content table td {
                            border: 1px solid #cbd5e1 !important;
                            padding: 4px 6px !important;
                        }
                        
                        /* Status badges */
                        .print-content .bg-green-100 {
                            background: #dcfce7 !important;
                            color: #166534 !important;
                            font-weight: bold !important;
                            padding: 2px 4px !important;
                            border-radius: 3px !important;
                        }
                        
                        .print-content .bg-red-100 {
                            background: #fee2e2 !important;
                            color: #991b1b !important;
                            font-weight: bold !important;
                            padding: 2px 4px !important;
                            border-radius: 3px !important;
                        }
                        
                        /* Important notes */
                        .print-content .bg-yellow-50 {
                            background: #fffbeb !important;
                            border: 1px solid #fde68a !important;
                            padding: 8px !important;
                            margin: 8px 0 !important;
                        }
                        
                        .print-content .list-disc {
                            list-style-type: disc !important;
                        }
                        
                        .print-content .list-inside {
                            list-style-position: inside !important;
                        }
                        
                        .print-content .space-y-1 > * + * {
                            margin-top: 4px !important;
                        }
                        
                        /* Signature section */
                        .print-content .mt-8 {
                            margin-top: 25px !important;
                        }
                        
                        .print-content .pt-6 {
                            padding-top: 20px !important;
                        }
                        
                        .print-content .border-t-2 {
                            border-top: 2px solid #1f2937 !important;
                        }
                        
                        .print-content .border-b-2 {
                            border-bottom: 2px solid #9ca3af !important;
                        }
                        
                        .print-content .border-b {
                            border-bottom: 1px solid #9ca3af !important;
                        }
                        
                        .print-content .border {
                            border: 1px solid #9ca3af !important;
                        }
                        
                        .print-content .border-gray-300 {
                            border-color: #d1d5db !important;
                        }
                        
                        .print-content .border-gray-800 {
                            border-color: #1f2937 !important;
                        }
                        
                        .print-content .border-yellow-200 {
                            border-color: #fde68a !important;
                        }
                        
                        /* Flex utilities */
                        .print-content .flex {
                            display: flex !important;
                        }
                        
                        .print-content .justify-between {
                            justify-content: space-between !important;
                        }
                        
                        .print-content .items-end {
                            align-items: flex-end !important;
                        }
                        
                        .print-content .flex-1 {
                            flex: 1 !important;
                        }
                        
                        /* Space utilities */
                        .print-content .space-y-2 > * + * {
                            margin-top: 8px !important;
                        }
                        
                        /* Text utilities */
                        .print-content .text-xs {
                            font-size: 9px !important;
                        }
                        
                        .print-content .text-sm {
                            font-size: 11px !important;
                        }
                        
                        .print-content .text-xl {
                            font-size: 18px !important;
                        }
                        
                        .print-content .text-center {
                            text-align: center !important;
                        }
                        
                        .print-content .text-right {
                            text-align: right !important;
                        }
                        
                        .print-content .text-left {
                            text-align: left !important;
                        }
                        
                        .print-content .font-bold {
                            font-weight: bold !important;
                        }
                        
                        .print-content .font-medium {
                            font-weight: 500 !important;
                        }
                        
                        .print-content .text-gray-900 {
                            color: #111827 !important;
                        }
                        
                        .print-content .text-gray-600 {
                            color: #4b5563 !important;
                        }
                        
                        .print-content .text-gray-500 {
                            color: #6b7280 !important;
                        }
                        
                        .print-content .text-gray-700 {
                            color: #374151 !important;
                        }
                        
                        /* Spacing utilities */
                        .print-content .mb-1 {
                            margin-bottom: 4px !important;
                        }
                        
                        .print-content .mb-2 {
                            margin-bottom: 8px !important;
                        }
                        
                        .print-content .mb-4 {
                            margin-bottom: 15px !important;
                        }
                        
                        .print-content .mb-6 {
                            margin-bottom: 20px !important;
                        }
                        
                        .print-content .mt-4 {
                            margin-top: 15px !important;
                        }
                        
                        .print-content .pb-1 {
                            padding-bottom: 4px !important;
                        }
                        
                        .print-content .pb-4 {
                            padding-bottom: 15px !important;
                        }
                        
                        .print-content .pt-2 {
                            padding-top: 8px !important;
                        }
                        
                        .print-content .p-2 {
                            padding: 8px !important;
                        }
                        
                        .print-content .p-3 {
                            padding: 12px !important;
                        }
                        
                        .print-content .gap-2 {
                            gap: 8px !important;
                        }
                        
                        .print-content .gap-6 {
                            gap: 20px !important;
                        }
                        
                        .print-content .gap-8 {
                            gap: 25px !important;
                        }
                        
                        /* Hide screen-only elements */
                        .print-content .print\\:hidden {
                            display: none !important;
                        }
                        
                        /* Show print-only elements */
                        .print-content .hidden.print\\:block {
                            display: block !important;
                        }
                        
                        /* Prevent page breaks */
                        .print-content table {
                            page-break-inside: avoid !important;
                        }
                        
                        .print-content .flex {
                            page-break-inside: avoid !important;
                        }
                    }
                `}})]})},zg=({isOpen:e,onClose:t,student:n})=>{const{fetchData:s}=at(),[a,i]=I.useState("general"),[o,l]=I.useState([]),[c,d]=I.useState([]),[u,m]=I.useState(!0),[h,p]=I.useState(!1),[v,x]=I.useState(null),[b,g]=I.useState(!1),[f,y]=I.useState(null),[w,_]=I.useState(!1),[S,k]=I.useState(n),A=async()=>{if(!(S!=null&&S.id)){m(!1),l([]);return}m(!0);try{const C=await ve.getAll("lessons");let V=[];S.isTutoring?V=C.filter(ie=>ie.studentId===S.id):S.groupId&&(V=C.filter(ie=>ie.groupId===S.groupId)),V.sort((ie,he)=>new Date(ie.lessonDate)-new Date(he.lessonDate));const W=V.map(ie=>({...ie,attendance:ie.attendance?typeof ie.attendance=="string"?JSON.parse(ie.attendance):ie.attendance:{}}));l(W)}catch(C){console.error("Error fetching lessons:",C)}m(!1)};I.useEffect(()=>{const C=(V,W)=>{if(typeof V=="string")try{return JSON.parse(V)}catch{return W}return V||W};k({...n,installments:C(n==null?void 0:n.installments,[]),feeDetails:C(n==null?void 0:n.feeDetails,{}),tutoringDetails:C(n==null?void 0:n.tutoringDetails,{}),documents:C(n==null?void 0:n.documents,{}),documentNames:C(n==null?void 0:n.documentNames,{})}),e&&i("general")},[n,e]),I.useEffect(()=>{S!=null&&S.id&&A()},[S==null?void 0:S.id]);const F=async()=>{try{const C=await ve.getAll("groups");d(C)}catch(C){console.error("Error fetching groups:",C)}};I.useEffect(()=>{F()},[]);const R=I.useMemo(()=>{if(!S.installments||!Array.isArray(S.installments))return{totalPaid:0,totalFee:0};const C=S.installments.filter(W=>W.status==="Paid").reduce((W,ie)=>W+ie.amount,0),V=S.installments.reduce((W,ie)=>W+ie.amount,0);return{totalPaid:C,totalFee:V}},[S.installments]),Q=I.useMemo(()=>{if(S.isTutoring||o.length===0)return null;const C=o.filter(ie=>{var he;return((he=ie.attendance)==null?void 0:he[S.id])==="Present"}).length,V=o.filter(ie=>{var he,ye;return!((he=ie.attendance)!=null&&he[S.id])||((ye=ie.attendance)==null?void 0:ye[S.id])==="Absent"}).length,W=o.length;return{presentCount:C,absentCount:V,totalLessons:W}},[o,S.id,S.isTutoring]),E=I.useMemo(()=>{if(!S.isTutoring)return null;const C=o.filter(W=>W.status==="Complete").length,V=o.length;return{completedLessons:C,totalLessons:V}},[o,S.isTutoring]),q=I.useMemo(()=>S!=null&&S.groupId&&c.length>0?c.find(C=>C.id===S.groupId):null,[S,c]),N=S.isTutoring?S.color||"#8B5CF6":(q==null?void 0:q.color)||"#3B82F6",Z=(q==null?void 0:q.groupName)??"N/A",Y=C=>{x(C),p(!0)},H=C=>{y(C),g(!0)},K=async()=>{f&&(await ve.delete("lessons",f.id),l(o.filter(C=>C.id!==f.id)),s()),y(null),g(!1)},D=async C=>{const V=C.status==="Complete"?"Incomplete":"Complete";await ve.update("lessons",C.id,{status:V}),A(),s()},O=async C=>{const V=S.installments.find(he=>he.number===C),W=V.status==="Paid"?"Unpaid":"Paid";console.log("handleTogglePaymentStatus called:",{installmentNumber:C,newStatus:W,installment:V});const ie=S.installments.map(he=>he.number===C?{...he,status:W,paidDate:W==="Paid"?new Date().toISOString():null}:he);try{if(await ve.update("students",S.id,{installments:ie}),k(he=>({...he,installments:ie})),W==="Paid"){const he={studentId:S.id,amount:V.amount,transactionDate:new Date().toISOString(),type:S.isTutoring?"income-tutoring":"income-group",expenseType:S.isTutoring?"income-tutoring":"income-group",description:`${S.fullName} - Installment ${C}`,category:"Student Payment"};console.log("Creating transaction:",he);const ye=await ve.create("transactions",he);console.log("Transaction created successfully:",ye)}else{console.log("Deleting transaction for installment:",C);const{data:he}=await Pe.from("transactions").select("*").eq("student_id",S.id).eq("description",`${S.fullName} - Installment ${C}`);console.log("Found transactions to delete:",he),he&&he.length>0&&(await ve.delete("transactions",he[0].id),console.log("Transaction deleted successfully"))}s()}catch(he){console.error("Error updating payment status:",he)}},z=async(C,V,W)=>{const ie={Present:"Absent",Absent:"Present"}[W]||"Present",he={...C.attendance,[V]:ie};await ve.update("lessons",C.id,{attendance:he}),A(),s()},L=r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold",children:S.fullName}),r.jsx("p",{className:"text-sm text-white/80",children:"Student Details"})]});return r.jsxs(r.Fragment,{children:[r.jsxs(tt,{isOpen:e,onClose:t,title:L,headerStyle:{backgroundColor:N},children:[r.jsx("div",{className:"mb-4 border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>i("general"),className:`-mb-px px-3 py-2 font-medium text-sm border-b-2 ${a==="general"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"General Info"}),r.jsx("button",{onClick:()=>i("payments"),className:`-mb-px px-3 py-2 font-medium text-sm border-b-2 ${a==="payments"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Payments"}),S.isTutoring?r.jsx("button",{onClick:()=>i("tutoringSummary"),className:`-mb-px px-3 py-2 font-medium text-sm border-b-2 ${a==="tutoringSummary"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Tutoring Summary"}):r.jsx("button",{onClick:()=>i("attendance"),className:`-mb-px px-3 py-2 font-medium text-sm border-b-2 ${a==="attendance"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Attendance"})]})}),a==="general"&&r.jsxs("ul",{className:"divide-y divide-gray-200",children:[r.jsx("li",{className:"py-3 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Contact"}),r.jsx("p",{className:"text-sm text-gray-500",children:Ga(S.studentContact)})]})}),r.jsx("li",{className:"py-3 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"National ID"}),r.jsx("p",{className:"text-sm text-gray-500",children:S.nationalId||"N/A"})]})}),r.jsx("li",{className:"py-3 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Parent Contact"}),r.jsx("p",{className:"text-sm text-gray-500",children:Ga(S.parentContact)||"N/A"})]})}),r.jsx("li",{className:"py-3 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Enrollment Date"}),r.jsx("p",{className:"text-sm text-gray-500",children:He(S.enrollmentDate)})]})}),r.jsx("li",{className:"py-3 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Student Type"}),r.jsx("p",{className:"text-sm text-gray-500",children:S.isTutoring?"Tutoring":"Group"})]})}),!S.isTutoring&&r.jsx("li",{className:"py-3 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Group"}),r.jsx("p",{className:"text-sm text-gray-500",children:Z})]})})]}),a==="payments"&&r.jsxs("div",{children:[R&&r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"font-semibold text-blue-800",children:"Payment Summary"}),r.jsx("span",{className:"font-semibold text-blue-800",children:R.totalFee>0?`${(R.totalPaid/R.totalFee*100).toFixed(0)}%`:"0%"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:r.jsx("div",{className:"bg-blue-600 h-4 rounded-full",style:{width:`${R.totalFee>0?R.totalPaid/R.totalFee*100:0}%`}})}),r.jsxs("p",{className:"text-center text-teal-800 mt-2",children:["",R.totalPaid.toFixed(0)," paid out of ",R.totalFee.toFixed(0)]}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("button",{onClick:()=>_(!0),className:"flex items-center justify-center px-4 py-2 rounded-md text-white bg-blue-600 hover:bg-blue-700 text-sm shadow-sm mx-auto",children:[r.jsx(B,{path:T.DOWNLOAD,className:"w-4 h-4 mr-2"}),"Print Payment Plan"]})})]}),r.jsxs("ul",{className:"divide-y divide-gray-200",children:[(S.installments||[]).map(C=>r.jsxs("li",{className:"py-3 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-800",children:["Installment #",C.number]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",He(C.dueDate)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["",C.amount.toFixed(0)]}),r.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-1",children:[C.status==="Unpaid"&&new Date(C.dueDate)<new Date&&r.jsx(B,{path:T.WARNING,className:"w-4 h-4 text-yellow-500",title:"Payment is overdue"}),r.jsx("button",{onClick:()=>O(C.number),className:`px-2 py-1 text-xs font-semibold rounded-full ${C.status==="Paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.status})]})]})]},C.number)),(S.installments||[]).length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No payment plan found for this student."})]})]}),a==="attendance"&&!S.isTutoring&&r.jsx("div",{children:u?r.jsx("p",{children:"Loading attendance..."}):r.jsxs(r.Fragment,{children:[o.length>0&&r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"font-semibold text-green-800",children:"Attendance Summary"}),r.jsx("span",{className:"font-semibold text-green-800",children:(Q==null?void 0:Q.totalLessons)>0?`${(Q.presentCount/Q.totalLessons*100).toFixed(0)}%`:"0%"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:r.jsx("div",{className:"bg-green-600 h-4 rounded-full",style:{width:`${(Q==null?void 0:Q.totalLessons)>0?Q.presentCount/Q.totalLessons*100:0}%`}})}),r.jsxs("p",{className:"text-center text-green-800 mt-2",children:[(Q==null?void 0:Q.presentCount)||0," present, ",(Q==null?void 0:Q.absentCount)||0," absent out of ",(Q==null?void 0:Q.totalLessons)||0," total lessons"]})]}),r.jsxs("ul",{className:"divide-y divide-gray-200",children:[o.map(C=>{var V,W;return r.jsxs("li",{className:"py-3 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:C.topic}),r.jsx("p",{className:"text-sm text-gray-500",children:He(C.lessonDate)})]}),r.jsx("button",{onClick:()=>{var ie;return z(C,S.id,(ie=C.attendance)==null?void 0:ie[S.id])},className:`px-2 py-1 text-xs font-semibold rounded-full ${((V=C.attendance)==null?void 0:V[S.id])==="Present"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:((W=C.attendance)==null?void 0:W[S.id])||"Absent"})]},C.id)}),o.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No lessons found for this student's group."})]})]})}),a==="tutoringSummary"&&S.isTutoring&&r.jsxs("div",{children:[E&&r.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"font-semibold text-purple-800",children:"Tutoring Progress"}),r.jsx("span",{className:"font-semibold text-purple-800",children:E.totalLessons>0?`${(E.completedLessons/E.totalLessons*100).toFixed(0)}%`:"0%"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:r.jsx("div",{className:"bg-purple-600 h-4 rounded-full",style:{width:`${E.completedLessons/E.totalLessons*100}%`}})}),r.jsxs("p",{className:"text-center text-purple-800 mt-2",children:[E.completedLessons," out of ",E.totalLessons," lessons completed"]}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center justify-center px-3 py-1.5 rounded-md text-white bg-purple-600 hover:bg-purple-700 text-sm shadow-sm mx-auto",children:[r.jsx(B,{path:T.ADD,className:"w-4 h-4 mr-2"}),"Log Lesson"]})})]}),r.jsxs("ul",{className:"divide-y divide-gray-200",children:[o.map(C=>r.jsxs("li",{className:"py-3 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:C.topic}),r.jsx("p",{className:"text-sm text-gray-500",children:He(C.lessonDate)})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>D(C),className:`px-2 py-1 text-xs font-semibold rounded-full ${C.status==="Complete"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:C.status}),r.jsx("button",{onClick:()=>Y(C),className:"p-1.5 rounded-md hover:bg-gray-200",children:r.jsx(B,{path:T.EDIT,className:"w-4 h-4 text-gray-600"})}),r.jsx("button",{onClick:()=>H(C),className:"p-1.5 rounded-md hover:bg-gray-200",children:r.jsx(B,{path:T.DELETE,className:"w-4 h-4 text-red-600"})})]})]},C.id)),o.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No lessons found for this student."})]})]})]}),h&&r.jsx(Iu,{isOpen:h,onClose:()=>{p(!1),x(null),A()},student:S,lessonToEdit:v}),r.jsx(nn,{isOpen:b,onClose:()=>g(!1),onConfirm:K,title:"Delete Lesson",message:"Are you sure you want to delete this lesson? This action cannot be undone."}),w&&r.jsx(Ou,{student:S,onClose:()=>_(!1)})]})},MN=()=>{const{showNotification:e}=Xe(),{students:t,groups:n,lessons:s,fetchData:a,loading:i}=at(),[o,l]=I.useState("all"),[c,d]=I.useState(""),[u,m]=I.useState(!1),[h,p]=I.useState(null),[v,x]=I.useState(!1),[b,g]=I.useState(null),[f,y]=I.useState(!1),[w,_]=I.useState(null),[S,k]=I.useState(!1),[A,F]=I.useState(null),R=I.useMemo(()=>(t==null?void 0:t.filter(O=>!O.isTutoring))||[],[t]),Q=I.useMemo(()=>(t==null?void 0:t.filter(O=>O.isTutoring))||[],[t]),E=I.useMemo(()=>(t==null?void 0:t.filter(O=>O.isArchived))||[],[t]),q=I.useMemo(()=>{let O;switch(o){case"group":O=R;break;case"tutoring":O=Q;break;case"archived":O=E;break;default:O=t||[]}let z=O;return c&&(z=z.filter(L=>{var C,V;return L.fullName.toLowerCase().includes(c.toLowerCase())||((C=L.studentContact)==null?void 0:C.toLowerCase().includes(c.toLowerCase()))||((V=L.parentName)==null?void 0:V.toLowerCase().includes(c.toLowerCase()))})),[...z].sort((L,C)=>L.fullName.localeCompare(C.fullName))},[t,E,o,c,R,Q]),N=O=>{g(O),x(!0)},Z=async()=>{if(b)try{o==="archived"?(await ve.delete("students",b.id),e("Student permanently deleted!","success")):(await ve.update("students",b.id,{isArchived:!0}),e("Student archived successfully!","success")),a()}catch(O){console.error("Error deleting/archiving student:",O),e("Error processing student deletion/archiving.","error")}finally{x(!1),g(null)}},Y=async O=>{try{await ve.update("students",O.id,{isArchived:!1}),a()}catch(z){console.error("Error unarchiving student:",z)}},H=()=>{p(null),m(!0)},K=O=>{p(O),m(!0)},D=O=>{_(O),y(!0)};return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center shadow-sm mr-4",children:r.jsx(B,{path:T.STUDENTS,className:"w-7 h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Students"}),r.jsx("p",{className:"text-gray-600 text-sm lg:text-base",children:"Manage student enrollment and progress"})]})]}),r.jsxs("button",{onClick:H,className:"flex items-center px-6 py-3 rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-all duration-300 shadow-sm",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-semibold",children:"Add Student"})]})]})}),r.jsxs("div",{className:"mb-6 flex flex-col space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Search students...",value:c,onChange:O=>d(O.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-base"}),r.jsx("div",{className:"bg-white rounded-lg p-1 shadow-sm",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsxs("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${o==="all"?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:["All (",(t==null?void 0:t.length)||0,")"]}),r.jsxs("button",{onClick:()=>l("group"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${o==="group"?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:["Group (",(R==null?void 0:R.length)||0,")"]}),r.jsxs("button",{onClick:()=>l("tutoring"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${o==="tutoring"?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:["Tutoring (",(Q==null?void 0:Q.length)||0,")"]}),r.jsxs("button",{onClick:()=>l("archived"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${o==="archived"?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:["Archived (",(E==null?void 0:E.length)||0,")"]})]})})]}),i?r.jsx("p",{className:"text-center text-gray-500",children:"Loading students..."}):q.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:block bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[r.jsx("th",{className:"p-4 font-bold text-sm text-gray-700 uppercase tracking-wide text-left",children:"Full Name"}),r.jsx("th",{className:"p-4 font-bold text-sm text-gray-700 uppercase tracking-wide text-left",children:"Contact"}),r.jsx("th",{className:"p-4 font-bold text-sm text-gray-700 uppercase tracking-wide text-left",children:"Group"}),r.jsx("th",{className:"p-4 font-bold text-sm text-gray-700 uppercase tracking-wide text-left",children:"Enrollment Date"}),r.jsx("th",{className:"p-4 font-bold text-sm text-gray-700 uppercase tracking-wide text-left",children:"Lesson Progress"}),r.jsx("th",{className:"p-4 font-bold text-sm text-gray-700 uppercase tracking-wide text-center",children:"Actions"})]})}),r.jsx("tbody",{children:q.map(O=>r.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"p-4 text-gray-800 text-sm text-left",children:O.fullName}),r.jsx("td",{className:"p-4 text-gray-700 text-sm text-left",children:Ga(O.studentContact)}),r.jsx("td",{className:"p-4 text-gray-700 text-sm text-left",children:O.isTutoring?r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white",style:{backgroundColor:O.color||"#8B5CF6"},children:"Tutoring"}):O.groupId?(()=>{const z=n.find(L=>L.id===O.groupId);return r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:z==null?void 0:z.color,color:"white"},children:(z==null?void 0:z.groupName)||"N/A"})})():r.jsx("span",{className:"text-sm text-gray-400",children:"Unassigned"})}),r.jsx("td",{className:"p-4 text-gray-700 text-sm text-left",children:He(O.enrollmentDate)}),r.jsx("td",{className:"p-4 text-gray-700 text-sm text-left",children:(()=>{var z;if(O.isTutoring){const C=(O.tutoringDetails||{}).numberOfLessons||0,V=((z=s==null?void 0:s.filter(ie=>ie.studentId===O.id&&ie.status==="Complete"))==null?void 0:z.length)||0;if(C===0)return r.jsx("span",{className:"text-sm text-gray-400",children:"No lessons planned"});const W=Math.round(V/C*100);return V===C?r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-green-100 text-green-800 shadow-sm",children:["Complete (",C,"/",C,")"]}):W>=75?r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 shadow-sm",children:[V,"/",C," (",W,"%)"]}):W>=50?r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 shadow-sm",children:[V,"/",C," (",W,"%)"]}):r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-red-100 text-red-800 shadow-sm",children:[V,"/",C," (",W,"%)"]})}else{const L=(s==null?void 0:s.filter(ie=>ie.groupId===O.groupId))||[],C=L.length,V=L.filter(ie=>ie.status==="Complete").length;if(C===0)return r.jsx("span",{className:"text-sm text-gray-400",children:"No lessons planned"});const W=Math.round(V/C*100);return V===C?r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-green-100 text-green-800 shadow-sm",children:["Complete (",C,"/",C,")"]}):W>=75?r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 shadow-sm",children:[V,"/",C," (",W,"%)"]}):W>=50?r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 shadow-sm",children:[V,"/",C," (",W,"%)"]}):r.jsxs("span",{className:"px-3 py-2 rounded-full text-xs font-semibold bg-red-100 text-red-800 shadow-sm",children:[V,"/",C," (",W,"%)"]})}})()}),r.jsx("td",{className:"p-4 text-gray-700 text-center",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>D(O),className:"text-blue-600 hover:text-blue-800 p-2 hover:bg-blue-50 rounded-full transition-colors",title:"View Details",children:r.jsx(B,{path:T.EYE,className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>K(O),className:"p-2 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 transition-colors",title:"Edit",children:r.jsx(B,{path:T.EDIT,className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{F(O),k(!0)},className:"p-2 text-purple-600 hover:text-purple-800 rounded-full hover:bg-purple-50 transition-colors",title:"Print Payment Plan",children:r.jsx(B,{path:T.PRINT,className:"w-5 h-5"})}),o==="archived"?r.jsx("button",{onClick:()=>Y(O),className:"p-2 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 transition-colors",title:"Unarchive",children:r.jsx(B,{path:T.BOX_OPEN,className:"w-5 h-5"})}):r.jsx("button",{onClick:()=>N(O),className:"p-2 text-orange-600 hover:text-orange-800 rounded-full hover:bg-orange-50 transition-colors",title:"Archive",children:r.jsx(B,{path:T.ARCHIVE,className:"w-5 h-5"})})]})})]},O.id))})]})})}),r.jsx("div",{className:"lg:hidden grid grid-cols-1 md:grid-cols-2 gap-6",children:q.map(O=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.STUDENTS,className:"w-7 h-7 text-white"})})}),r.jsx("h3",{className:"text-xl text-gray-900 mb-3",children:O.fullName}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.PHONE,className:"w-4 h-4 mr-2 text-gray-600"}),r.jsx("span",{children:Ga(O.studentContact)})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.GROUPS,className:"w-4 h-4 mr-2 text-gray-600"}),r.jsx("span",{children:O.isTutoring?r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white",style:{backgroundColor:O.color||"#8B5CF6"},children:"Tutoring"}):O.groupId?(()=>{const z=n.find(L=>L.id===O.groupId);return r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:z==null?void 0:z.color,color:"white"},children:(z==null?void 0:z.groupName)||"N/A"})})():r.jsx("span",{className:"text-gray-400",children:"Unassigned"})})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 mr-2 text-gray-600"}),r.jsxs("span",{children:["Enrolled: ",He(O.enrollmentDate)]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.CHART_LINE,className:"w-4 h-4 mr-2 text-gray-600"}),r.jsx("span",{children:(()=>{var z;if(O.isTutoring){const C=(O.tutoringDetails||{}).numberOfLessons||0,V=((z=s==null?void 0:s.filter(ie=>ie.studentId===O.id&&ie.status==="Complete"))==null?void 0:z.length)||0;if(C===0)return r.jsx("span",{className:"text-gray-400",children:"No lessons planned"});const W=Math.round(V/C*100);return V===C?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:["Complete (",C,"/",C,")"]}):W>=75?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:[V,"/",C," (",W,"%)"]}):W>=50?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:[V,"/",C," (",W,"%)"]}):r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:[V,"/",C," (",W,"%)"]})}else{const L=(s==null?void 0:s.filter(ie=>ie.groupId===O.groupId))||[],C=L.length,V=L.filter(ie=>ie.status==="Complete").length;if(C===0)return r.jsx("span",{className:"text-gray-400",children:"No lessons planned"});const W=Math.round(V/C*100);return V===C?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:["Complete (",C,"/",C,")"]}):W>=75?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:[V,"/",C," (",W,"%)"]}):W>=50?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:[V,"/",C," (",W,"%)"]}):r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:[V,"/",C," (",W,"%)"]})}})()})]})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:()=>D(O),className:"p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50 transition-colors",title:"View Details",children:r.jsx(B,{path:T.EYE,className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>K(O),className:"p-2 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 transition-colors",title:"Edit",children:r.jsx(B,{path:T.EDIT,className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{F(O),k(!0)},className:"p-2 text-purple-600 hover:text-purple-800 rounded-full hover:bg-purple-50 transition-colors",title:"Print Payment Plan",children:r.jsx(B,{path:T.PRINT,className:"w-5 h-5"})}),o==="archived"?r.jsx("button",{onClick:()=>Y(O),className:"p-2 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 transition-colors",title:"Unarchive",children:r.jsx(B,{path:T.BOX_OPEN,className:"w-5 h-5"})}):r.jsx("button",{onClick:()=>N(O),className:"p-2 text-orange-600 hover:text-orange-800 rounded-full hover:bg-orange-50 transition-colors",title:"Archive",children:r.jsx(B,{path:T.ARCHIVE,className:"w-5 h-5"})})]})]},O.id))})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500",children:"No students found."})}),u&&r.jsx(Au,{isOpen:u,studentToEdit:h,onClose:()=>m(!1),onSave:()=>{m(!1),a()}}),v&&r.jsx(nn,{isOpen:v,onClose:()=>x(!1),onConfirm:Z,title:o==="archived"?"Permanently Delete Student":"Archive Student",message:o==="archived"?` WARNING: You are about to PERMANENTLY DELETE "${b==null?void 0:b.fullName}". This action cannot be undone and will remove all student data including payments, lessons, and documents. Are you absolutely sure you want to proceed?`:`Are you sure you want to archive "${b==null?void 0:b.fullName}"? The student will be moved to the archived section and can be restored later.`,confirmText:o==="archived"?"Delete Permanently":"Archive",confirmStyle:o==="archived"?"bg-red-600 hover:bg-red-700":"bg-orange-600 hover:bg-orange-700"}),f&&r.jsx(zg,{isOpen:f,student:w,onClose:()=>y(!1),onEdit:()=>{y(!1),K(w)}}),S&&A&&r.jsx(Ou,{isOpen:S,student:A,onClose:()=>{k(!1),F(null)}},A.id)]})},RN=({isOpen:e,onClose:t,groupToEdit:n})=>{const{fetchData:s}=at(),{showNotification:a}=Xe(),i=[];for(let f=9;f<=23;f++)i.push(`${f.toString().padStart(2,"0")}:00`),i.push(`${f.toString().padStart(2,"0")}:30`);i.push("00:00");const o=["#FF6B6B","#4ECDC4","#45B7D1","#FED766","#FFA07A","#98D8AA","#A28089","#6A057F","#FFD166","#06D6A0","#1B9AAA","#EF476F","#073B4C","#F78C6B","#70C1B7"],l=I.useCallback(()=>({groupName:(n==null?void 0:n.groupName)||"",schedule:(n==null?void 0:n.schedule)||{days:[],startTime:"10:00",endTime:"12:00"},color:(n==null?void 0:n.color)||o[Math.floor(Math.random()*o.length)],startDate:n!=null&&n.startDate?new Date(n.startDate).toISOString().split("T")[0]:"",programLength:(n==null?void 0:n.programLength)||"12",isArchived:(n==null?void 0:n.isArchived)||!1}),[n]),[c,d]=I.useState(l()),[u,m]=I.useState(!1);I.useEffect(()=>{e&&d(l())},[e,l]),I.useEffect(()=>{const{startDate:f,programLength:y,schedule:w}=c;if(f&&y&&w.days&&w.days.length>0){const _=h(f,y,w);d(S=>({...S,endDate:_}))}},[c.startDate,c.programLength,c.schedule.days,c.schedule.startTime,c.schedule.endTime]);const h=(f,y,w)=>{var F;if(!f||!y||!((F=w==null?void 0:w.days)!=null&&F.length))return null;const _=new Date(f);let S=new Date(_),k=0;const A=parseInt(y)*w.days.length;for(;k<A;){const R=S.getDay(),Q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][R];w.days.includes(Q)&&k++,S.setDate(S.getDate()+1),S.getDay()===_.getDay()&&S>_}return S.setDate(S.getDate()-1),S.toISOString().split("T")[0]},p=f=>{const{name:y,value:w}=f.target;d(_=>({..._,[y]:w}))},v=f=>{const{name:y,value:w}=f.target;d(_=>({..._,schedule:{..._.schedule,[y]:w}}))},x=(f,y)=>{if(d(w=>({...w,[f]:y})),f==="startDate"){const{programLength:w,schedule:_}=c;if(y&&w&&_.days.length>0){const S=h(y,w,_);d(k=>({...k,endDate:S}))}else{const S=new Date(y),k=new Date(S.getTime()+12*7*24*60*60*1e3);d(A=>({...A,endDate:k.toISOString().split("T")[0]}))}}},b=f=>{const y=c.schedule.days,w=y.includes(f)?y.filter(_=>_!==f):[...y,f];d(_=>({..._,schedule:{..._.schedule,days:w}}))},g=async f=>{f.preventDefault(),m(!0);const{startDate:y,programLength:w,schedule:_}=c;let S=null;y&&w&&_.days.length>0&&(S=h(y,w,_));const k={groupName:c.groupName,schedule:c.schedule,color:c.color,startDate:c.startDate,endDate:S,programLength:c.programLength,isArchived:c.isArchived};try{if(!n){const F=(await ve.getAll("groups")).filter(E=>!E.isArchived),R=F.some(E=>{const q=E.schedule,N=c.schedule;return q.days.length===N.days.length&&q.days.every(Z=>N.days.includes(Z))&&q.startTime===N.startTime&&q.endTime===N.endTime}),Q=F.some(E=>{const q=E.schedule,N=c.schedule;if(q.days.filter(W=>N.days.includes(W)).length===0)return!1;const Y=q.startTime,H=q.endTime,K=N.startTime,D=N.endTime,O=W=>{const[ie,he]=W.split(":").map(Number);return ie*60+he},z=O(Y),L=O(H),C=O(K),V=O(D);return C<L&&V>z});if(R){const E=F.find(q=>{const N=q.schedule,Z=c.schedule;return N.days.length===Z.days.length&&N.days.every(Y=>Z.days.includes(Y))&&N.startTime===Z.startTime&&N.endTime===Z.endTime});a(`A group with this exact schedule already exists: "${E.groupName}". Please choose different days or times.`,"error"),m(!1);return}if(Q){const E=F.find(q=>{const N=q.schedule,Z=c.schedule;if(N.days.filter(ie=>Z.days.includes(ie)).length===0)return!1;const H=N.startTime,K=N.endTime,D=Z.startTime,O=Z.endTime,z=ie=>{const[he,ye]=ie.split(":").map(Number);return he*60+ye},L=z(H),C=z(K),V=z(D),W=z(O);return V<C&&W>L});a(`Time overlap detected with group "${E.groupName}". Please choose different times or days.`,"error"),m(!1);return}}n?await ve.update("groups",n.id,k):(await ve.create("groups",k),a("Group added successfully!","success")),s(),t()}catch(A){console.error("Error saving group:",A),a("Failed to save group.","error")}finally{m(!1)}};return r.jsx(tt,{isOpen:e,onClose:t,title:n?"Edit Group":"Add New Group",headerStyle:{backgroundColor:"#16A34A"},children:r.jsxs("form",{onSubmit:g,children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{label:"Group Name",name:"groupName",value:c.groupName,onChange:p,required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Color"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"color",name:"color",value:c.color,onChange:p,className:"w-12 h-12 rounded-xl border-2 border-gray-200 cursor-pointer shadow-sm hover:shadow-md transition-shadow duration-200",title:"Choose group color"}),r.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-white shadow-inner pointer-events-none",style:{backgroundColor:c.color}})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:c.color}}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.color.toUpperCase()})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"For calendar and dashboard display"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(pn,{label:"Start Date",name:"startDate",value:c.startDate,onChange:f=>x("startDate",f.target.value)}),r.jsx(On,{label:"Program Length (Weeks)",name:"programLength",value:c.programLength,onChange:p,children:[4,8,12,16,20,24,28,32,36,40,44,48].map(f=>r.jsxs("option",{value:f,children:[f," Weeks"]},f))})]}),c.endDate&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.CALENDAR,className:"w-5 h-5 text-blue-600 mr-2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Calculated End Date"}),r.jsx("p",{className:"text-sm text-blue-800",children:new Date(c.endDate).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Based on ",c.programLength," weeks, ",c.schedule.days.length," lessons per week (",c.schedule.days.join(", "),")"]})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(f=>r.jsx("button",{type:"button",onClick:()=>b(f),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${c.schedule.days.includes(f)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:f.substring(0,3)},f))}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx($n,{label:"Start Time",name:"startTime",value:c.schedule.startTime,onChange:v,options:i})}),r.jsx("div",{className:"pt-6 text-gray-500",children:"-"}),r.jsx("div",{className:"flex-1",children:r.jsx($n,{label:"End Time",name:"endTime",value:c.schedule.endTime,onChange:v,options:i})})]})]})]}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 rounded-lg text-white bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed",children:u?"Saving...":"Save Group"})]})]})})},$g={late_payment:{name:"Late Payment Message",content:"Sayn {studentName}, vade tarihi {dueDate} olan {amount} tutarnda denmemi {installmentCount} adet taksitiniz bulunmaktadr. deme yaptysanz ltfen bizimle iletiime gein. Sayglarmzla. - zel nl Dil ngilizce Kursu Ynetimi.",type:"late_payment"},absence:{name:"Student Absence Message",content:"Sayn velimiz, rencimiz {studentName}, {lessonDate} tarihindeki dersine katlmamtr. Sayglarmzla. - zel nl Dil ngilizce Kursu Ynetimi.",type:"absence"}},pd=()=>{try{const e=localStorage.getItem("messageTemplates");if(e)return JSON.parse(e)}catch(e){console.error("Error loading message templates:",e)}return $g},FN=e=>pd()[e]||$g[e],Ug=(e,t)=>{const n=FN(e);if(!n)return console.error(`Template not found for type: ${e}`),"";let s=n.content;return Object.keys(t).forEach(a=>{const i=`{${a}}`;s=s.replace(new RegExp(i,"g"),t[a]||"")}),s},zN=e=>{try{return localStorage.setItem("messageTemplates",JSON.stringify(e)),!0}catch(t){return console.error("Error saving message templates:",t),!1}},$N=({isOpen:e,onClose:t,lesson:n,studentsInGroup:s,student:a})=>{const{fetchData:i}=at(),[o,l]=I.useState({}),[c,d]=I.useState(!1);I.useEffect(()=>{if(n!=null&&n.attendance)l(n.attendance);else{const x={};s?s.forEach(b=>{x[b.id]="Absent"}):a&&(x[a.id]="Absent"),l(x)}},[n,s,a]);const u=(x,b)=>{l(g=>({...g,[x]:b}))},m=async x=>{x.preventDefault(),d(!0);try{await ve.update("lessons",n.id,{attendance:o}),i(),t()}catch(b){console.error("Error saving attendance: ",b)}finally{d(!1)}},h=s||(a?[a]:[]),p=(x,b,g)=>{if(g!=="Absent")return null;const f=new Date(b.lessonDate),y=b.startTime||"09:00",w=f.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}),_=y.split(":"),S=`${_[0]}:${_[1]}`;return Ug("absence",{studentName:x.fullName,lessonDate:w,lessonTime:S})},v=(x,b)=>{const g=p(x,n,b);navigator.clipboard.writeText(g).then(()=>{const f=document.createElement("div");f.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent=`Message copied to clipboard for ${x.fullName}`,document.body.appendChild(f),setTimeout(()=>{f.parentNode&&f.parentNode.removeChild(f)},3e3)}).catch(()=>{const f=document.createElement("textarea");f.value=g,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f);const y=document.createElement("div");y.className="fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",y.textContent=`Message copied to clipboard for ${x.fullName}`,document.body.appendChild(y),setTimeout(()=>{y.parentNode&&y.parentNode.removeChild(y)},3e3)})};return r.jsx(tt,{isOpen:e,onClose:t,title:"Log Attendance",headerStyle:{backgroundColor:"#0891B2"},children:r.jsxs("form",{onSubmit:m,children:[r.jsx(At,{title:"Mark Attendance",children:r.jsx("div",{className:"sm:col-span-6 grid grid-cols-1 gap-4",children:h.length>0?h.map(x=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[r.jsx("span",{className:"font-medium text-gray-800",children:x.fullName}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>u(x.id,"Present"),className:`px-3 py-1 rounded-md text-sm ${o[x.id]==="Present"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Present"}),r.jsx("button",{type:"button",onClick:()=>u(x.id,"Absent"),className:`px-3 py-1 rounded-md text-sm ${o[x.id]==="Absent"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Absent"}),o[x.id]==="Absent"&&r.jsx("button",{type:"button",onClick:()=>v(x,"Absent"),className:"px-2 py-1 rounded-md text-xs bg-blue-100 text-blue-700 hover:bg-blue-200",title:"Generate absence message",children:r.jsx(B,{path:T.MESSAGE,className:"w-3 h-3"})})]})]},x.id)):r.jsx("p",{className:"text-center text-gray-500",children:"No students to display attendance for."})})}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed",children:c?"Saving...":"Save Attendance"})]})]})})},UN=({isOpen:e,onClose:t,group:n,currentStudents:s,onStudentAdded:a})=>{const{fetchData:i}=at(),[o,l]=I.useState([]),[c,d]=I.useState([]),[u,m]=I.useState(""),[h,p]=I.useState(!1),[v,x]=I.useState(!1),[b,g]=I.useState(new Set);I.useEffect(()=>{e&&(async()=>{try{const k=await ve.getAll("students");l(k.map(A=>({...A,installments:typeof A.installments=="string"?JSON.parse(A.installments):A.installments||[],feeDetails:typeof A.feeDetails=="string"?JSON.parse(A.feeDetails):A.feeDetails||{},tutoringDetails:typeof A.tutoringDetails=="string"?JSON.parse(A.tutoringDetails):A.tutoringDetails||{},documents:typeof A.documents=="string"?JSON.parse(A.documents):A.documents||{},documentNames:typeof A.documentNames=="string"?JSON.parse(A.documentNames):A.documentNames||{}})))}catch(k){console.error("Error fetching students:",k)}})()},[e]),I.useEffect(()=>{if(e){const S=o.filter(k=>!k.groupId&&!k.isTutoring&&k.fullName.toLowerCase().includes(u.toLowerCase()));d(S)}},[e,o,u]);const f=async S=>{p(!0);try{await ve.update("students",S,{groupId:n.id}),await i(),m(""),t(),a&&a()}catch(k){console.error("Error adding student to group: ",k)}finally{p(!1)}},y=()=>{b.size===c.length?g(new Set):g(new Set(c.map(S=>S.id)))},w=S=>{const k=new Set(b);k.has(S)?k.delete(S):k.add(S),g(k)},_=async()=>{if(b.size!==0){p(!0);try{const S=Array.from(b).map(k=>ve.update("students",k,{groupId:n.id}));await Promise.all(S),await i(),g(new Set),m(""),t(),a&&a()}catch(S){console.error("Error adding students to group: ",S)}finally{p(!1)}}};return r.jsxs(tt,{isOpen:e,onClose:t,title:`Add Students to ${n==null?void 0:n.groupName}`,children:[r.jsxs("div",{className:"p-4 space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center",children:[r.jsx(B,{path:T.SEARCH,className:"w-5 h-5 mr-2 text-blue-600"}),"Find Existing Students"]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Search and add unassigned students to this group"}),r.jsx("input",{type:"text",placeholder:"Search for a student by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:S=>m(S.target.value)})]}),b.size>0&&r.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(B,{path:T.USERS,className:"w-5 h-5 text-blue-600"}),r.jsxs("span",{className:"text-blue-800 font-semibold",children:[b.size," student",b.size!==1?"s":""," selected"]})]}),r.jsx("button",{onClick:_,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-sm font-medium transition-colors",children:h?r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.LOADING,className:"w-4 h-4 mr-2 animate-spin"}),"Adding..."]}):r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.ADD,className:"w-4 h-4 mr-2"}),"Add ",b.size," Student",b.size!==1?"s":""]})})]})}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[r.jsx(B,{path:T.USERS,className:"w-5 h-5 mr-2 text-gray-600"}),"Available Students (",c.length,")"]})}),r.jsx("div",{className:"max-h-60 overflow-y-auto",children:c.length>0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center p-3 border-b border-gray-200 bg-gray-50 hover:bg-gray-100 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:b.size===c.length&&c.length>0,onChange:y,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All Students"})]}),c.map(S=>{var k,A;return r.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:b.has(S.id),onChange:()=>w(S.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold text-sm",style:{backgroundColor:S.color||"#3B82F6"},children:((A=(k=S.fullName)==null?void 0:k.charAt(0))==null?void 0:A.toUpperCase())||"S"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:S.fullName}),r.jsx("p",{className:"text-sm text-gray-500",children:S.studentContact})]})]})}),r.jsx("button",{onClick:()=>f(S.id),disabled:h,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 text-sm font-medium transition-colors",children:h?"Adding...":"Add"})]},S.id)})]}):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(B,{path:T.USERS,className:"w-6 h-6 text-gray-400"})}),r.jsx("p",{className:"text-gray-500 font-medium",children:"No unassigned students found"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"All students are already assigned to groups"})]})})]}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(B,{path:T.ADD,className:"w-5 h-5 text-green-600"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Create New Student"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enroll a completely new student and add them to this group"}),r.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 rounded-lg text-white bg-green-600 hover:bg-green-700 shadow-sm transition-colors font-medium",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),"Enroll New Student"]})]})]})})]}),v&&r.jsx(Au,{isOpen:v,onClose:()=>x(!1)})]})},BN=({isOpen:e,onClose:t,group:n})=>{var z;const{fetchData:s,students:a}=at(),[i,o]=I.useState([]),[l,c]=I.useState(null),[d,u]=I.useState(!1),[m,h]=I.useState(null),[p,v]=I.useState([]),[x,b]=I.useState(!1),[g,f]=I.useState(null),[y,w]=I.useState(null),[_,S]=I.useState(!1),[k,A]=I.useState(null),[F,R]=I.useState("students"),Q=async()=>{if(n!=null&&n.id){try{const C=(await ve.getAll("lessons")).filter(V=>V.groupId===n.id);v(C.sort((V,W)=>new Date(V.lessonDate)-new Date(W.lessonDate)))}catch(L){console.error("Error fetching lessons:",L)}try{const C=(await ve.getAll("students")).filter(V=>V.groupId===n.id);o(C)}catch(L){console.error("Error fetching students:",L)}}},E=L=>{const C=new Date;`${L.lessonDate}${L.startTime||"09:00"}`;const W=new Date(`${L.lessonDate}T${L.endTime||"10:00"}`)-C;if(L.status==="Complete")return{status:"completed",text:"Completed",color:"green",needsAttention:!1};if(W<0){const ie=Math.abs(Math.floor(W/864e5));return ie===0?{status:"overdue",text:"Overdue Today",color:"red",needsAttention:!0}:{status:"overdue",text:`${ie} Day${ie>1?"s":""} Overdue`,color:"red",needsAttention:!0}}else return{status:"upcoming",text:"Scheduled",color:"blue",needsAttention:!1}};I.useEffect(()=>{Q()},[n==null?void 0:n.id,e]);const q=L=>{h(L)},N=L=>{c(L)},Z=async()=>{if(l)try{await ve.update("students",l.id,{groupId:null}),c(null),s(),Q()}catch(L){console.error("Error removing student from group: ",L)}},Y=L=>{f(L),b(!0)},H=async L=>{try{await ve.delete("lessons",L.id),s(),Q()}catch(C){console.error("Error deleting lesson: ",C)}},K=L=>{A(L),S(!0)},D=()=>{R("students"),t()},O=r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white",style:{backgroundColor:(n==null?void 0:n.color)||"#3B82F6"},children:r.jsx(B,{path:T.GROUPS,className:"w-6 h-6"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:n==null?void 0:n.groupName}),r.jsxs("div",{className:"flex items-center space-x-4 text-white/90 text-sm",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.USERS,className:"w-4 h-4 mr-1"}),i.length," Student",i.length!==1?"s":""]}),(n==null?void 0:n.schedule)&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 mr-1"}),(z=n.schedule.days)==null?void 0:z.join(", "),"  ",n.schedule.startTime," - ",n.schedule.endTime]})]})]})]});return r.jsxs(r.Fragment,{children:[r.jsx(tt,{isOpen:e,onClose:D,title:O,headerStyle:{backgroundColor:(n==null?void 0:n.color)||"#3B82F6"},children:r.jsxs("div",{className:"bg-white",children:[r.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:r.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>R("students"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${F==="students"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(B,{path:T.USERS,className:"w-4 h-4"}),r.jsxs("span",{children:["Students (",i.length,")"]})]})}),r.jsx("button",{onClick:()=>R("lessons"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${F==="lessons"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(B,{path:T.CALENDAR_CHECK,className:"w-4 h-4"}),r.jsxs("span",{children:["Lessons (",p.length,")"]})]})})]})}),r.jsxs("div",{className:"p-6",children:[F==="students"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Add Students"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Add new students to this group or create new ones"})]}),r.jsxs("button",{onClick:()=>u(!0),className:"flex items-center px-4 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 shadow-sm transition-all duration-200 hover:shadow-md",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),"Add Student"]})]})}),i.length>0?r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Group Members"}),r.jsx("div",{className:"grid gap-3",children:i.map(L=>{var C,V;return r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all duration-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-sm",style:{backgroundColor:L.color||"#3B82F6"},children:((V=(C=L.fullName)==null?void 0:C.charAt(0))==null?void 0:V.toUpperCase())||"S"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800 text-base",children:L.fullName}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.PHONE,className:"w-3 h-3 mr-1"}),L.studentContact]}),L.nationalId&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.ID_CARD,className:"w-3 h-3 mr-1"}),L.nationalId]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>q(L),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:r.jsx(B,{path:T.EYE,className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>N(L),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Remove from Group",children:r.jsx(B,{path:T.USER_MINUS,className:"w-5 h-5"})})]})]})},L.id)})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(B,{path:T.USERS,className:"w-8 h-8 text-gray-400"})}),r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Students Yet"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"This group doesn't have any students yet. Add some students to get started!"}),r.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 shadow-sm transition-colors",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),"Add First Student"]})]})]}),F==="lessons"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Manage Lessons"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Log new lessons or manage existing ones"})]}),r.jsxs("button",{onClick:()=>Y(null),className:"flex items-center px-4 py-2 rounded-lg text-white bg-green-600 hover:bg-green-700 shadow-sm transition-all duration-200 hover:shadow-md",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),"Log New Lesson"]})]})}),p.length>0?r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"All Lessons"}),r.jsx("div",{className:"grid gap-3",children:p.map(L=>{const C=E(L);return r.jsx("div",{className:`bg-white border rounded-lg p-4 hover:shadow-sm transition-all duration-200 ${C.needsAttention?"border-red-200 bg-red-50":C.status==="completed"?"border-green-200 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${C.needsAttention?"bg-red-100":(C.status==="completed","bg-green-100")}`,children:r.jsx(B,{path:C.needsAttention?T.WARNING:T.CALENDAR_CHECK,className:`w-5 h-5 ${C.needsAttention?"text-red-600":(C.status==="completed","text-green-600")}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("p",{className:"font-semibold text-gray-800 text-base",children:L.topic}),C.needsAttention&&r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Needs Attendance"}),C.status==="completed"&&r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Completed"})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.CALENDAR,className:"w-3 h-3 mr-1"}),He(L.lessonDate,"long")]}),L.startTime&&L.endTime&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(B,{path:T.CLOCK,className:"w-3 h-3 mr-1"}),L.startTime," - ",L.endTime]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[C.needsAttention&&r.jsx("button",{onClick:()=>K(L),className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors",children:"Log Attendance"}),!C.needsAttention&&L.status!=="Complete"&&r.jsx("button",{onClick:()=>K(L),className:"px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors",children:"Attendance"}),r.jsx("button",{onClick:()=>Y(L),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Lesson",children:r.jsx(B,{path:T.EDIT,className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>w(L),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Lesson",children:r.jsx(B,{path:T.TRASH,className:"w-5 h-5"})})]})]})},L.id)})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(B,{path:T.CALENDAR_CHECK,className:"w-8 h-8 text-gray-400"})}),r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Lessons Yet"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"This group doesn't have any lessons logged yet. Start by logging your first lesson!"}),r.jsxs("button",{onClick:()=>Y(null),className:"inline-flex items-center px-4 py-2 rounded-lg text-white bg-green-600 hover:bg-green-700 shadow-sm transition-colors",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),"Log First Lesson"]})]})]})]})]})}),l&&r.jsx(nn,{isOpen:!!l,onClose:()=>c(null),onConfirm:Z,title:"Remove Student",message:`Are you sure you want to remove ${l.fullName} from this group?`}),y&&r.jsx(nn,{isOpen:!!y,onClose:()=>w(null),onConfirm:()=>H(y),title:"Delete Lesson",message:`Are you sure you want to delete the lesson "${y.topic}"? This action cannot be undone.`}),r.jsx(UN,{isOpen:d,onClose:()=>u(!1),group:n,onStudentAdded:()=>{s(),Q()}}),m&&r.jsx(zg,{isOpen:!!m,onClose:()=>h(null),student:m}),r.jsx(Iu,{isOpen:x,onClose:()=>b(!1),lessonToEdit:g,group:n,onLessonSaved:Q}),k&&r.jsx($N,{isOpen:_,onClose:()=>S(!1),lesson:k,studentsInGroup:i,onAttendanceSaved:Q})]})},WN=()=>{const{showNotification:e}=Xe(),{groups:t,students:n,lessons:s,fetchData:a,loading:i}=at(),[o,l]=I.useState(!1),[c,d]=I.useState(null),[u,m]=I.useState(!1),[h,p]=I.useState(null),[v,x]=I.useState(!1),[b,g]=I.useState(null),[f,y]=I.useState(!1),[w,_]=I.useState(!1),[S,k]=I.useState(new Set),[A,F]=I.useState(!1),[R,Q]=I.useState({current:0,total:0,currentGroup:"",status:""}),[E,q]=I.useState({current:0,total:0,status:""}),[N,Z]=I.useState("generate"),[Y,H]=I.useState(new Set),[K,D]=I.useState(!1),[O,z]=I.useState({deleteByDateRange:!1,deleteByGroup:!1,startDate:"",endDate:""}),L=()=>{const X=new Date;return(s==null?void 0:s.filter(P=>new Date(`${P.lessonDate}T${P.endTime||"10:00"}`)<X&&P.status==="Complete"&&(!P.attendance||Object.keys(P.attendance).length===0)))||[]},C=()=>{const X=new Date,P=new Date().toISOString().split("T")[0];return(s==null?void 0:s.filter(le=>{const ge=new Date(le.lessonDate).toISOString().split("T")[0],pe=new Date(`${le.lessonDate}T${le.endTime||"10:00"}`);return ge===P&&pe<X&&le.status==="Complete"&&(!le.attendance||Object.keys(le.attendance).length===0)}))||[]},V=(t==null?void 0:t.filter(X=>X.isArchived))||[],W=(t==null?void 0:t.filter(X=>!X.isArchived))||[],ie=()=>{d(null),l(!0)},he=X=>{d(X),l(!0)},ye=X=>{p(X),m(!0)},be=X=>{g(X),x(!0)},oe=async()=>{if(b)try{const P=(await ve.getAll("lessons")).filter(pe=>pe.groupId===b.id),le=10;for(let pe=0;pe<P.length;pe+=le){const Ce=P.slice(pe,pe+le);await Promise.all(Ce.map(ze=>ve.delete("lessons",ze.id)))}f?(await ve.delete("groups",b.id),e("Group and all associated lessons permanently deleted!","success")):(await ve.update("groups",b.id,{isArchived:!0}),e("Group archived and all associated lessons deleted!","success"));const ge=n.filter(pe=>pe.groupId===b.id);for(const pe of ge)await ve.update("students",pe.id,{groupId:null});a()}catch(X){console.error("Error deleting/archiving group:",X),e("Error processing group deletion/archiving.","error")}finally{x(!1),g(null)}},de=async X=>{try{await ve.update("groups",X.id,{isArchived:!1}),e("Group unarchived successfully!","success"),a()}catch(P){console.error("Error unarchiving group:",P),e("Error unarchiving group.","error")}},De=X=>{var P;return((P=n==null?void 0:n.filter(le=>le.groupId===X))==null?void 0:P.length)||0},Se=(X,P)=>{const le=new Set(S);P?le.add(X):le.delete(X),k(le)},j=()=>{const X=W.map(P=>P.id);k(new Set(X))},ae=()=>{k(new Set)},J=async()=>{if(S.size===0){e("Please select at least one group to generate lessons for.","warning");return}F(!0);let X=0;try{const P=W.filter(ge=>S.has(ge.id));let le=0;for(const ge of P){const pe=ge.endDate||new Date(Date.now()+7776e6).toISOString().split("T")[0],Ce=No(ge,ge.startDate,pe);le+=Ce.length}Q({current:0,total:le,currentGroup:"",status:"Starting lesson generation..."});for(const ge of P){Q(ze=>({...ze,currentGroup:ge.groupName,status:`Generating lessons for ${ge.groupName}...`}));const pe=ge.endDate||new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],Ce=No(ge,ge.startDate,pe);for(const ze of Ce)try{await ve.create("lessons",ze),X++,Q(Oe=>({...Oe,current:X,status:`Created lesson ${X} of ${le}`}))}catch(Oe){console.error("Error creating lesson:",Oe)}}Q(ge=>({...ge,status:"Lesson generation completed!"})),e(`Successfully generated ${X} lessons!`,"success"),_(!1),k(new Set),a()}catch(P){console.error("Error generating lessons:",P),e("Failed to generate lessons. Please try again.","error")}finally{F(!1),Q({current:0,total:0,currentGroup:"",status:""})}},U=(X,P)=>{H(le=>{const ge=new Set(le);return P?ge.add(X):ge.delete(X),ge})},$=()=>{H(new Set(W.map(X=>X.id)))},G=()=>{H(new Set),z({deleteByDateRange:!1,deleteByGroup:!1,startDate:"",endDate:""})},te=()=>{_(!1),Z("generate"),ae(),G(),Q({current:0,total:0,currentGroup:"",status:""}),q({current:0,total:0,status:""})},ne=()=>{if(!O.deleteByGroup&&!O.deleteByDateRange)return[];let X=[...s];if(O.deleteByGroup&&Y.size>0&&(X=X.filter(P=>P.groupId&&Y.has(P.groupId))),O.deleteByDateRange&&O.startDate&&O.endDate){const P=new Date(O.startDate),le=new Date(O.endDate);X=X.filter(ge=>{const pe=new Date(ge.lessonDate);return pe>=P&&pe<=le})}return X},ee=async()=>{const X=ne();if(X.length===0){e("No lessons match the selected criteria.","warning");return}D(!0),q({current:0,total:X.length,status:"Starting lesson deletion..."});try{let P=0;const le=X.length,ge=10;for(let pe=0;pe<X.length;pe+=ge){const Ce=X.slice(pe,pe+ge);q(ze=>({...ze,status:`Deleting batch ${Math.floor(pe/ge)+1} of ${Math.ceil(le/ge)}...`}));for(const ze of Ce)try{await ve.delete("lessons",ze.id),P++,q(Oe=>({...Oe,current:P,status:`Deleted lesson ${P} of ${le}`}))}catch(Oe){console.error("Error deleting lesson:",Oe)}pe+ge<X.length&&await new Promise(ze=>setTimeout(ze,100))}q(pe=>({...pe,status:"Lesson deletion completed!"})),e(`Successfully deleted ${P} out of ${le} lessons!`,"success"),_(!1),H(new Set),z({deleteByDateRange:!1,deleteByGroup:!1,startDate:"",endDate:""}),a()}catch(P){console.error("Error deleting lessons:",P),e("Failed to delete lessons. Please try again.","error")}finally{D(!1),q({current:0,total:0,status:""})}},ue=f?V:W;return r.jsxs("div",{className:"relative p-4 md:p-8 bg-gray-50 rounded-lg shadow-lg",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center shadow-sm mr-4",children:r.jsx(B,{path:T.GROUPS,className:"w-7 h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Groups"}),r.jsx("p",{className:"text-gray-600 text-sm lg:text-base",children:"Manage student groups and schedules"})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{onClick:ie,className:"flex items-center px-6 py-3 rounded-lg text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 shadow-sm",children:[r.jsx(B,{path:T.ADD,className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-semibold",children:"Add Group"})]}),r.jsxs("button",{onClick:()=>_(!0),className:"flex items-center px-6 py-3 rounded-lg text-white bg-teal-600 hover:bg-teal-700 transition-all duration-300 shadow-sm",children:[r.jsx(B,{path:T.LESSON,className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-semibold",children:"Manage Lessons"})]})]})]})}),(()=>{const X=L(),P=C();return X.length>0||P.length>0?r.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-6 h-6 text-red-600 mr-3 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Lesson Attendance Required"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[X.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-red-800",children:[r.jsx(B,{path:T.CLOCK,className:"w-4 h-4 mr-2"}),r.jsxs("span",{className:"font-medium",children:[X.length," completed lesson(s) missing attendance"]})]}),r.jsxs("div",{className:"ml-6 space-y-1",children:[X.slice(0,3).map((le,ge)=>{const pe=t==null?void 0:t.find(Ce=>Ce.id===le.groupId);return r.jsxs("div",{className:"text-xs text-red-700 bg-red-100 px-2 py-1 rounded",children:[" ",(pe==null?void 0:pe.groupName)||"Unknown Group"," - ",le.topic," (",He(le.lessonDate),")"]},ge)}),X.length>3&&r.jsxs("div",{className:"text-xs text-red-700 bg-red-100 px-2 py-1 rounded",children:[" ... and ",X.length-3," more lessons missing attendance"]})]})]}),P.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-orange-800",children:[r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 mr-2"}),r.jsxs("span",{className:"font-medium",children:[P.length," completed lesson(s) from today missing attendance"]})]}),r.jsxs("div",{className:"ml-6 space-y-1",children:[P.slice(0,3).map((le,ge)=>{const pe=t==null?void 0:t.find(Ce=>Ce.id===le.groupId);return r.jsxs("div",{className:"text-xs text-orange-700 bg-orange-100 px-2 py-1 rounded",children:[" ",(pe==null?void 0:pe.groupName)||"Unknown Group"," - ",le.topic," (",le.startTime||"TBD",")"]},ge)}),P.length>3&&r.jsxs("div",{className:"text-xs text-orange-700 bg-orange-100 px-2 py-1 rounded",children:[" ... and ",P.length-3," more today missing attendance"]})]})]})]})]})]})}):null})(),r.jsx("div",{className:"mb-6 bg-white rounded-lg p-1 shadow-sm",children:r.jsxs("nav",{className:"flex space-x-1","aria-label":"Tabs",children:[r.jsxs("button",{onClick:()=>y(!1),className:`flex-1 px-4 py-3 font-medium text-sm rounded-lg transition-all duration-300 ${f?"text-gray-600 hover:text-gray-800 hover:bg-gray-100":"bg-purple-600 text-white shadow-sm"}`,children:["Active Groups (",W.length,")"]}),r.jsxs("button",{onClick:()=>y(!0),className:`flex-1 px-4 py-3 font-medium text-sm rounded-lg transition-all duration-300 ${f?"bg-purple-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:["Archived Groups (",V.length,")"]})]})}),i?r.jsx("p",{className:"text-center text-gray-500",children:"Loading groups..."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ue.length>0?ue.map(X=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 group cursor-pointer",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",style:{backgroundColor:X.color},children:r.jsx(B,{path:T.GROUPS,className:"w-7 h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:X.groupName}),r.jsxs("div",{className:"space-y-3 mb-6",children:[X.schedule&&X.schedule.days&&X.schedule.days.length>0&&r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 mr-2 text-gray-600"}),r.jsxs("span",{children:[X.schedule.days.join(", "),": ",X.schedule.startTime," - ",X.schedule.endTime]})]}),X.startDate&&X.endDate&&r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.CALENDAR_CHECK,className:"w-4 h-4 mr-2 text-gray-600"}),r.jsxs("span",{children:[He(X.startDate)," - ",He(X.endDate)]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(B,{path:T.USERS,className:"w-4 h-4 mr-2"}),r.jsxs("span",{className:"font-medium",children:[De(X.id)," Student",De(X.id)!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx("button",{onClick:P=>{P.stopPropagation(),ye(X)},className:"p-2 text-gray-600 hover:text-blue-800 rounded-full hover:bg-blue-50 transition-colors",children:r.jsx(B,{path:T.INFO,className:"w-5 h-5"})}),r.jsx("button",{onClick:P=>{P.stopPropagation(),he(X)},className:"p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50 transition-colors",children:r.jsx(B,{path:T.EDIT,className:"w-5 h-5"})}),!f&&r.jsx("button",{onClick:P=>{P.stopPropagation(),be(X)},className:"p-2 text-orange-600 hover:text-orange-800 rounded-full hover:bg-orange-50 transition-colors",children:r.jsx(B,{path:T.ARCHIVE,className:"w-5 h-5"})}),f&&r.jsx("button",{onClick:P=>{P.stopPropagation(),de(X)},className:"p-2 text-green-600 hover:text-green-800 rounded-full hover:bg-green-50 transition-colors",children:r.jsx(B,{path:T.BOX_OPEN,className:"w-5 h-5"})}),f&&r.jsx("button",{onClick:P=>{P.stopPropagation(),be(X)},className:"p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50 transition-colors",children:r.jsx(B,{path:T.TRASH,className:"w-5 h-5"})})]})]})]},X.id)):r.jsx("p",{className:"text-center text-gray-500 col-span-full",children:"No groups found in this category."})}),r.jsx(RN,{isOpen:o,onClose:()=>l(!1),groupToEdit:c}),h&&r.jsx(BN,{isOpen:u,onClose:()=>m(!1),group:h,students:n.filter(X=>X.groupId===h.id)}),b&&r.jsx(nn,{isOpen:v,onClose:()=>x(!1),onConfirm:oe,title:"Delete Group",message:`Are you sure you want to ${f?"permanently delete":"archive"} the group "${b.groupName}"? ${f?"This action cannot be undone.":"This will also unassign all students from this group."}`}),w&&r.jsx(tt,{isOpen:w,onClose:te,title:"Manage Lessons",headerStyle:{backgroundColor:N==="generate"?"#0D9488":"#DC2626"},children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex space-x-4 mb-4",children:[r.jsx("button",{onClick:()=>Z("generate"),className:`flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-300 ${N==="generate"?"bg-teal-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:"Generate Lessons"}),r.jsx("button",{onClick:()=>Z("delete"),className:`flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-300 ${N==="delete"?"bg-red-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:"Delete Lessons"})]}),N==="generate"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Generate Lessons"}),r.jsx("p",{className:"text-sm text-blue-800",children:"This will automatically generate lessons for selected groups based on their existing schedules. Lessons will be created from the group's start date until their end date (or 3 months from now if no end date is set)."})]})]})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Groups"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:j,className:"px-3 py-1 text-sm bg-teal-100 text-teal-700 rounded-md hover:bg-teal-200 transition-colors",children:"Select All"}),r.jsx("button",{onClick:ae,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Clear All"})]})]}),r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:W.map(X=>{var P,le,ge,pe;return r.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:S.has(X.id),onChange:Ce=>Se(X.id,Ce.target.checked),className:"w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500"}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("span",{className:"font-medium text-gray-900",children:X.groupName})}),r.jsxs("div",{className:"text-sm text-gray-600",children:[(le=(P=X.schedule)==null?void 0:P.days)==null?void 0:le.join(", "),"  ",(ge=X.schedule)==null?void 0:ge.startTime," - ",(pe=X.schedule)==null?void 0:pe.endTime]})]})]},X.id)})})]}),A&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Generating Lessons"}),r.jsxs("span",{className:"text-sm text-blue-700",children:[R.current," / ",R.total]})]}),r.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:R.total>0?`${R.current/R.total*100}%`:"0%"}})}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium",children:R.status}),R.currentGroup&&r.jsxs("p",{className:"text-blue-700 mt-1",children:["Current group: ",R.currentGroup]})]})]})}),S.size>0&&!A&&r.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-teal-600 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-teal-900 mb-1",children:"Lesson Count"}),r.jsxs("p",{className:"text-sm text-teal-800",children:[(()=>{let X=0;return W.forEach(P=>{var le;if(S.has(P.id)){const ge=P.startDate?new Date(P.startDate):new Date,pe=P.endDate?new Date(P.endDate):new Date(Date.now()+90*24*60*60*1e3),Ce=((le=P.schedule)==null?void 0:le.days)||[];if(Ce.length>0){const ze=Math.ceil((pe-ge)/864e5),Oe=Math.ceil(ze/7),pt=Ce.length;X+=Oe*pt}}}),X})()," lessons will be generated for ",S.size," selected group",S.size>1?"s":"","."]})]})]})}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[!A&&r.jsx("button",{onClick:te,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:J,disabled:A||S.size===0,className:"px-6 py-2 rounded-lg text-white bg-teal-600 hover:bg-teal-700 disabled:bg-teal-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[A&&r.jsx(B,{path:T.LOADING,className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:A?`Generating... (${R.current}/${R.total})`:"Generate Lessons"})]})]})]}),N==="delete"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 text-red-600 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-red-900 mb-1",children:"Delete Lessons"}),r.jsx("p",{className:"text-sm text-red-800",children:"This will permanently delete lessons based on your selected criteria. This action cannot be undone."})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:O.deleteByGroup,onChange:X=>z(P=>({...P,deleteByGroup:X.target.checked})),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Delete by Group"})]}),O.deleteByGroup&&r.jsxs("div",{className:"mt-4 ml-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Select Groups"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:$,className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:"Select All"}),r.jsx("button",{onClick:G,className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:"Clear All"})]})]}),r.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:W.map(X=>r.jsxs("label",{className:"flex items-center p-2 border border-gray-200 rounded hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:Y.has(X.id),onChange:P=>U(X.id,P.target.checked),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),r.jsx("div",{className:"ml-2 flex-1",children:r.jsx("div",{className:"flex items-center",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:X.groupName})})})]},X.id))})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:O.deleteByDateRange,onChange:X=>z(P=>({...P,deleteByDateRange:X.target.checked})),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Delete by Date Range"})]}),O.deleteByDateRange&&r.jsxs("div",{className:"mt-4 ml-6 space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),r.jsx("input",{type:"date",value:O.startDate,onChange:X=>z(P=>({...P,startDate:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),r.jsx("input",{type:"date",value:O.endDate,onChange:X=>z(P=>({...P,endDate:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})]})]}),(()=>{const X=ne();return X.length>0?r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Lessons to be deleted"}),r.jsxs("p",{className:"text-sm text-yellow-800",children:[X.length," lesson(s) will be deleted based on your criteria."]}),O.deleteByGroup&&Y.size>0&&r.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:["Groups: ",Y.size," selected"]}),O.deleteByDateRange&&O.startDate&&O.endDate&&r.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:["Date range: ",O.startDate," to ",O.endDate]})]})]})}):null})(),K&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-red-900",children:"Deleting Lessons"}),r.jsxs("span",{className:"text-sm text-red-700",children:[E.current," / ",E.total]})]}),r.jsx("div",{className:"w-full bg-red-200 rounded-full h-2",children:r.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:E.total>0?`${E.current/E.total*100}%`:"0%"}})}),r.jsx("div",{className:"text-sm text-red-800",children:r.jsx("p",{className:"font-medium",children:E.status})})]})}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[!K&&r.jsx("button",{onClick:()=>_(!1),className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:ee,disabled:K||ne().length===0,className:"px-6 py-2 rounded-lg text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[K&&r.jsx(B,{path:T.LOADING,className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:K?`Deleting... (${E.current}/${E.total})`:"Delete Lessons"})]})]})]})]})})]})},GN=({onDateChange:e,initialRange:t})=>{const[n,s]=I.useState("this-month"),[a,i]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState({startDate:null,endDate:null}),u=p=>{let v,x;const b=new Date;switch(p){case"this-month":v=Ss(b),x=js(b);break;case"last-3-months":v=Ss(da(b,2)),x=js(b);break;case"last-6-months":v=Ss(da(b,5)),x=js(b);break;case"ytd":v=md(b),x=b;break;case"last-year":const f=b.getFullYear()-1;v=new Date(f,0,1),x=new Date(f,11,31);break;default:v=Ss(b),x=js(b)}const g={startDate:v,endDate:x};d(g),e(g)},m=()=>{if(a&&o){const p={startDate:new Date(a),endDate:new Date(o)};d(p),e(p)}};I.useEffect(()=>{if(t){d(t);const p=new Date,v=Ss(p),x=js(p),b=Ss(da(p,2)),g=js(p),f=Ss(da(p,5)),y=js(p),w=md(p),_=p,S=new Date(p.getFullYear()-1,0,1),k=new Date(p.getFullYear()-1,11,31),A=(F,R)=>!F||!R?!1:F.getFullYear()===R.getFullYear()&&F.getMonth()===R.getMonth()&&F.getDate()===R.getDate();t!=null&&t.startDate&&(t!=null&&t.endDate)?A(t.startDate,v)&&A(t.endDate,x)?s("this-month"):A(t.startDate,b)&&A(t.endDate,g)?s("last-3-months"):A(t.startDate,f)&&A(t.endDate,y)?s("last-6-months"):A(t.startDate,w)&&A(t.endDate,_)?s("ytd"):A(t.startDate,S)&&A(t.endDate,k)?s("last-year"):(s("custom"),i(Ke(t.startDate,"yyyy-MM-dd")),l(Ke(t.endDate,"yyyy-MM-dd"))):u("this-month")}else u("this-month")},[t]);const h=(p,v)=>{if(!p||!v)return"";const x=Ke(p,"d"),b=Ke(v,"d"),g=Ke(p,"MMMM"),f=Ke(v,"MMMM"),y=Ke(p,"yyyy"),w=Ke(v,"yyyy");return g===f&&y===w?`${x}-${b} ${g} ${y}`:y===w?`${x} ${g} - ${b} ${f} ${y}`:`${x} ${g} ${y} - ${b} ${f} ${w}`};return r.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-white rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:c.startDate&&c.endDate?h(c.startDate,c.endDate):"Select date range"})]}),r.jsxs("select",{value:n,onChange:p=>{const v=p.target.value;s(v),v!=="custom"&&u(v)},className:"p-2 border border-gray-300 rounded-md text-sm",children:[r.jsx("option",{value:"this-month",children:"This Month"}),r.jsx("option",{value:"last-3-months",children:"Last 3 Months"}),r.jsx("option",{value:"last-6-months",children:"Last 6 Months"}),r.jsx("option",{value:"ytd",children:"Year to Date"}),r.jsx("option",{value:"last-year",children:"Last Year"}),r.jsx("option",{value:"custom",children:"Custom Range"})]}),n==="custom"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",value:a,onChange:p=>i(p.target.value),className:"p-2 border border-gray-300 rounded-md text-sm"}),r.jsx("span",{className:"text-sm text-gray-500",children:"to"}),r.jsx("input",{type:"date",value:o,onChange:p=>l(p.target.value),className:"p-2 border border-gray-300 rounded-md text-sm"}),r.jsx("button",{onClick:m,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",title:"Apply custom date range",children:r.jsx(B,{path:T.CHECK,className:"w-4 h-4"})})]})]})},sa=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Bg=({isOpen:e,onClose:t,student:n,newlyPaidInstallment:s})=>{const{showNotification:a}=Xe(),{students:i}=at(),[o,l]=I.useState(null),[c,d]=I.useState({studentId:"",invoiceNumber:`UDL-${Date.now()}`,issueDate:new Date().toISOString().split("T")[0],paymentDate:new Date().toISOString().split("T")[0],items:[],notes:"",terms:"Bu fatura deme alndktan sonra dzenlenmitir."}),[u,m]=I.useState([]),[h,p]=I.useState(!1);I.useEffect(()=>{if(e)if(n){const k=i.find(F=>F.id===n.id)||n;if(l(k),s)m([s]);else{let F=k.installments;if(typeof F=="string")try{F=JSON.parse(F)}catch(Q){console.error("Error parsing installments for student:",k.id,Q),F=[]}Array.isArray(F)||(F=[]);const R=F.filter(Q=>Q.status==="Paid").map(Q=>Q.number)||[];m(R)}let A=k.installments;if(typeof A=="string")try{A=JSON.parse(A)}catch(F){console.error("Error parsing installments for student:",k.id,F),A=[]}Array.isArray(A)||(A=[]),d(F=>({...F,studentId:k.id,invoiceNumber:`UDL-${Date.now()}`,items:A.filter(R=>R.status==="Paid").map(R=>({description:`Taksit ${R.number} - ${He(new Date(R.dueDate),"dd/MM/yyyy")}`,quantity:1,unitPrice:R.amount,amount:R.amount}))||[]}))}else l(null),m([]),d({studentId:"",invoiceNumber:`UDL-${Date.now()}`,issueDate:new Date().toISOString().split("T")[0],paymentDate:new Date().toISOString().split("T")[0],items:[],notes:"",terms:"Bu fatura deme alndktan sonra dzenlenmitir."})},[e,n,s,i]);const v=S=>{const{name:k,value:A}=S.target;if(d(F=>({...F,[k]:A})),k==="studentId"){const F=i.find(R=>R.id===A);l(F),m([]),F&&d(R=>({...R,items:[]}))}},x=(S,k)=>{m(k?A=>[...A,S]:A=>A.filter(F=>F!==S))},b=()=>{if(!o)return;const k=(typeof o.installments=="string"?JSON.parse(o.installments):o.installments).filter(A=>u.includes(A.number)).filter(A=>A.status==="Paid").map(A=>({description:`Taksit ${A.number} - ${He(new Date(A.dueDate),"dd/MM/yyyy")}`,quantity:1,unitPrice:A.amount,amount:A.amount}));d(A=>({...A,items:k}))};I.useEffect(()=>{b()},[u,o]);const g=()=>{d(S=>({...S,items:[...S.items,{description:"",quantity:1,unitPrice:0,amount:0}]}))},f=S=>{d(k=>({...k,items:k.items.filter((A,F)=>F!==S)}))},y=(S,k,A)=>{d(F=>({...F,items:F.items.map((R,Q)=>{if(Q===S){const E={...R,[k]:A};return(k==="quantity"||k==="unitPrice")&&(E.amount=E.quantity*E.unitPrice),E}return R})}))},w=()=>c.items.reduce((S,k)=>S+k.amount,0),_=async()=>{p(!0);try{const k=(Q=>Q.replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"i").replace(//g,"I").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C"))((o==null?void 0:o.fullName)||"Unknown").replace(/[^a-zA-Z\s]/g,"").trim().replace(/\s+/g,"_"),A=c.invoiceNumber.replace(/[^a-zA-Z0-9]/g,""),F=`${k}_Invoice_${A}.pdf`,R=window.open("","_blank");R.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${F}</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            margin: 0; 
                            padding: 15px; 
                            background: white;
                            line-height: 1.3;
                        }
                        
                        /* Header styling */
                        .header {
                            text-align: center;
                            margin-bottom: 20px;
                            border-bottom: 2px solid #1f2937;
                            padding-bottom: 15px;
                        }
                        
                        .header h1 {
                            margin: 0;
                            font-size: 18px;
                            font-weight: bold;
                            color: #1f2937;
                            text-transform: uppercase;
                        }
                        
                        .header h2 {
                            margin: 5px 0 0 0;
                            font-size: 14px;
                            color: #6b7280;
                        }
                        
                        /* Two column layout */
                        .content {
                            display: flex;
                            gap: 20px;
                        }
                        
                        .left-column, .right-column {
                            flex: 1;
                        }
                        
                        /* Section headers */
                        .section-header {
                            font-size: 12px;
                            font-weight: bold;
                            color: #374151;
                            margin: 0 0 8px 0;
                            text-transform: uppercase;
                            border-bottom: 1px solid #d1d5db;
                            padding-bottom: 4px;
                        }
                        
                        /* Grid layouts */
                        .grid {
                            margin: 8px 0;
                        }
                        
                        .grid-cols-1 > div {
                            display: flex;
                            justify-content: space-between;
                            margin: 2px 0;
                            font-size: 10px;
                        }
                        
                        .grid-cols-3 {
                            display: grid;
                            grid-template-columns: 1fr 1fr 1fr;
                            gap: 8px;
                        }
                        
                        .grid-cols-3 > div {
                            background: #f8f9fa;
                            border: 1px solid #ddd;
                            padding: 6px;
                            text-align: center;
                            font-size: 10px;
                        }
                        
                        /* Table styling */
                        table {
                            width: 100%;
                            border-collapse: collapse;
                            margin: 8px 0;
                            font-size: 9px;
                        }
                        
                        table th {
                            background: #f1f5f9;
                            color: #1f2937;
                            font-weight: bold;
                            padding: 4px 6px;
                            border: 1px solid #cbd5e1;
                            text-align: center;
                        }
                        
                        table td {
                            border: 1px solid #cbd5e1;
                            padding: 4px 6px;
                            text-align: center;
                        }
                        
                        /* Payment status */
                        .payment-status {
                            background: #dcfce7;
                            color: #166534;
                            padding: 8px;
                            border-radius: 4px;
                            margin: 8px 0;
                            text-align: center;
                            font-weight: bold;
                            font-size: 10px;
                        }
                        
                        /* Total amount */
                        .total-amount {
                            background: #dbeafe;
                            color: #1e40af;
                            padding: 8px;
                            border-radius: 4px;
                            margin: 8px 0;
                            text-align: center;
                            font-weight: bold;
                            font-size: 12px;
                        }
                        
                        /* Notes section */
                        .notes-section {
                            background: #fffbeb;
                            border: 1px solid #fde68a;
                            padding: 8px;
                            margin: 8px 0;
                            font-size: 10px;
                        }
                        
                        /* Signature section */
                        .signature-section {
                            margin-top: 25px;
                            padding-top: 20px;
                        }
                        
                        .signature-box {
                            display: flex;
                            justify-content: space-between;
                        }
                        
                        .signature-item {
                            text-align: center;
                            flex: 1;
                        }
                        
                        .signature-line {
                            border-bottom: 2px solid #9ca3af;
                            margin-bottom: 10px;
                            min-height: 60px;
                        }
                        
                        /* Text utilities */
                        .text-xs { font-size: 9px; }
                        .text-sm { font-size: 11px; }
                        .text-lg { font-size: 14px; }
                        .font-bold { font-weight: bold; }
                        .font-medium { font-weight: 500; }
                        .text-center { text-align: center; }
                        .text-right { text-align: right; }
                        .text-left { text-align: left; }
                        
                        /* Colors */
                        .text-gray-900 { color: #111827; }
                        .text-gray-600 { color: #4b5563; }
                        .text-gray-500 { color: #6b7280; }
                        .text-gray-700 { color: #374151; }
                        
                        /* Spacing */
                        .mb-1 { margin-bottom: 4px; }
                        .mb-2 { margin-bottom: 8px; }
                        .mb-4 { margin-bottom: 15px; }
                        .mt-4 { margin-top: 15px; }
                        .p-2 { padding: 8px; }
                        .p-3 { padding: 12px; }
                        
                        /* Prevent page breaks */
                        table { page-break-inside: avoid; }
                        .content { page-break-inside: avoid; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>FATURA</h1>
                        <h2>${c.invoiceNumber}</h2>
                    </div>
                    
                    <div class="payment-status">
                        DEME ALINDI - PAID
                    </div>
                    
                    <div class="content">
                        <div class="left-column">
                            <!-- Student Information -->
                            <div class="mb-4">
                                <h3 class="section-header">RENC BLGLER</h3>
                                <div class="grid grid-cols-1">
                                    <div>
                                        <span class="font-medium">Ad Soyad:</span>
                                        <span>${(o==null?void 0:o.fullName)||"renci Ad"}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium">T.C. Kimlik No:</span>
                                        <span>${(o==null?void 0:o.nationalId)||"Belirtilmemi"}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium">letiim:</span>
                                        <span>${(o==null?void 0:o.studentContact)||"letiim Bilgileri"}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium">Veli Ad:</span>
                                        <span>${(o==null?void 0:o.parentName)||"Veli Ad"}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium">Veli letiim:</span>
                                        <span>${(o==null?void 0:o.parentContact)||"Veli letiim"}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Invoice Information -->
                            <div class="mb-4">
                                <h3 class="section-header">FATURA BLGLER</h3>
                                <div class="grid grid-cols-1">
                                    <div>
                                        <span class="font-medium">Dzenleme Tarihi:</span>
                                        <span>${He(c.issueDate)}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium">deme Tarihi:</span>
                                        <span>${He(c.paymentDate)}</span>
                                    </div>
                <div>
                                        <span class="font-medium">Fatura No:</span>
                                        <span>${c.invoiceNumber}</span>
                </div>
                </div>
            </div>

                            <!-- Payment Summary -->
                            <div class="mb-4">
                                <h3 class="section-header">DEME ZET</h3>
                                <div class="grid grid-cols-3">
                                    <div>
                                        <div class="font-bold text-gray-900">${c.items.length}</div>
                                        <div class="text-gray-600">Taksit Says</div>
                                    </div>
                                    <div>
                                        <div class="font-bold text-gray-900">${sa(w())}</div>
                                        <div class="text-gray-600">Toplam Tutar</div>
                                    </div>
                                    <div>
                                        <div class="font-bold text-gray-900">${He(new Date,"dd/MM/yyyy")}</div>
                                        <div class="text-gray-600">Tarih</div>
                                    </div>
                                </div>
                            </div>
            </div>

                        <div class="right-column">
                            <!-- Invoice Items -->
                            <div class="mb-4">
                                <h3 class="section-header">ALINAN DEMELER</h3>
                                <table>
                    <thead>
                                        <tr>
                                            <th>Aklama</th>
                                            <th>Miktar</th>
                                            <th>Birim Fiyat</th>
                                            <th>Tutar</th>
                        </tr>
                    </thead>
                    <tbody>
                                        ${c.items.map(Q=>`
                                            <tr>
                                                <td>${Q.description}</td>
                                                <td>${Q.quantity}</td>
                                                <td>${sa(Q.unitPrice)}</td>
                                                <td>${sa(Q.amount)}</td>
                        </tr>
                                        `).join("")}
                    </tbody>
                </table>
            </div>

                            <!-- Total Amount -->
                            <div class="total-amount">
                                TOPLAM TUTAR: ${sa(w())}
                            </div>
                            
                            <!-- Notes -->
                            ${c.notes&&`
                                <div class="mb-4">
                                    <h3 class="section-header">NOTLAR</h3>
                                    <div class="notes-section">
                                        ${c.notes}
                                    </div>
                </div>
                            `}
                            

                </div>
            </div>

                    <!-- Signature Section -->
                    <div class="signature-section">
                        <div class="signature-box">
                            <div class="signature-item">
                                <div class="signature-line"></div>
                                <p class="text-sm font-bold text-gray-900 mb-1">Nazm nl</p>
                                <p class="text-xs text-gray-600">KURUCU MDR</p>
                            </div>
                        </div>
                    </div>
                </body>
                </html>
            `),R.document.close(),R.print(),a("Fatura baaryla oluturuldu!","success"),t()}catch(S){console.error("Error generating invoice:",S),a("Fatura oluturulamad.","error")}finally{p(!1)}};return r.jsx(tt,{isOpen:e,onClose:t,title:"Fatura Olutur (deme Sonras)",size:"lg",headerStyle:{backgroundColor:"#2563EB"},children:r.jsxs("form",{onSubmit:S=>{S.preventDefault(),_()},children:[r.jsxs(At,{title:"Fatura Bilgileri",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsxs(On,{label:"renci",name:"studentId",value:c.studentId,onChange:v,required:!0,disabled:!!n,children:[r.jsx("option",{value:"",children:"renci sein"}),i.map(S=>r.jsx("option",{value:S.id,children:S.fullName},S.id))]})}),o&&r.jsxs("div",{className:"sm:col-span-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taksit Seimi"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Faturaya dahil edilecek denmi taksitleri sein:"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:(()=>(typeof o.installments=="string"?JSON.parse(o.installments):o.installments).filter(k=>k.status==="Paid").map(k=>r.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-white rounded border hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.includes(k.number),onChange:A=>x(k.number,A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("span",{className:"text-sm",children:["Taksit ",k.number," - ",sa(k.amount),r.jsxs("span",{className:"text-gray-500 ml-1",children:["(",He(new Date(k.dueDate),"dd/MM/yyyy"),")"]})]})]},k.number)))()}),(()=>{if((typeof o.installments=="string"?JSON.parse(o.installments):o.installments).filter(A=>A.status==="Paid").length===0)return r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Bu rencinin denmi taksiti bulunmamaktadr."})})()]})]}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Fatura Numaras",name:"invoiceNumber",value:c.invoiceNumber,onChange:v,required:!0})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Dzenleme Tarihi",name:"issueDate",type:"date",value:c.issueDate,onChange:v,required:!0})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"deme Tarihi",name:"paymentDate",type:"date",value:c.paymentDate,onChange:v,required:!0})})]}),r.jsxs(At,{title:"denen Taksitler",children:[r.jsx("div",{className:"sm:col-span-6 mb-4",children:r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-blue-800 text-sm",children:[r.jsx(B,{path:T.INFO,className:"w-4 h-4 inline mr-2"}),"Bu fatura deme alndktan sonra dzenlenmektedir. Sadece denmi taksitler listelenmektedir."]})})}),r.jsx("div",{className:"sm:col-span-6 mb-4",children:r.jsxs("button",{type:"button",onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:[r.jsx(B,{path:T.ADD,className:"w-4 h-4 mr-2"}),"Kalem Ekle"]})}),c.items.map((S,k)=>r.jsxs("div",{className:"sm:col-span-6 grid grid-cols-12 gap-4 items-end mb-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"col-span-4",children:r.jsx(Ge,{label:"Aklama",name:`item-${k}-description`,value:S.description,onChange:A=>y(k,"description",A.target.value),required:!0})}),r.jsx("div",{className:"col-span-2",children:r.jsx(Ge,{label:"Miktar",name:`item-${k}-quantity`,type:"number",value:S.quantity,onChange:A=>y(k,"quantity",parseFloat(A.target.value)),required:!0})}),r.jsx("div",{className:"col-span-2",children:r.jsx(Ge,{label:"Birim Fiyat",name:`item-${k}-unitPrice`,type:"number",step:"0.01",value:S.unitPrice,onChange:A=>y(k,"unitPrice",parseFloat(A.target.value)),required:!0})}),r.jsx("div",{className:"col-span-2",children:r.jsx(Ge,{label:"Tutar",name:`item-${k}-amount`,type:"number",step:"0.01",value:Math.round(S.amount),disabled:!0})}),r.jsx("div",{className:"col-span-2",children:r.jsx("button",{type:"button",onClick:()=>f(k),className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:r.jsx(B,{path:T.TRASH,className:"w-4 h-4"})})})]},k)),r.jsx("div",{className:"sm:col-span-6 text-right",children:r.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["Toplam: ",Math.round(w())," "]})})]}),r.jsx(At,{title:"Ek Bilgiler",children:r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Notlar",name:"notes",value:c.notes,onChange:v,placeholder:"Fatura iin ek notlar..."})})}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"ptal"}),r.jsx("button",{type:"submit",disabled:h||c.items.length===0,className:"px-6 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed",children:h?"Oluturuluyor...":"Fatura Olutur"})]})]})})},Wg=({isOpen:e,onClose:t,student:n,installment:s,onPaymentRecorded:a})=>{const{showNotification:i}=Xe(),{students:o,fetchData:l}=at(),[c,d]=I.useState({studentId:"",amount:"",paymentDate:new Date().toISOString().split("T")[0],paymentMethod:"cash",description:"",installmentNumber:""}),[u,m]=I.useState(!1),[h,p]=I.useState(!1),[v,x]=I.useState(null),[b,g]=I.useState([]),[f,y]=I.useState(!1),[w,_]=I.useState(!1),[S,k]=I.useState(null);I.useEffect(()=>{if(e)if(_(!1),k(null),n){d(H=>({...H,studentId:n.id})),x(n);let Y=n.installments||[];if(typeof Y=="string")try{Y=JSON.parse(Y)}catch(H){console.error("Error parsing installments for student:",n.id,H),Y=[]}Array.isArray(Y)||(Y=[]),g(Y)}else if(s){d(H=>({...H,studentId:s.student.id,amount:s.amount.toString(),installmentNumber:s.number.toString(),description:`${s.student.fullName} - Installment ${s.number}`})),x(s.student);let Y=s.student.installments||[];if(typeof Y=="string")try{Y=JSON.parse(Y)}catch(H){console.error("Error parsing installments for student:",s.student.id,H),Y=[]}Array.isArray(Y)||(Y=[]),g(Y)}else d({studentId:"",amount:"",paymentDate:new Date().toISOString().split("T")[0],paymentMethod:"cash",description:"",installmentNumber:""}),x(null),g([])},[e,n,s]);const A=Y=>{const{name:H,value:K}=Y.target;if(d(D=>({...D,[H]:K})),H==="studentId"){const D=o.find(z=>z.id===K);x(D);let O=(D==null?void 0:D.installments)||[];if(typeof O=="string")try{O=JSON.parse(O)}catch(z){console.error("Error parsing installments for student:",D==null?void 0:D.id,z),O=[]}Array.isArray(O)||(O=[]),g(O)}else if(H==="installmentNumber"&&K){const D=(b||[]).find(O=>O.number===parseInt(K));D&&d(O=>({...O,amount:D.amount.toString(),description:`${v==null?void 0:v.fullName} - Installment ${D.number}`}))}},F=async Y=>{Y.preventDefault(),m(!0);try{let H=parseFloat(c.amount);if(c.installmentNumber){const O=(b||[]).find(z=>z.number===parseInt(c.installmentNumber));O&&(H=O.amount)}if(!H||H<=0){i("Please enter a valid payment amount.","error");return}const K={amount:H,type:"income-group",description:c.description||(v?`${v.fullName} - ${c.installmentNumber?`Installment ${c.installmentNumber}`:"General Payment"}`:"Payment received"),transaction_date:c.paymentDate,category:"Student Payment",expense_type:"income-group",student_id:c.studentId};await ve.create("transactions",K);let D=null;if(c.installmentNumber&&v){const O=[...b||[]],z=O.findIndex(L=>L.number===parseInt(c.installmentNumber));z!==-1&&(O[z]={...O[z],status:"Paid",paidDate:c.paymentDate},await ve.update("students",v.id,{installments:JSON.stringify(O)}),D=parseInt(c.installmentNumber))}else if(v){const O=(b||[]).filter(z=>z.status==="Unpaid");if(O.length>0){const z=O.sort((V,W)=>new Date(V.dueDate)-new Date(W.dueDate))[0],L=[...b||[]],C=L.findIndex(V=>V.number===z.number);C!==-1&&(L[C]={...L[C],status:"Paid",paidDate:c.paymentDate},await ve.update("students",v.id,{installments:JSON.stringify(L)}),D=z.number)}}k(D),await l(),i("Payment recorded successfully!","success"),_(!0)}catch(H){console.error("Error recording payment:",H),i("Failed to record payment. Please check the console for details.","error")}finally{m(!1)}},R=()=>Array.isArray(b)?b.filter(Y=>Y&&Y.status==="Unpaid"):[],Q=()=>Array.isArray(b)?b.reduce((Y,H)=>Y+(H&&H.amount?H.amount:0),0):0,E=()=>Array.isArray(b)?b.filter(Y=>Y&&Y.status==="Paid").reduce((Y,H)=>Y+(H&&H.amount?H.amount:0),0):0,q=()=>Q()-E(),N=()=>!c.installmentNumber,Z=()=>{if(c.installmentNumber&&Array.isArray(b)){const Y=b.find(H=>H&&H.number===parseInt(c.installmentNumber));return Y&&Y.amount?Y.amount:0}return 0};return r.jsxs(r.Fragment,{children:[r.jsx(tt,{isOpen:e,onClose:t,title:"Record Payment",headerStyle:{backgroundColor:"#10B981"},children:r.jsxs("form",{onSubmit:F,children:[r.jsxs(At,{title:"Payment Details",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsxs(On,{label:"Student",name:"studentId",value:c.studentId,onChange:A,required:!0,disabled:!!n||!!s,children:[r.jsx("option",{value:"",children:"Select a student"}),o.map(Y=>r.jsx("option",{value:Y.id,children:Y.fullName},Y.id))]})}),v&&r.jsxs("div",{className:"sm:col-span-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Student Financial Summary"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Total Owed"}),r.jsxs("p",{className:"font-bold text-blue-800",children:[Math.round(Q())," "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Total Paid"}),r.jsxs("p",{className:"font-bold text-green-600",children:[Math.round(E())," "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Remaining"}),r.jsxs("p",{className:"font-bold text-red-600",children:[Math.round(q())," "]})]})]})]}),R().length>0&&r.jsx("div",{className:"sm:col-span-6",children:r.jsxs(On,{label:"Pay for Installment (Optional)",name:"installmentNumber",value:c.installmentNumber,onChange:A,children:[r.jsx("option",{value:"",children:"General payment"}),(R()||[]).map(Y=>r.jsxs("option",{value:Y.number,children:["Installment ",Y.number," - ",Math.round(Y.amount),"  (Due: ",new Date(Y.dueDate).toLocaleDateString(),")"]},Y.number))]})}),r.jsxs("div",{className:"sm:col-span-3",children:[r.jsx(Ge,{label:`Amount () ${c.installmentNumber?"(Auto-filled)":""}`,name:"amount",type:"number",step:"0.01",value:c.amount,onChange:A,required:N(),disabled:!!c.installmentNumber,placeholder:c.installmentNumber?Math.round(Z()):"Enter amount"}),c.installmentNumber&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Amount will be set to ",Math.round(Z()),"  for this installment"]})]}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(pn,{label:"Payment Date",name:"paymentDate",value:c.paymentDate,onChange:A,required:!0})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsxs(On,{label:"Payment Method",name:"paymentMethod",value:c.paymentMethod,onChange:A,required:!0,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),r.jsx("option",{value:"credit_card",children:"Credit Card"}),r.jsx("option",{value:"check",children:"Check"}),r.jsx("option",{value:"other",children:"Other"})]})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Description",name:"description",value:c.description,onChange:A,placeholder:"Payment description..."})})]}),w&&r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-teal-800",children:"Payment Recorded Successfully!"}),r.jsx("p",{className:"text-teal-600",children:"Would you like to generate an invoice for this payment?"})]}),r.jsx(B,{path:T.SUCCESS,className:"w-8 h-8 text-green-600"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>{a(),t()},className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Skip Invoice"}),r.jsx("button",{onClick:async()=>{p(!0),await l(),y(!0),p(!1)},disabled:h,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors",children:h?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Preparing Invoice..."]}):r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-4 h-4 mr-2"}),"Generate Invoice"]})})]})]}),!w&&r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 rounded-lg text-white bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed",children:u?"Recording...":"Record Payment"})]})]})}),f&&r.jsx(Bg,{isOpen:f,onClose:()=>{y(!1),a(),t()},student:v,newlyPaidInstallment:S})]})},Gg=({isOpen:e,onClose:t,expenseToEdit:n,onExpenseAdded:s})=>{var _;at();const{showNotification:a}=Xe(),[i,o]=I.useState({type:"expense-business",amount:"",transaction_date:new Date().toISOString().split("T")[0],description:"",category:"",invoice_url:"",invoice_name:""}),[l,c]=I.useState(null),[d,u]=I.useState(!1),[m,h]=I.useState(0),p=[{value:"Rent",label:"Rent & Utilities",icon:T.BUILDING,color:"bg-blue-100 text-blue-800"},{value:"Materials",label:"Teaching Materials",icon:T.BOOK_OPEN,color:"bg-blue-100 text-blue-800"},{value:"Bills",label:"Utility Bills",icon:T.BOLT,color:"bg-blue-100 text-blue-800"},{value:"Salaries",label:"Employee Salaries",icon:T.USERS,color:"bg-blue-100 text-blue-800"},{value:"Marketing",label:"Marketing & Advertising",icon:T.BULLHORN,color:"bg-blue-100 text-blue-800"},{value:"Equipment",label:"Equipment & Technology",icon:T.TOOLS,color:"bg-blue-100 text-blue-800"},{value:"Insurance",label:"Insurance",icon:T.SHIELD,color:"bg-blue-100 text-blue-800"},{value:"Taxes",label:"Taxes & Licenses",icon:T.CALCULATOR,color:"bg-blue-100 text-blue-800"},{value:"Travel",label:"Travel & Transportation",icon:T.CAR,color:"bg-blue-100 text-blue-800"},{value:"Other",label:"Other Business Expenses",icon:T.INFO,color:"bg-blue-100 text-blue-800"}];I.useEffect(()=>{if(n){let S="";try{const k=n.transaction_date;if(k){const A=new Date(k);isNaN(A.getTime())?S=new Date().toISOString().split("T")[0]:S=A.toISOString().split("T")[0]}else S=new Date().toISOString().split("T")[0]}catch(k){console.warn("Error parsing transaction date:",k),S=new Date().toISOString().split("T")[0]}o({type:"expense-business",amount:n.amount||"",transaction_date:S,description:n.description||"",category:n.category||"",invoice_url:n.invoice_url||"",invoice_name:n.invoice_name||""})}else o({type:"expense-business",amount:"",transaction_date:new Date().toISOString().split("T")[0],description:"",category:"",invoice_url:"",invoice_name:""});c(null),h(0)},[n,e]);const v=S=>{const{name:k,value:A,type:F,checked:R}=S.target;o(Q=>({...Q,[k]:F==="checkbox"?R:A}))},x=S=>{S.target.files[0]&&(c(S.target.files[0]),o(k=>({...k,invoice_name:S.target.files[0].name})))},b=async(S,k)=>{try{console.log(" Starting file upload...",{path:k,fileName:S.name});const{data:A,error:F}=await Pe.storage.from("udms").upload(k,S,{cacheControl:"3600",upsert:!1});if(F)throw console.error(" Storage upload error:",F),new Error(`Storage access denied: ${F.message}`);console.log(" File uploaded successfully:",A);const{data:R}=Pe.storage.from("udms").getPublicUrl(k),Q=R.publicUrl;if(console.log(" Generated public URL:",Q),!Q)throw new Error("Failed to generate public URL for uploaded file");return Q}catch(A){throw console.error(" File upload failed:",A),A}},g=(S,k,A)=>{const F=S.replace(/[]/g,"g").replace(/[]/g,"u").replace(/[]/g,"si").replace(/[]/g,"o").replace(/[]/g,"c").replace(/[]/g,"G").replace(/[]/g,"U").replace(/[]/g,"SI").replace(/[]/g,"O").replace(/[]/g,"C").replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_"),R=A.split(".").pop().toLowerCase(),Q=k?`_${k}TL`:"";return`${F}${Q}_Invoice.${R}`},f=async S=>{S.preventDefault(),u(!0),h(0);try{const{data:{user:k}}=await Pe.auth.getUser();if(!k){a("You must be logged in to save expenses.","error");return}let A=i.invoice_url,F=i.invoice_name;if(l){h(10);const E=new Date().getTime(),q=g(i.description,i.amount,l.name),N=`business_expenses/${E}_${q}`;try{A=await b(l,N),F=q,h(100)}catch(Z){console.error("File upload failed:",Z),a("Failed to upload invoice file. Please try again.","error");return}}const R={amount:parseFloat(i.amount),type:"expense-business",description:i.description,category:i.category,transaction_date:i.transaction_date,invoice_url:A,invoice_name:F};let Q;n?Q=await ve.update("transactions",n.id,R):Q=await ve.create("transactions",R),a(n?"Business expense updated successfully!":"Business expense logged successfully!","success"),s==null||s(),t()}catch(k){console.error("Error saving business expense:",k),console.error("Error details:",k.message),console.error("Error response:",k.response),a(`Failed to save business expense: ${k.message}`,"error")}finally{u(!1),h(0)}},y=S=>{if(!S)return T.INFO;const k=p.find(A=>A.value===S);return k?k.icon:T.INFO},w=S=>{if(!S)return"bg-gray-100 text-gray-800";const k=p.find(A=>A.value===S);return k?k.color:"bg-gray-100 text-gray-800"};return r.jsx(tt,{isOpen:e,onClose:t,title:"Log Business Expense",size:"lg",headerStyle:{backgroundColor:"#2563EB"},children:r.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:r.jsx(B,{path:T.BRIEFCASE,className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Business Expense"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Track your business-related expenses for tax and accounting purposes"})]})]})}),r.jsxs(At,{title:"Expense Details",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsxs(On,{label:"Category",name:"category",value:i.category,onChange:v,required:!0,children:[r.jsx("option",{value:"",children:"Select a business category"}),p.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))]})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Description",name:"description",value:i.description,onChange:v,placeholder:"Brief description of the expense...",required:!0})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(Ge,{label:"Amount ()",name:"amount",type:"number",step:"0.01",value:i.amount,onChange:v,required:!0})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(pn,{label:"Date",name:"transaction_date",value:i.transaction_date,onChange:v,required:!0})})]}),r.jsx(At,{title:"Invoice & Documentation",children:r.jsxs("div",{className:"sm:col-span-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Invoice Receipt",r.jsx("span",{className:"text-gray-500 ml-1",children:"(Optional but recommended)"})]}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 transition-colors",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(B,{path:T.UPLOAD,className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600",children:[r.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[r.jsx("span",{children:"Upload a file"}),r.jsx("input",{type:"file",name:"invoice",onChange:x,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"sr-only"})]}),r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG, DOC up to 10MB"})]})}),l&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-600",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-4 h-4 mr-1"}),l.name]}),m>0&&m<100&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",m.toFixed(0),"%"]})]})]})}),i.category&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Expense Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Category:"}),r.jsxs("span",{className:`ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w(i.category)}`,children:[r.jsx(B,{path:y(i.category),className:"w-3 h-3 mr-1"}),(_=p.find(S=>S.value===i.category))==null?void 0:_.label]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Amount:"}),r.jsx("span",{className:"ml-2 font-semibold text-red-600",children:i.amount?`${Math.round(parseFloat(i.amount))} `:"Not set"})]})]})]}),r.jsxs("div",{className:"flex justify-end pt-6 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors",children:d?"Saving...":n?"Update Expense":"Log Expense"})]})]})})},Hg=({isOpen:e,onClose:t,expenseToEdit:n,onExpenseAdded:s})=>{var x;const{fetchData:a}=at(),{showNotification:i}=Xe(),[o,l]=I.useState({type:"expense-personal",amount:"",transaction_date:new Date().toISOString().split("T")[0],description:"",category:""}),[c,d]=I.useState(!1),u=[{value:"Food",label:"Food & Dining",icon:T.UTENSILS,color:"bg-purple-100 text-purple-800"},{value:"Transportation",label:"Transportation",icon:T.CAR,color:"bg-purple-100 text-purple-800"},{value:"Entertainment",label:"Entertainment",icon:T.MUSIC,color:"bg-purple-100 text-purple-800"},{value:"Shopping",label:"Shopping & Retail",icon:T.SHOPPING_CART,color:"bg-purple-100 text-purple-800"},{value:"Healthcare",label:"Healthcare",icon:T.HEART,color:"bg-purple-100 text-purple-800"},{value:"Education",label:"Education & Learning",icon:T.GRADUATION_CAP,color:"bg-purple-100 text-purple-800"},{value:"Housing",label:"Housing & Rent",icon:T.HOME,color:"bg-purple-100 text-purple-800"},{value:"Utilities",label:"Utilities & Bills",icon:T.BOLT,color:"bg-purple-100 text-purple-800"},{value:"Travel",label:"Travel & Vacation",icon:T.PLANE,color:"bg-purple-100 text-purple-800"},{value:"Other",label:"Other Personal",icon:T.INFO,color:"bg-purple-100 text-purple-800"}];I.useEffect(()=>{if(n){let b="";try{const g=n.transaction_date;if(g){const f=new Date(g);isNaN(f.getTime())?b=new Date().toISOString().split("T")[0]:b=f.toISOString().split("T")[0]}else b=new Date().toISOString().split("T")[0]}catch(g){console.warn("Error parsing transaction date:",g),b=new Date().toISOString().split("T")[0]}l({type:"expense-personal",amount:n.amount||"",transaction_date:b,description:n.description||"",category:n.category||""})}else l({type:"expense-personal",amount:"",transaction_date:new Date().toISOString().split("T")[0],description:"",category:""})},[n,e]);const m=b=>{const{name:g,value:f,type:y,checked:w}=b.target;l(_=>({..._,[g]:y==="checkbox"?w:f}))},h=async b=>{var g,f;b.preventDefault(),d(!0);try{if(!o.category){i("Please select a category for the expense.","error"),d(!1);return}if(!o.amount||parseFloat(o.amount)<=0){i("Please enter a valid amount greater than 0.","error"),d(!1);return}const{data:{user:y}}=await Pe.auth.getUser();if(!y){i("You must be logged in to save expenses.","error"),d(!1);return}let w={...o};w.type="expense-personal",w.expense_type="personal",w.amount=parseFloat(o.amount),n?(await ve.update("transactions",n.id,w),i("Personal expense updated successfully!","success")):(await ve.create("transactions",w),i("Personal expense logged successfully!","success")),a(),s==null||s(),t()}catch(y){console.error("Error saving personal expense:",y),(g=y.message)!=null&&g.includes("network")?i("Network error. Please check your connection and try again.","error"):(f=y.message)!=null&&f.includes("permission")?i("Permission denied. Please check your login status.","error"):i("Failed to save personal expense. Please try again.","error")}finally{d(!1)}},p=b=>{if(!b)return T.INFO;const g=u.find(f=>f.value===b);return g?g.icon:T.INFO},v=b=>{if(!b)return"bg-gray-100 text-gray-800";const g=u.find(f=>f.value===b);return g?g.color:"bg-gray-100 text-gray-800"};return r.jsx(tt,{isOpen:e,onClose:t,title:"Log Personal Expense",size:"lg",headerStyle:{backgroundColor:"#8B5CF6"},children:r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4",children:r.jsx(B,{path:T.USER,className:"w-6 h-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Personal Expense"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Track your personal spending"})]})]})}),r.jsxs(At,{title:"Expense Details",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsxs(On,{label:"Category",name:"category",value:o.category,onChange:m,required:!0,children:[r.jsx("option",{value:"",children:"Select a personal category"}),u.map(b=>r.jsx("option",{value:b.value,children:b.label},b.value))]})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Amount ()",name:"amount",type:"number",step:"0.01",value:o.amount,onChange:m,required:!0,placeholder:"Enter amount"})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Description",name:"description",value:o.description,onChange:m,placeholder:"Brief description of the expense"})}),r.jsx("div",{className:"sm:col-span-6",children:r.jsx(pn,{label:"Date",name:"transaction_date",value:o.transaction_date,onChange:m,required:!0})})]}),o.category&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Expense Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Category:"}),r.jsxs("span",{className:`ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${v(o.category)}`,children:[r.jsx(B,{path:p(o.category),className:"w-3 h-3 mr-1"}),(x=u.find(b=>b.value===o.category))==null?void 0:x.label]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Amount:"}),r.jsx("span",{className:"ml-2 font-semibold text-red-600",children:o.amount?`${Math.round(parseFloat(o.amount))} `:"Not set"})]})]})]}),r.jsxs("div",{className:"flex justify-end pt-6 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 rounded-lg text-white bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 disabled:cursor-not-allowed transition-colors",children:c?"Saving...":n?"Update Expense":"Log Expense"})]})]})})},HN=({students:e,payments:t,onPaymentRecorded:n})=>{const{showNotification:s}=Xe(),[a,i]=I.useState(""),[o,l]=I.useState("all"),[c,d]=I.useState(null),[u,m]=I.useState(!1),h=I.useMemo(()=>e.map(w=>{const _=t.filter(Z=>Z.studentId===w.id);let S=w.installments;if(typeof S=="string")try{S=JSON.parse(S)}catch(Z){console.error("Error parsing installments for student:",w.id,Z),S=[]}Array.isArray(S)||(S=[]);const k=S.reduce((Z,Y)=>Z+Y.amount,0),A=_.reduce((Z,Y)=>Z+Y.amount,0),F=k-A,R=k>0?A/k*100:0,Q=S.filter(Z=>Z.status==="Unpaid"&&am(new Date,new Date(Z.dueDate))),E=S.filter(Z=>Z.status==="Unpaid"&&xN(new Date,new Date(Z.dueDate))&&am(new Date(Z.dueDate),d6(new Date,7))),q=_.length>0?new Date(_[_.length-1].transactionDate):null,N=q?bo(new Date,q):null;return{...w,totalOwed:k,totalPaid:A,remainingBalance:F,paymentRate:R,overdueInstallments:Q,upcomingInstallments:E,lastPayment:q,daysSinceLastPayment:N,paymentHistory:_,status:F>0?Q.length>0?"overdue":"pending":"paid"}}),[e,t]),p=I.useMemo(()=>h.filter(w=>{var k;const _=w.fullName.toLowerCase().includes(a.toLowerCase())||((k=w.studentContact)==null?void 0:k.toLowerCase().includes(a.toLowerCase())),S=o==="all"||w.status===o;return _&&S}),[h,a,o]),v=w=>{switch(w){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=w=>{switch(w){case"paid":return T.CHECK;case"pending":return T.CLOCK;case"overdue":return T.WARNING;default:return T.INFO}},b=w=>{d(w),m(!0)},g=w=>{const _=w.overdueInstallments.reduce((F,R)=>F+R.amount,0),S=w.overdueInstallments.length,k=w.overdueInstallments[0],A=k?new Date(k.dueDate).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A";return Ug("late_payment",{studentName:w.fullName,dueDate:A,amount:Math.round(_),installmentCount:S})},f=w=>{const _=g(w);navigator.clipboard.writeText(_).then(()=>{s(`Late payment message copied to clipboard for ${w.fullName}`,"success")}).catch(()=>{s(`Message generated for ${w.fullName}`,"info")})},y=w=>w>=80?"bg-green-500":w>=50?"bg-yellow-500":"bg-red-500";return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:h.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Students"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:h.filter(w=>w.status==="paid").length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Fully Paid"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-red-600",children:h.filter(w=>w.status==="overdue").length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[h.reduce((w,_)=>w+_.remainingBalance,0).toFixed(0),""]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Outstanding"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[r.jsx("div",{className:"flex-1 max-w-md",children:r.jsxs("div",{className:"relative",children:[r.jsx(B,{path:T.INFO,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search students...",value:a,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("select",{value:o,onChange:w=>l(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"paid",children:"Fully Paid"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"overdue",children:"Overdue"})]})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Rate"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Installments"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Payment"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:r.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:w.fullName.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.fullName}),r.jsx("div",{className:"text-sm text-gray-500",children:w.studentContact})]})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:r.jsxs("span",{className:"font-semibold",children:[w.remainingBalance.toFixed(2)," "]})}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Paid: ",w.totalPaid.toFixed(2)," "]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:`h-2 rounded-full ${y(w.paymentRate)}`,style:{width:`${Math.min(w.paymentRate,100)}%`}})}),r.jsxs("span",{className:"text-sm text-gray-900",children:[w.paymentRate.toFixed(0),"%"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(w.status)}`,children:[r.jsx(B,{path:x(w.status),className:"w-3 h-3 mr-1"}),w.status.charAt(0).toUpperCase()+w.status.slice(1)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[w.overdueInstallments.length>0&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[w.overdueInstallments.length," overdue"]}),w.upcomingInstallments.length>0&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[w.upcomingInstallments.length," upcoming"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.lastPayment?r.jsxs("div",{children:[r.jsx("div",{children:Ke(w.lastPayment,"MMM dd, yyyy")}),w.daysSinceLastPayment>0&&r.jsxs("div",{className:"text-xs text-gray-400",children:[w.daysSinceLastPayment," days ago"]})]}):r.jsx("span",{className:"text-gray-400",children:"No payments"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("button",{onClick:()=>b(w),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700",title:"Record payment",children:r.jsx(B,{path:T.WALLET,className:"w-3 h-3"})}),w.status==="overdue"&&r.jsx("button",{onClick:()=>f(w),className:"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"Generate late payment message",children:r.jsx(B,{path:T.BELL,className:"w-3 h-3"})})]})})]},w.id))})]})})}),r.jsx(Wg,{isOpen:u,onClose:()=>{m(!1),d(null)},student:c,onPaymentRecorded:n})]})},Lr=async(e,t,n=null)=>{try{if(!e){console.error("No document URL provided");return}window.open(e,"_blank")||(console.log("Popup blocked, trying download method..."),qN(e,t))}catch(s){console.error("Error opening document:",s);try{const a=document.createElement("a");a.href=e,a.target="_blank",a.rel="noopener noreferrer",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(a){console.error("All document opening methods failed:",a)}}},qN=async(e,t)=>{try{const n=await fetch(e);if(!n.ok)throw new Error("Failed to fetch document");const s=await n.blob(),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=t||"document",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)}catch(n){console.error("Download failed:",n);const s=document.createElement("a");s.href=e,s.download=t||"document",s.target="_blank",s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},Pr=e=>{if(!e)return!1;try{return new URL(e),!0}catch{return!1}},YN=({expenses:e,dateRange:t,onExpenseAdded:n})=>{const{showNotification:s}=Xe(),[a,i]=I.useState(""),[o,l]=I.useState("all"),[c,d]=I.useState("all"),[u,m]=I.useState("date"),[h,p]=I.useState("desc"),[v,x]=I.useState(null),[b,g]=I.useState(!1),[f,y]=I.useState(!1),[w,_]=I.useState(!1),[S,k]=I.useState(null),[A,F]=I.useState("list"),R=I.useMemo(()=>e.map(C=>({...C,category:C.category||"Uncategorized",type:C.type,month:Ke(new Date(C.transactionDate),"yyyy-MM"),year:Ke(new Date(C.transactionDate),"yyyy")})),[e]),Q=I.useMemo(()=>{let C=R.filter(V=>{var ye,be;const W=((ye=V.description)==null?void 0:ye.toLowerCase().includes(a.toLowerCase()))||((be=V.category)==null?void 0:be.toLowerCase().includes(a.toLowerCase())),ie=o==="all"||V.category===o,he=c==="all"||V.type===c;return W&&ie&&he});return C.sort((V,W)=>{var ye,be;let ie,he;switch(u){case"date":ie=new Date(V.transactionDate),he=new Date(W.transactionDate);break;case"amount":ie=V.amount,he=W.amount;break;case"category":ie=V.category.toLowerCase(),he=W.category.toLowerCase();break;case"description":ie=((ye=V.description)==null?void 0:ye.toLowerCase())||"",he=((be=W.description)==null?void 0:be.toLowerCase())||"";break;default:ie=new Date(V.transactionDate),he=new Date(W.transactionDate)}return h==="asc"?ie>he?1:-1:ie<he?1:-1}),C},[R,a,o,c,u,h]),E=I.useMemo(()=>{const C=Q.reduce((oe,de)=>oe+de.amount,0),V=Q.filter(oe=>oe.type==="expense-business"),W=Q.filter(oe=>oe.type==="expense-personal"),ie=Q.reduce((oe,de)=>(oe[de.category]||(oe[de.category]={amount:0,count:0,transactions:[]}),oe[de.category].amount+=de.amount,oe[de.category].count+=1,oe[de.category].transactions.push(de),oe),{}),ye=y6({start:da(t.startDate,6),end:t.endDate}).map(oe=>{const de=Ke(oe,"yyyy-MM"),De=Q.filter(Se=>Se.month===de);return{month:Ke(oe,"MMM yyyy"),total:De.reduce((Se,j)=>Se+j.amount,0),business:De.filter(Se=>Se.type==="expense-business").reduce((Se,j)=>Se+j.amount,0),personal:De.filter(Se=>Se.type==="expense-personal").reduce((Se,j)=>Se+j.amount,0),count:De.length}}),be=Object.entries(ie).sort(([,oe],[,de])=>de.amount-oe.amount).slice(0,5);return{totalExpenses:C,businessExpenses:V.reduce((oe,de)=>oe+de.amount,0),personalExpenses:W.reduce((oe,de)=>oe+de.amount,0),categoryBreakdown:ie,monthlyData:ye,topCategories:be,averageExpense:Q.length>0?C/Q.length:0}},[Q,t]),q=C=>{k({type:"delete",expense:C,message:`Are you sure you want to delete the expense "${C.description}"? This action cannot be undone.`}),_(!0)},N=C=>{x(C),C.type==="expense-business"?g(!0):C.type==="expense-personal"&&y(!0)},Z=async()=>{if((S==null?void 0:S.type)==="delete")try{await ve.delete("transactions",S.expense.id),s("Expense deleted successfully!","success"),n()}catch(C){console.error("Error deleting expense:",C),s("Failed to delete expense.","error")}_(!1),k(null)},Y=C=>({Rent:T.BUILDING,Food:T.UTENSILS,Transportation:T.CAR,Utilities:T.BOLT,Marketing:T.BULLHORN,Equipment:T.TOOLS,Salaries:T.USERS,Insurance:T.SHIELD,Taxes:T.CALCULATOR,Entertainment:T.MUSIC,Shopping:T.SHOPPING_CART,Healthcare:T.HEART,Education:T.GRADUATION_CAP,Housing:T.HOME,Travel:T.PLANE,Other:T.INFO})[C]||T.INFO,H=C=>{const V=["Rent","Marketing","Equipment","Salaries","Insurance","Taxes"],W=["Food","Entertainment","Shopping","Healthcare","Housing","Travel"];return V.includes(C)?"bg-blue-100 text-blue-800":W.includes(C)?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"},K=C=>({"income-group":T.USERS,"income-tutoring":T.GRADUATION_CAP,"expense-business":T.BRIEFCASE,"expense-personal":T.USER})[C]||T.INFO,D=C=>({"income-group":"bg-green-100 text-green-800","income-tutoring":"bg-blue-100 text-blue-800","expense-business":"bg-blue-100 text-blue-800","expense-personal":"bg-purple-100 text-purple-800"})[C]||"bg-gray-100 text-gray-800",O=C=>({"income-group":"Income (Group)","income-tutoring":"Income (Tutoring)","expense-business":"Expense (Business)","expense-personal":"Expense (Personal)"})[C]||C,z=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Total Expenses"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(E.totalExpenses)," "]})]}),r.jsx(B,{path:T.BRIEFCASE,className:"w-8 h-8 text-red-200"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Business"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(E.businessExpenses)," "]})]}),r.jsx(B,{path:T.BRIEFCASE,className:"w-8 h-8 text-blue-200"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Personal"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(E.personalExpenses)," "]})]}),r.jsx(B,{path:T.USER,className:"w-8 h-8 text-purple-200"})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Top Expense Categories"}),r.jsx("div",{className:"space-y-4",children:E.topCategories.map(([C,V],W)=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-4 shadow-sm",children:r.jsx(B,{path:Y(C),className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800",children:C}),r.jsxs("p",{className:"text-sm text-gray-500",children:[V.count," transactions"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-gray-800",children:[V.amount.toFixed(2)," "]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(V.amount/E.totalExpenses*100).toFixed(1),"%"]})]})]},C))})]})]}),L=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 md:p-6",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"relative",children:[r.jsx(B,{path:T.INFO,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search expenses...",value:a,onChange:C=>i(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[r.jsxs("select",{value:o,onChange:C=>l(C.target.value),className:"px-3 md:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"all",children:"All Categories"}),Object.keys(E.categoryBreakdown).map(C=>r.jsx("option",{value:C,children:C},C))]}),r.jsxs("select",{value:c,onChange:C=>d(C.target.value),className:"px-3 md:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"expense-business",children:"Business"}),r.jsx("option",{value:"expense-personal",children:"Personal"})]}),r.jsxs("select",{value:`${u}-${h}`,onChange:C=>{const[V,W]=C.target.value.split("-");m(V),p(W)},className:"px-3 md:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"date-desc",children:"Date (Newest)"}),r.jsx("option",{value:"date-asc",children:"Date (Oldest)"}),r.jsx("option",{value:"amount-desc",children:"Amount (High-Low)"}),r.jsx("option",{value:"amount-asc",children:"Amount (Low-High)"}),r.jsx("option",{value:"category-asc",children:"Category A-Z"})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[r.jsx("div",{className:"block sm:hidden",children:Q.map(C=>r.jsxs("div",{className:"border-b border-gray-200 p-4 hover:bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate mb-1",children:C.description}),C.invoiceName&&r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-3 h-3 inline mr-1"}),C.invoiceUrl?r.jsx("button",{onClick:V=>{V.preventDefault(),V.stopPropagation(),console.log("Document clicked:",C.invoiceName,"URL:",C.invoiceUrl),Pr(C.invoiceUrl)?Lr(C.invoiceUrl,C.invoiceName):s("Invalid document URL","error")},className:"cursor-pointer hover:underline text-blue-600 hover:text-blue-800 bg-transparent border-none p-0 text-left text-xs",title:"Click to open document",children:C.invoiceName}):r.jsx("span",{className:"text-gray-400",children:C.invoiceName})]})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("span",{className:"font-semibold text-red-600 text-sm",children:[C.amount.toFixed(2)," "]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${H(C.category)}`,children:[r.jsx(B,{path:Y(C.category),className:"w-3 h-3 mr-1"}),C.category]}),r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${D(C.type)}`,children:[r.jsx(B,{path:K(C.type),className:"w-3 h-3 mr-1"}),O(C.type)]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:Ke(new Date(C.transactionDate),"MMM dd, yyyy")})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("button",{onClick:()=>N(C),className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors",title:"Edit expense",children:[r.jsx(B,{path:T.EDIT,className:"w-3 h-3 mr-1"}),"Edit"]}),r.jsxs("button",{onClick:()=>q(C),className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 transition-colors",title:"Delete expense",children:[r.jsx(B,{path:T.TRASH,className:"w-3 h-3 mr-1"}),"Delete"]})]})]},C.id))}),r.jsx("div",{className:"hidden sm:block overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.map(C=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.description}),C.invoiceName&&r.jsxs("div",{className:"text-sm text-gray-500",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-3 h-3 inline mr-1"}),C.invoiceUrl?r.jsx("button",{onClick:V=>{V.preventDefault(),V.stopPropagation(),console.log("Document clicked:",C.invoiceName,"URL:",C.invoiceUrl),Pr(C.invoiceUrl)?Lr(C.invoiceUrl,C.invoiceName):s("Invalid document URL","error")},className:"cursor-pointer hover:underline text-blue-600 hover:text-blue-800 bg-transparent border-none p-0 text-left",title:"Click to open document",children:C.invoiceName}):r.jsx("span",{className:"text-gray-400",children:C.invoiceName})]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H(C.category)}`,children:[r.jsx(B,{path:Y(C.category),className:"w-3 h-3 mr-1"}),C.category]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D(C.type)}`,children:[r.jsx(B,{path:K(C.type),className:"w-3 h-3 mr-1"}),O(C.type)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("span",{className:"font-semibold text-red-600",children:[C.amount.toFixed(2)," "]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ke(new Date(C.transactionDate),"MMM dd, yyyy")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>N(C),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",title:"Edit expense",children:[r.jsx(B,{path:T.EDIT,className:"w-3 h-3 mr-1"}),"Edit"]}),r.jsxs("button",{onClick:()=>q(C),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700",title:"Delete expense",children:[r.jsx(B,{path:T.TRASH,className:"w-3 h-3 mr-1"}),"Delete"]})]})})]},C.id))})]})})]})]});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Expense Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and analyze your business and personal expenses"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[r.jsxs("button",{onClick:()=>F("list"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${A==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(B,{path:T.MENU,className:"w-4 h-4 inline mr-2"}),"List"]}),r.jsxs("button",{onClick:()=>F("analytics"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${A==="analytics"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(B,{path:T.CHART_LINE,className:"w-4 h-4 inline mr-2"}),"Analytics"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700",children:[r.jsx(B,{path:T.BRIEFCASE,className:"w-4 h-4 mr-2"}),"Business"]}),r.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700",children:[r.jsx(B,{path:T.USER,className:"w-4 h-4 mr-2"}),"Personal"]})]})]})]})}),A==="analytics"?z():L(),r.jsx(Gg,{isOpen:b,onClose:()=>{g(!1),x(null)},expenseToEdit:v,onExpenseAdded:n}),r.jsx(Hg,{isOpen:f,onClose:()=>{y(!1),x(null)},expenseToEdit:v,onExpenseAdded:n}),r.jsx(nn,{isOpen:w,onClose:()=>_(!1),onConfirm:Z,title:"Confirm Action",message:(S==null?void 0:S.message)||""})]})},VN=({isOpen:e,onClose:t,transaction:n,onTransactionUpdated:s})=>{const{showNotification:a}=Xe();if(!e||!n)return null;const i=(n.type||n.expenseType||"").startsWith("income"),o=i?"Income Details":"Expense Details",l=i?"text-green-600":"text-red-600",c=i?"bg-green-100":"bg-red-100";return r.jsx(tt,{isOpen:e,onClose:t,title:o,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${c} ${l}`,children:r.jsx(B,{path:i?T.WALLET:T.SHOPPING_CART,className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsxs("p",{className:`text-2xl font-bold ${l}`,children:[Math.round(n.amount)," "]}),r.jsx("p",{className:"text-gray-500",children:He(n.transactionDate||n.transaction_date)})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Description:"}),r.jsx("span",{className:"text-gray-800",children:n.description})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Category:"}),r.jsx("span",{className:"text-gray-800",children:n.category||"N/A"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Type:"}),r.jsx("span",{className:"text-gray-800",children:n.type||n.expenseType||"N/A"})]}),n.studentId&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Student ID:"}),r.jsx("span",{className:"text-gray-800",children:n.studentId})]}),n.invoiceName&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Invoice:"}),r.jsx("span",{className:"text-gray-800",children:n.invoiceUrl?r.jsx("button",{onClick:d=>{d.preventDefault(),Pr(n.invoiceUrl)?Lr(n.invoiceUrl,n.invoiceName):a("Invalid document URL","error")},className:"cursor-pointer hover:underline text-blue-600 hover:text-blue-800 bg-transparent border-none p-0 text-left",title:"Click to open document",children:n.invoiceName}):r.jsx("span",{className:"text-gray-400",children:n.invoiceName})})]})]})]})})},KN=({transactions:e,dateRange:t,onTransactionUpdated:n})=>{const{showNotification:s}=Xe(),[a,i]=I.useState(""),[o,l]=I.useState("all"),[c,d]=I.useState("all"),[u,m]=I.useState("date"),[h,p]=I.useState("desc"),[v,x]=I.useState(null),[b,g]=I.useState(!1),[f,y]=I.useState(null),[w,_]=I.useState(!1),S=I.useMemo(()=>e.map(D=>{var O;return{...D,category:D.category||"Uncategorized",type:D.expenseType||D.type,isIncome:(O=D.expenseType||D.type)==null?void 0:O.startsWith("income"),month:Ke(new Date(D.transactionDate),"yyyy-MM"),year:Ke(new Date(D.transactionDate),"yyyy")}}),[e]),k=I.useMemo(()=>{let D=S.filter(O=>{var V,W;const z=((V=O.description)==null?void 0:V.toLowerCase().includes(a.toLowerCase()))||((W=O.category)==null?void 0:W.toLowerCase().includes(a.toLowerCase())),L=o==="all"||O.type===o,C=c==="all"||O.category===c;return z&&L&&C});return D.sort((O,z)=>{var V,W;let L,C;switch(u){case"date":L=new Date(O.transactionDate),C=new Date(z.transactionDate);break;case"amount":L=O.amount,C=z.amount;break;case"category":L=O.category.toLowerCase(),C=z.category.toLowerCase();break;case"description":L=((V=O.description)==null?void 0:V.toLowerCase())||"",C=((W=z.description)==null?void 0:W.toLowerCase())||"";break;case"type":L=O.type.toLowerCase(),C=z.type.toLowerCase();break;default:L=new Date(O.transactionDate),C=new Date(z.transactionDate)}return h==="asc"?L>C?1:-1:L<C?1:-1}),D},[S,a,o,c,u,h]),A=I.useMemo(()=>{const D=k.filter(C=>C.isIncome).reduce((C,V)=>C+V.amount,0),O=k.filter(C=>!C.isIncome).reduce((C,V)=>C+V.amount,0),z=k.reduce((C,V)=>{const W=V.category;return C[W]||(C[W]={amount:0,count:0,income:0,expenses:0}),C[W].amount+=V.amount,C[W].count+=1,V.isIncome?C[W].income+=V.amount:C[W].expenses+=V.amount,C},{}),L=k.reduce((C,V)=>{const W=V.type;return C[W]||(C[W]={amount:0,count:0}),C[W].amount+=V.amount,C[W].count+=1,C},{});return{totalIncome:D,totalExpenses:O,netProfit:D-O,categoryBreakdown:z,typeBreakdown:L,totalTransactions:k.length,averageTransaction:k.length>0?(D+O)/k.length:0}},[k]),F=D=>{y({type:"delete",transaction:D,message:`Are you sure you want to delete the ${D.isIncome?"income":"expense"} transaction "${D.description}"? This action cannot be undone.`}),g(!0)},R=D=>{x(D),_(!0)},Q=async()=>{if((f==null?void 0:f.type)==="delete")try{await ve.delete("transactions",f.transaction.id),s("Transaction deleted successfully!","success"),n()}catch(D){console.error("Error deleting transaction:",D),s("Failed to delete transaction.","error")}g(!1),y(null)},E=D=>({"income-group":T.USERS,"income-tutoring":T.GRADUATION_CAP,"expense-business":T.BRIEFCASE,"expense-personal":T.USER})[D]||T.INFO,q=D=>({"income-group":"bg-green-100 text-green-800","income-tutoring":"bg-blue-100 text-blue-800","expense-business":"bg-blue-100 text-blue-800","expense-personal":"bg-purple-100 text-purple-800",personal:"bg-purple-100 text-purple-800",business:"bg-blue-100 text-blue-800",group:"bg-green-100 text-green-800",tutoring:"bg-blue-100 text-blue-800",income:"bg-green-100 text-green-800",expense:"bg-red-100 text-red-800"})[D]||"bg-gray-100 text-gray-800",N=D=>({Rent:T.BUILDING,Food:T.UTENSILS,Transportation:T.CAR,Utilities:T.BOLT,Marketing:T.BULLHORN,Equipment:T.TOOLS,Salaries:T.USERS,Insurance:T.SHIELD,Taxes:T.CALCULATOR,Entertainment:T.MUSIC,Shopping:T.SHOPPING_CART,Healthcare:T.HEART,Education:T.GRADUATION_CAP,Housing:T.HOME,Travel:T.PLANE,"Student Payment":T.WALLET,Other:T.INFO})[D]||T.INFO,Z=D=>{const O=["Rent","Marketing","Equipment","Salaries","Insurance","Taxes","Materials","Bills"],z=["Food","Entertainment","Shopping","Healthcare","Housing","Travel"],L=["Student Payment"];return O.includes(D)?"bg-blue-100 text-blue-800":z.includes(D)?"bg-purple-100 text-purple-800":L.includes(D)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},Y=D=>({"income-group":"Income (Group)","income-tutoring":"Income (Tutoring)","expense-business":"Expense (Business)","expense-personal":"Expense (Personal)",personal:"Expense (Personal)",business:"Expense (Business)",group:"Income (Group)",tutoring:"Income (Tutoring)"})[D]||D,H=I.useMemo(()=>{const D=new Set;return S.forEach(O=>{O.category&&D.add(O.category)}),["all",...Array.from(D).sort()]},[S]),K=I.useMemo(()=>{const D=new Set;return S.forEach(O=>{O.type&&D.add(O.type)}),["all",...Array.from(D).sort()]},[S]);return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Transaction Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage all financial transactions. Add new transactions in their respective sections (Payments, Business Expenses, Personal Expenses)."})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Total Income"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(A.totalIncome)," "]})]}),r.jsx(B,{path:T.WALLET,className:"w-8 h-8 text-green-200"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Total Expenses"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(A.totalExpenses)," "]})]}),r.jsx(B,{path:T.BRIEFCASE,className:"w-8 h-8 text-red-200"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Net Profit"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(A.netProfit)," "]})]}),r.jsx(B,{path:T.CHART_LINE,className:"w-8 h-8 text-blue-200"})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[r.jsx("div",{className:"flex-1 max-w-md",children:r.jsxs("div",{className:"relative",children:[r.jsx(B,{path:T.SEARCH,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search transactions...",value:a,onChange:D=>i(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Types"}),K.slice(1).map(D=>r.jsx("option",{value:D,children:Y(D)},D))]}),r.jsxs("select",{value:c,onChange:D=>d(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Categories"}),H.slice(1).map(D=>r.jsx("option",{value:D,children:D},D))]}),r.jsxs("select",{value:`${u}-${h}`,onChange:D=>{const[O,z]=D.target.value.split("-");m(O),p(z)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"date-desc",children:"Date (Newest)"}),r.jsx("option",{value:"date-asc",children:"Date (Oldest)"}),r.jsx("option",{value:"amount-desc",children:"Amount (High-Low)"}),r.jsx("option",{value:"amount-asc",children:"Amount (Low-High)"}),r.jsx("option",{value:"category-asc",children:"Category A-Z"}),r.jsx("option",{value:"type-asc",children:"Type A-Z"})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[r.jsx("div",{className:"block sm:hidden",children:k.map(D=>r.jsxs("div",{className:"border-b border-gray-200 p-4 hover:bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate mb-1",children:D.description}),D.invoiceName&&r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-3 h-3 inline mr-1"}),D.invoiceUrl?r.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),console.log("Document clicked:",D.invoiceName,"URL:",D.invoiceUrl),Pr(D.invoiceUrl)?Lr(D.invoiceUrl,D.invoiceName):s("Invalid document URL","error")},className:"cursor-pointer hover:underline text-blue-600 hover:text-blue-800 bg-transparent border-none p-0 text-left text-xs",title:"Click to open document",children:D.invoiceName}):r.jsx("span",{className:"text-gray-400",children:D.invoiceName})]})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("span",{className:`font-semibold text-sm ${D.isIncome?"text-green-600":"text-red-600"}`,children:[D.isIncome?"+":"-",D.amount.toFixed(2)," "]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${q(D.type)}`,children:[r.jsx(B,{path:E(D.type),className:"w-3 h-3 mr-1"}),Y(D.type)]}),r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Z(D.category)}`,children:[r.jsx(B,{path:N(D.category),className:"w-3 h-3 mr-1"}),D.category]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:Ke(new Date(D.transactionDate),"MMM dd, yyyy")})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("button",{onClick:()=>R(D),className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors",title:"View transaction details",children:[r.jsx(B,{path:T.INFO,className:"w-3 h-3 mr-1"}),"Details"]}),r.jsxs("button",{onClick:()=>F(D),className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 transition-colors",title:"Delete transaction",children:[r.jsx(B,{path:T.TRASH,className:"w-3 h-3 mr-1"}),"Delete"]})]})]},D.id))}),r.jsx("div",{className:"hidden sm:block overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(D=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.description}),D.invoiceName&&r.jsxs("div",{className:"text-sm text-gray-500",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-3 h-3 inline mr-1"}),D.invoiceUrl?r.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),Pr(D.invoiceUrl)?Lr(D.invoiceUrl,D.invoiceName):s("Invalid document URL","error")},className:"cursor-pointer hover:underline text-blue-600 hover:text-blue-800 bg-transparent border-none p-0 text-left",title:"Click to open document",children:D.invoiceName}):r.jsx("span",{className:"text-gray-400",children:D.invoiceName})]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(D.type)}`,children:[r.jsx(B,{path:E(D.type),className:"w-3 h-3 mr-1"}),Y(D.type)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Z(D.category)}`,children:[r.jsx(B,{path:N(D.category),className:"w-3 h-3 mr-1"}),D.category]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("span",{className:`font-semibold ${D.isIncome?"text-green-600":"text-red-600"}`,children:[D.isIncome?"+":"-",D.amount.toFixed(2)," "]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ke(new Date(D.transactionDate),"MMM dd, yyyy")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>R(D),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",title:"View transaction details",children:[r.jsx(B,{path:T.INFO,className:"w-3 h-3 mr-1"}),"Details"]}),r.jsxs("button",{onClick:()=>F(D),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700",title:"Delete transaction",children:[r.jsx(B,{path:T.TRASH,className:"w-3 h-3 mr-1"}),"Delete"]})]})})]},D.id))})]})}),k.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(B,{path:T.INFO,className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No transactions found for the selected filters."})]})]}),r.jsx(nn,{isOpen:b,onClose:()=>g(!1),onConfirm:Q,title:"Confirm Deletion",message:f==null?void 0:f.message,confirmText:"Delete",cancelText:"Cancel",confirmButtonStyle:"bg-red-600 hover:bg-red-700"}),r.jsx(VN,{isOpen:w,onClose:()=>_(!1),transaction:v,onTransactionUpdated:n})]})},JN=()=>{const{transactions:e,students:t,groups:n,fetchData:s,loading:a}=at();Xe();const[i,o]=I.useState("thisMonth"),[l,c]=I.useState("overview");I.useState(!1);const[d,u]=I.useState(!1);I.useState(!1),I.useState(null),I.useState(null);const[m,h]=I.useState([]);I.useState([]);const[p,v]=I.useState([]),[x,b]=I.useState(0),[g,f]=I.useState(0),[y,w]=I.useState(0),[_,S]=I.useState([]),[k,A]=I.useState([]),[F,R]=I.useState(!1),[Q,E]=I.useState(null),[q,N]=I.useState(!1),[Z,Y]=I.useState(null),[H,K]=I.useState(!1),[D,O]=I.useState(!1),[z,L]=I.useState(!1),[C,V]=I.useState(!1);I.useEffect(()=>{const G=Ie=>!Ie||!Array.isArray(Ie)?[]:Ie.filter(gt=>{const ct=new Date(gt.transactionDate);return ct>=i.startDate&&ct<=i.endDate}),te=(e==null?void 0:e.filter(Ie=>Ie.type==="income-group"||Ie.type==="income-tutoring"))||[],ne=(e==null?void 0:e.filter(Ie=>Ie.type==="expense-business"||Ie.type==="expense-personal"))||[],ee=G(te),ue=G(ne);v(ee),h(ue);let X=0,P=0,le=0,ge=[],pe=[];const Ce=new Date,ze=new Date(Ce.getTime()+7*24*60*60*1e3),Oe=new Date(Ce.getFullYear(),Ce.getMonth(),1),pt=new Date(Ce.getFullYear(),Ce.getMonth()+1,0);t==null||t.forEach(Ie=>{let gt=Ie.installments;if(typeof gt=="string")try{gt=JSON.parse(gt)}catch(ct){console.error("Error parsing installments for student:",Ie.id,ct),gt=[]}Array.isArray(gt)||(gt=[]),gt.forEach(ct=>{const it=new Date(ct.dueDate);ct.status==="Unpaid"&&(P+=ct.amount,it>=Oe&&it<=pt&&(le+=ct.amount),it>=i.startDate&&it<=i.endDate&&(X+=ct.amount),it<Ce?ge.push({...ct,student:Ie}):it<=ze&&pe.push({...ct,student:Ie}))})}),b(X),f(P),w(le),S(ge),A(pe)},[i,e,t]),I.useEffect(()=>{const G=te=>{console.log("Payment plan event received:",te.detail),Y(te.detail.student),K(!0)};return window.addEventListener("printPaymentPlan",G),()=>{window.removeEventListener("printPaymentPlan",G)}},[]);const W=(G=null)=>{Y(G),N(!0)},ie=(G=null)=>{Y(G),O(!0)},he=p.reduce((G,te)=>G+te.amount,0),ye=m.reduce((G,te)=>G+te.amount,0),be=he-ye,oe=m.filter(G=>{var te,ne;return((te=G.type)==null?void 0:te.includes("business"))||((ne=G.expenseType)==null?void 0:ne.includes("business"))||G.expense_type==="business"}).reduce((G,te)=>G+te.amount,0),de=m.filter(G=>{var te,ne;return((te=G.type)==null?void 0:te.includes("personal"))||((ne=G.expenseType)==null?void 0:ne.includes("personal"))||G.expense_type==="personal"}).reduce((G,te)=>G+te.amount,0),De=p.filter(G=>G.type==="income-group"||G.expenseType==="income-group").reduce((G,te)=>G+te.amount,0),Se=p.filter(G=>G.type==="income-tutoring"||G.expenseType==="income-tutoring").reduce((G,te)=>G+te.amount,0);(()=>{const G={};m.filter(ne=>{var ee,ue;return((ee=ne.type)==null?void 0:ee.includes("business"))||((ue=ne.expenseType)==null?void 0:ue.includes("business"))||ne.expense_type==="business"}).forEach(ne=>{const ee=ne.category||"Other";G[ee]=(G[ee]||0)+ne.amount});const te=m.filter(ne=>{var ee,ue;return((ee=ne.type)==null?void 0:ee.includes("personal"))||((ue=ne.expenseType)==null?void 0:ue.includes("personal"))||ne.expense_type==="personal"}).reduce((ne,ee)=>ne+ee.amount,0);return{incomeData:[{name:"Group Income",value:De,color:"#3B82F6"},{name:"Tutoring Income",value:Se,color:"#10B981"}],expenseData:[...Object.entries(G).map(([ne,ee],ue)=>({name:ne,value:ee,color:["#EF4444","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16"][ue%6]})),{name:"Personal Expenses",value:te,color:"#6B7280"}],barData:[{month:"Income",amount:he,type:"income"},{month:"Expenses",amount:ye,type:"expense"},{month:"Net Profit",amount:be,type:"profit"}]}})();const ae=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white rounded-2xl p-4 md:p-6 shadow-lg border border-green-100 hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.INCOME,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:F?"***":`${he.toFixed(0)} `}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-green-700 mb-4 md:mb-6",children:"Total Income"}),r.jsxs("div",{className:"space-y-2 md:space-y-3 pt-3 md:pt-4 border-t border-green-100",children:[r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Group Classes"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":`${De.toFixed(0)} `})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Tutoring"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":`${Se.toFixed(0)} `})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white rounded-2xl p-4 md:p-6 shadow-lg border border-red-100 hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.BRIEFCASE,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:F?"***":`${ye.toFixed(0)} `}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-red-700 mb-4 md:mb-6",children:"Total Expenses"}),r.jsxs("div",{className:"space-y-2 md:space-y-3 pt-3 md:pt-4 border-t border-red-100",children:[r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Business"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":`${oe.toFixed(0)} `})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Personal"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":`${de.toFixed(0)} `})]})]})]}),r.jsxs("div",{className:`bg-gradient-to-br ${be>=0?"from-green-50 to-white":"from-red-50 to-white"} rounded-2xl p-4 md:p-6 shadow-lg border ${be>=0?"border-green-100":"border-red-100"} hover:shadow-xl transition-all duration-300 group`,children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:`w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br ${be>=0?"from-green-500 to-green-600":"from-red-500 to-red-600"} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:r.jsx(B,{path:T.CHART_LINE,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:`text-2xl md:text-3xl font-bold mb-2 ${be>=0?"text-green-600":"text-red-600"}`,children:F?"***":`${be>=0?"+":""}${be.toFixed(0)} `}),r.jsx("p",{className:`text-xs md:text-sm font-medium mb-4 md:mb-6 ${be>=0?"text-green-700":"text-red-700"}`,children:"Net Profit"}),r.jsx("div",{className:"pt-3 md:pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Profit Margin"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":he>0?`${(be/he*100).toFixed(1)}%`:"0%"})]})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-white rounded-2xl p-4 md:p-6 shadow-lg border border-yellow-100 hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.WALLET,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:F?"***":`${g.toFixed(0)} `}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-yellow-700 mb-4 md:mb-6",children:"Outstanding"}),r.jsxs("div",{className:"space-y-2 md:space-y-3 pt-3 md:pt-4 border-t border-yellow-100",children:[r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Total Outstanding"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":`${g.toFixed(0)} `})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"This Month"}),r.jsx("span",{className:"font-semibold text-gray-900",children:F?"***":`${y.toFixed(0)} `})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("button",{onClick:()=>W(),className:"flex items-center p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors",children:[r.jsx(B,{path:T.WALLET,className:"w-5 h-5 text-teal-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-teal-900",children:"Record Payment"})]}),r.jsxs("button",{onClick:()=>L(!0),className:"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[r.jsx(B,{path:T.BRIEFCASE,className:"w-5 h-5 text-blue-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Add Business Expense"})]}),r.jsxs("button",{onClick:()=>u(!0),className:"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[r.jsx(B,{path:T.USER,className:"w-5 h-5 text-purple-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Add Personal Expense"})]}),r.jsxs("button",{onClick:()=>ie(),className:"flex items-center p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-5 h-5 text-orange-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Generate Invoice"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Financial Activity"}),r.jsx("div",{className:"space-y-3",children:[...p,...m].sort((G,te)=>new Date(te.transactionDate)-new Date(G.transactionDate)).slice(0,5).map((G,te)=>{var ee,ue,X,P;const ne=((ee=G.type)==null?void 0:ee.startsWith("income"))||((ue=G.expenseType)==null?void 0:ue.startsWith("income"));return(X=G.type)!=null&&X.startsWith("expense")||((P=G.expenseType)==null||P.startsWith("expense")),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${ne?"bg-green-100":"bg-red-100"}`,children:r.jsx(B,{path:ne?T.INCOME:T.BRIEFCASE,className:`w-4 h-4 ${ne?"text-green-600":"text-red-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:G.description||G.topic||"Transaction"}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(G.transactionDate).toLocaleDateString()})]})]}),r.jsx("span",{className:`text-sm font-semibold ${ne?"text-green-600":"text-red-600"}`,children:F?"***":`${ne?"+":"-"}${Math.abs(G.amount).toFixed(0)} `})]},`${G.id}-${te}`)})})]})]}),J=()=>r.jsx(HN,{students:t,payments:p,onPaymentRecorded:s}),U=()=>r.jsx(YN,{expenses:m,dateRange:i,onExpenseAdded:s}),$=()=>r.jsx(KN,{transactions:e,dateRange:i,onTransactionUpdated:s});return r.jsxs("div",{className:"relative p-4 md:p-8 bg-gray-50 rounded-lg shadow-lg",children:[r.jsx("div",{className:"mb-6 md:mb-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-600 rounded-lg flex items-center justify-center shadow-sm mr-3 md:mr-4",children:r.jsx(B,{path:T.MONEY_BILL_WAVE,className:"w-5 h-5 md:w-7 md:h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-gray-900",children:"Financial Management"}),r.jsx("p",{className:"text-gray-600 text-sm lg:text-base",children:"Track income, expenses, and payments"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsx(GN,{onDateChange:o,initialRange:i}),r.jsx("button",{onClick:()=>R(!F),className:"p-2 md:p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition-all duration-300 text-gray-700",title:F?"Show data":"Hide data",children:r.jsx(B,{path:F?T.EYE_OFF:T.EYE,className:"w-4 h-4 md:w-5 md:h-5"})})]})]})}),r.jsx("div",{className:"bg-white rounded-lg p-1 shadow-sm mb-6 overflow-x-auto",children:r.jsx("div",{className:"flex space-x-1 min-w-max",children:[{id:"overview",label:"Overview",icon:T.DASHBOARD,shortLabel:"Overview"},{id:"payments",label:"Payments",icon:T.WALLET,shortLabel:"Payments"},{id:"expenses",label:"Expenses",icon:T.BRIEFCASE,shortLabel:"Expenses"},{id:"transactions",label:"All Transactions",icon:T.LIST,shortLabel:"Transactions"}].map(G=>r.jsxs("button",{onClick:()=>c(G.id),className:`flex items-center px-2 sm:px-3 md:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${l===G.id?"bg-green-600 text-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[r.jsx(B,{path:G.icon,className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:G.label}),r.jsx("span",{className:"sm:hidden",children:G.shortLabel})]},G.id))})}),a?r.jsx("p",{className:"text-center text-gray-500 mt-8",children:"Loading financial data..."}):r.jsxs(r.Fragment,{children:[l==="overview"&&ae(),l==="payments"&&J(),l==="expenses"&&U(),l==="transactions"&&$()]}),q&&r.jsx(Wg,{isOpen:q,onClose:()=>N(!1),student:Z,installment:Q,onPaymentRecorded:s}),D&&r.jsx(Bg,{isOpen:D,onClose:()=>O(!1),student:Z}),z&&r.jsx(Gg,{isOpen:z,onClose:()=>L(!1),onExpenseAdded:s}),d&&r.jsx(Hg,{isOpen:d,onClose:()=>u(!1),onExpenseAdded:s}),C&&r.jsx(nn,{isOpen:C,onClose:()=>V(!1),onConfirm:()=>{V(!1)},title:"Confirm Action",message:"Are you sure you want to proceed with this action?"}),H&&Z&&r.jsx(Ou,{onClose:()=>K(!1),student:Z})]})},ZN=({isOpen:e,onClose:t,eventToEdit:n})=>{const{showNotification:s}=Xe(),{fetchData:a,events:i,lessons:o}=at(),l=[];for(let R=9;R<=23;R++)l.push(`${R.toString().padStart(2,"0")}:00`),R<23&&l.push(`${R.toString().padStart(2,"0")}:30`);const c=[{value:"meeting",label:"Meeting",color:"#3B82F6",icon:T.USERS},{value:"exam",label:"Exam",color:"#EF4444",icon:T.CHECK},{value:"celebration",label:"Celebration",color:"#EC4899",icon:T.CAKE},{value:"maintenance",label:"Maintenance",color:"#8B5CF6",icon:T.SETTINGS},{value:"other",label:"Other",color:"#6B7280",icon:T.CALENDAR}],d=R=>R?new Date(R).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],u=R=>R?new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"09:00",[m,h]=I.useState({eventName:"",category:"meeting",date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",isAllDay:!1}),[p,v]=I.useState(!1),[x,b]=I.useState([]),[g,f]=I.useState([]);I.useEffect(()=>{e&&(h(n?{eventName:n.eventName||"",category:n.category||"meeting",date:d(n.startTime),startTime:u(n.startTime),endTime:u(n.endTime),isAllDay:n.isAllDay||!1}:{eventName:"",category:"meeting",date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",isAllDay:!1}),b([]),f([]))},[e,n]);const y=R=>{const{name:Q,value:E,type:q,checked:N}=R.target;h(Z=>({...Z,[Q]:q==="checkbox"?N:E}))},w=()=>c.find(R=>R.value===m.category)||c[0],_=(R,Q)=>{f(Q?E=>[...E,R]:E=>E.filter(q=>q!==R))},S=I.useCallback((R,Q,E=null)=>{const q=[];return i.forEach(N=>{if(E&&N.id===E)return;const Z=new Date(N.startTime),Y=new Date(N.endTime);R<Y&&Q>Z&&q.push({...N,type:"event",displayName:N.eventName,category:N.category})}),o.forEach(N=>{new Date(N.lessonDate);const Z=new Date(`${N.lessonDate}T${N.startTime||"09:00"}:00`),Y=new Date(`${N.lessonDate}T${N.endTime||"10:00"}:00`);R<Y&&Q>Z&&q.push({...N,type:"lesson",displayName:N.topic,category:"lesson"})}),q},[i,o]),k=async()=>{const R=x.filter(Q=>g.includes(Q.id));for(const Q of R)try{Q.type==="event"?await ve.delete("events",Q.id):Q.type==="lesson"&&await ve.delete("lessons",Q.id)}catch(E){console.error(`Error deleting ${Q.type}:`,E),s(`Failed to delete ${Q.type}.`,"error")}s(`Successfully deleted ${R.length} conflicting item(s).`,"success"),a(),b([]),f([])},A=async R=>{R.preventDefault(),v(!0);const{eventName:Q,category:E,date:q,startTime:N,endTime:Z,isAllDay:Y}=m;let H,K;if(Y){const[D,O,z]=q.split("-").map(Number);H=new Date(D,O-1,z,0,0,0),K=new Date(D,O-1,z,23,59,59)}else{const[D,O]=N.split(":").map(Number),[z,L]=Z.split(":").map(Number),[C,V,W]=q.split("-").map(Number);H=new Date(C,V-1,W,D,O),K=new Date(C,V-1,W,z,L)}if(x.length===0){if(!Y){const D=S(H,K,n==null?void 0:n.id);if(D.length>0){b(D);const O=D.filter(C=>C.type==="event").length,z=D.filter(C=>C.type==="lesson").length;let L="Warning: This event overlaps with ";O>0&&z>0?L+=`${O} event(s) and ${z} lesson(s).`:O>0?L+=`${O} existing event(s).`:L+=`${z} existing lesson(s).`,L+=" Please review the conflicts below.",s(L,"warning");return}}}else if(x.filter(O=>!g.includes(O.id)).length>0){s('Please resolve all conflicts or select "Create Event Anyway" to proceed.',"warning");return}try{const D={eventName:m.eventName,startTime:H.toISOString(),endTime:K.toISOString(),isAllDay:m.isAllDay,category:m.category};let O;n?O=await ve.update("events",n.id,D):O=await ve.create("events",D),s(n?"Event updated successfully!":"Event created successfully!","success"),a(),t()}catch(D){console.error("Error saving event:",D),console.error("Error details:",D.message),console.error("Error response:",D.response),console.error("Error data:",D.data),console.error("Error status:",D.status);let O="Failed to save event.";D.message&&(O+=` ${D.message}`),D.data&&D.data.message&&(O+=` ${D.data.message}`),s(O,"error")}finally{v(!1)}},F=w();return r.jsx(tt,{isOpen:e,onClose:t,title:n?"Edit Event":"Log New Event",headerStyle:{backgroundColor:"#EA580C"},children:r.jsxs("form",{onSubmit:A,children:[r.jsxs(At,{title:"Event Details",children:[r.jsx("div",{className:"sm:col-span-6",children:r.jsx(Ge,{label:"Event Name",name:"eventName",value:m.eventName,onChange:y,required:!0})}),r.jsxs("div",{className:"sm:col-span-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:c.map(R=>r.jsxs("button",{type:"button",onClick:()=>h(Q=>({...Q,category:R.value})),className:`p-3 rounded-lg border-2 transition-all flex flex-col items-center ${m.category===R.value?"border-gray-400 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-2",style:{backgroundColor:R.color},children:r.jsx(B,{path:R.icon,className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-xs font-medium text-gray-700",children:R.label})]},R.value))})]}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx(pn,{label:"Date",name:"date",value:m.date,onChange:y})}),r.jsxs("div",{className:"sm:col-span-3 flex items-center pt-7",children:[r.jsx("input",{type:"checkbox",id:"isAllDay",name:"isAllDay",checked:m.isAllDay,onChange:y,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isAllDay",className:"ml-2 block text-sm text-gray-900",children:"All-day event"})]}),!m.isAllDay&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sm:col-span-3",children:r.jsx($n,{label:"Start Time",name:"startTime",value:m.startTime,onChange:y,options:l})}),r.jsx("div",{className:"sm:col-span-3",children:r.jsx($n,{label:"End Time",name:"endTime",value:m.endTime,onChange:y,options:l})})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Event Preview"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:F.color},children:r.jsx(B,{path:F.icon,className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-800",children:m.eventName||"Event Name"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[m.isAllDay?"All Day":`${m.startTime} - ${m.endTime}`,"  ",F.label]})]})]})]}),x.length>0&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Overlapping Events Detected"}),r.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["This event conflicts with the following existing items. ",r.jsx("strong",{children:"Check the boxes next to the items you want to delete"})," to resolve conflicts:"]}),r.jsx("div",{className:"space-y-2",children:x.map((R,Q)=>{var E,q;return r.jsxs("div",{className:"flex items-center justify-between bg-white rounded-md p-3 border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:R.type==="event"?((E=c.find(N=>N.value===R.category))==null?void 0:E.color)||"#6B7280":"#3B82F6"},children:r.jsx(B,{path:R.type==="event"?((q=c.find(N=>N.value===R.category))==null?void 0:q.icon)||T.CALENDAR:T.LESSON,className:"w-4 h-4 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[R.displayName,r.jsxs("span",{className:"ml-2 text-xs text-gray-500 capitalize",children:["(",R.type,")"]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:R.type==="event"?`${new Date(R.startTime).toLocaleDateString()}  ${new Date(R.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})} - ${new Date(R.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}`:`${new Date(R.lessonDate).toLocaleDateString()}  ${R.startTime||"09:00"} - ${R.endTime||"10:00"}`})]})]}),r.jsxs("div",{className:"flex items-center ml-3",children:[r.jsx("input",{type:"checkbox",id:`conflict-${R.id}`,checked:g.includes(R.id),onChange:N=>_(R.id,N.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:`conflict-${R.id}`,className:"ml-2 text-sm text-gray-700",children:"Delete"})]})]},R.id)})}),r.jsxs("div",{className:"mt-4 flex space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>{b([]),f([])},className:"px-4 py-2 text-sm rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 border border-gray-300",children:"Cancel"}),r.jsx("button",{type:"button",onClick:k,disabled:p||g.length===0,className:"px-4 py-2 text-sm rounded-md text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed",title:g.length===0?"Select items to delete first":"",children:p?"Deleting...":g.length===0?"Select Items to Delete":`Delete ${g.length} Selected`}),r.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 text-sm rounded-md text-white bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-400 disabled:cursor-not-allowed",children:p?"Creating Event...":"Create Event Anyway"})]})]})]})}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 rounded-lg text-white bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 disabled:cursor-not-allowed",children:p?"Saving...":"Save Event"})]})]})})},QN=({events:e})=>{const t=Array.from({length:16},(c,d)=>d+8),n=new Date,s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()+(n.getDay()===0?-6:1))),a=Array.from({length:7}).map((c,d)=>{const u=new Date(s);return u.setDate(s.getDate()+d),u}),i=c=>(c.getDay()+6)%7,o=i(new Date),l=c=>{if(c.color)return c.color;if(c.type==="event"&&c.category)return{meeting:"#3B82F6",workshop:"#10B981",presentation:"#F59E0B",exam:"#EF4444",celebration:"#EC4899",maintenance:"#8B5CF6",other:"#6B7280"}[c.category]||"rgb(16, 185, 129)";switch(c.type){case"lesson":return"rgb(59, 130, 246)";case"birthday":return"rgb(236, 72, 153)";case"event":return"rgb(16, 185, 129)";default:return"rgb(107, 114, 128)"}};return r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-[100px_repeat(7,_minmax(0,_1fr))]",children:[r.jsx("div",{className:"row-start-1 col-start-1"}),a.map((c,d)=>r.jsxs("div",{className:`text-center font-semibold p-2 border-l border-gray-200 ${d===o?"text-blue-600":"text-gray-600"}`,children:[r.jsx("div",{children:new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(c)}),r.jsx("div",{className:"text-xs font-normal",children:He(c,{format:"short"})})]},d)),r.jsx("div",{className:"col-start-1 col-span-1 row-start-2 grid",style:{gridTemplateRows:`repeat(${t.length}, minmax(0, 1fr))`},children:t.map(c=>r.jsx("div",{className:"h-12 text-center pr-2 border-t border-gray-200 flex items-center justify-center",children:r.jsx("span",{className:"text-sm text-gray-700",children:`${c.toString().padStart(2,"0")}:00`})},c))}),r.jsxs("div",{className:"col-start-2 col-span-7 row-start-2 grid grid-cols-7 relative",style:{gridTemplateRows:`repeat(${t.length}, minmax(0, 1fr))`},children:[Array.from({length:t.length*7}).map((c,d)=>r.jsx("div",{className:"border-l border-t border-gray-200"},d)),e.map(c=>{let d,u;if(c.type==="lesson"){const y=(c.startTime instanceof Date?c.startTime:new Date(c.startTime)).toISOString().split("T")[0];d=new Date(`${y}T${c.originalStartTime||"09:00"}:00`),u=new Date(`${y}T${c.originalEndTime||"10:00"}:00`)}else d=c.startTime instanceof Date?c.startTime:new Date(c.startTime),u=c.endTime?c.endTime instanceof Date?c.endTime:new Date(c.endTime):new Date(d.getTime()+60*60*1e3);const m=i(d),h=d.getHours()+d.getMinutes()/60,p=u.getHours()+u.getMinutes()/60;if(p<8||h>23||c.type==="birthday")return null;const v=(Math.max(h,8)-8)/t.length*100,x=(Math.min(p,24)-Math.max(h,8))/t.length*100,b=m/7*100,g=1/7*100;return r.jsxs("div",{className:"absolute p-1 rounded text-white text-xs overflow-hidden mx-px flex flex-col justify-center text-center",style:{top:`${v}%`,height:`${x}%`,left:`${b}%`,width:`calc(${g}% - 2px)`,backgroundColor:l(c)},children:[r.jsx("p",{className:"font-bold leading-tight",children:c.eventName}),c.groupName&&r.jsx("p",{className:"text-[0.6rem] text-white/80",children:c.groupName}),r.jsxs("p",{className:"text-[0.6rem] text-white/80",children:[new Date(d).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})," - ",new Date(u).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})]})]},c.id)})]})]})})};function ki(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qg={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(s,a,i){function o(d,u){if(!a[d]){if(!s[d]){var m=typeof ki=="function"&&ki;if(!u&&m)return m(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var p=a[d]={exports:{}};s[d][0].call(p.exports,function(v){var x=s[d][1][v];return o(x||v)},p,p.exports,n,s,a,i)}return a[d].exports}for(var l=typeof ki=="function"&&ki,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,s,a){var i=n("./utils"),o=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var d,u,m,h,p,v,x,b=[],g=0,f=c.length,y=f,w=i.getTypeOf(c)!=="string";g<c.length;)y=f-g,m=w?(d=c[g++],u=g<f?c[g++]:0,g<f?c[g++]:0):(d=c.charCodeAt(g++),u=g<f?c.charCodeAt(g++):0,g<f?c.charCodeAt(g++):0),h=d>>2,p=(3&d)<<4|u>>4,v=1<y?(15&u)<<2|m>>6:64,x=2<y?63&m:64,b.push(l.charAt(h)+l.charAt(p)+l.charAt(v)+l.charAt(x));return b.join("")},a.decode=function(c){var d,u,m,h,p,v,x=0,b=0,g="data:";if(c.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var f,y=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&y--,c.charAt(c.length-2)===l.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=o.uint8array?new Uint8Array(0|y):new Array(0|y);x<c.length;)d=l.indexOf(c.charAt(x++))<<2|(h=l.indexOf(c.charAt(x++)))>>4,u=(15&h)<<4|(p=l.indexOf(c.charAt(x++)))>>2,m=(3&p)<<6|(v=l.indexOf(c.charAt(x++))),f[b++]=d,p!==64&&(f[b++]=u),v!==64&&(f[b++]=m);return f}},{"./support":30,"./utils":32}],2:[function(n,s,a){var i=n("./external"),o=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function d(u,m,h,p,v){this.compressedSize=u,this.uncompressedSize=m,this.crc32=h,this.compression=p,this.compressedContent=v}d.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),m=this;return u.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,m,h){return u.pipe(new l).pipe(new c("uncompressedSize")).pipe(m.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",m)},s.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,s,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,s,a){var i=n("./utils"),o=function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c}();s.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(d,u,m,h){var p=o,v=h+m;d^=-1;for(var x=h;x<v;x++)d=d>>>8^p[255&(d^u[x])];return-1^d}(0|c,l,l.length,0):function(d,u,m,h){var p=o,v=h+m;d^=-1;for(var x=h;x<v;x++)d=d>>>8^p[255&(d^u.charCodeAt(x))];return-1^d}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(n,s,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,s,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),s.exports={Promise:i}},{lie:37}],7:[function(n,s,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),l=n("./utils"),c=n("./stream/GenericWorker"),d=i?"uint8array":"array";function u(m,h){c.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=h,this.meta={}}a.magic="\b\0",l.inherits(u,c),u.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,m.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(h){m.push({data:h,meta:m.meta})}},a.compressWorker=function(m){return new u("Deflate",m)},a.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,s,a){function i(p,v){var x,b="";for(x=0;x<v;x++)b+=String.fromCharCode(255&p),p>>>=8;return b}function o(p,v,x,b,g,f){var y,w,_=p.file,S=p.compression,k=f!==d.utf8encode,A=l.transformTo("string",f(_.name)),F=l.transformTo("string",d.utf8encode(_.name)),R=_.comment,Q=l.transformTo("string",f(R)),E=l.transformTo("string",d.utf8encode(R)),q=F.length!==_.name.length,N=E.length!==R.length,Z="",Y="",H="",K=_.dir,D=_.date,O={crc32:0,compressedSize:0,uncompressedSize:0};v&&!x||(O.crc32=p.crc32,O.compressedSize=p.compressedSize,O.uncompressedSize=p.uncompressedSize);var z=0;v&&(z|=8),k||!q&&!N||(z|=2048);var L=0,C=0;K&&(L|=16),g==="UNIX"?(C=798,L|=function(W,ie){var he=W;return W||(he=ie?16893:33204),(65535&he)<<16}(_.unixPermissions,K)):(C=20,L|=function(W){return 63&(W||0)}(_.dosPermissions)),y=D.getUTCHours(),y<<=6,y|=D.getUTCMinutes(),y<<=5,y|=D.getUTCSeconds()/2,w=D.getUTCFullYear()-1980,w<<=4,w|=D.getUTCMonth()+1,w<<=5,w|=D.getUTCDate(),q&&(Y=i(1,1)+i(u(A),4)+F,Z+="up"+i(Y.length,2)+Y),N&&(H=i(1,1)+i(u(Q),4)+E,Z+="uc"+i(H.length,2)+H);var V="";return V+=`
\0`,V+=i(z,2),V+=S.magic,V+=i(y,2),V+=i(w,2),V+=i(O.crc32,4),V+=i(O.compressedSize,4),V+=i(O.uncompressedSize,4),V+=i(A.length,2),V+=i(Z.length,2),{fileRecord:m.LOCAL_FILE_HEADER+V+A+Z,dirRecord:m.CENTRAL_FILE_HEADER+i(C,2)+V+i(Q.length,2)+"\0\0\0\0"+i(L,4)+i(b,4)+A+Z+Q}}var l=n("../utils"),c=n("../stream/GenericWorker"),d=n("../utf8"),u=n("../crc32"),m=n("../signature");function h(p,v,x,b){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=x,this.encodeFileName=b,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,c),h.prototype.push=function(p){var v=p.meta.percent||0,x=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:x?(v+100*(x-b-1))/x:100}}))},h.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var x=o(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,x=o(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),v)this.push({data:function(b){return m.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var x=this.bytesWritten-p,b=function(g,f,y,w,_){var S=l.transformTo("string",_(w));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(f,4)+i(y,4)+i(S.length,2)+S}(this.dirRecords.length,x,p,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(x){v.processChunk(x)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(x){v.error(x)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(p){var v=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var x=0;x<v.length;x++)try{v[x].error(p)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},s.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,s,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(l,c,d){var u=new o(c.streamFiles,d,c.platform,c.encodeFileName),m=0;try{l.forEach(function(h,p){m++;var v=function(f,y){var w=f||y,_=i[w];if(!_)throw new Error(w+" is not a valid compression method !");return _}(p.options.compression,c.compression),x=p.options.compressionOptions||c.compressionOptions||{},b=p.dir,g=p.date;p._compressWorker(v,x).withStreamInfo("file",{name:h,dir:b,date:g,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(u)}),u.entriesCount=m}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,s,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=n("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,s,a){var i=n("./utils"),o=n("./external"),l=n("./utf8"),c=n("./zipEntries"),d=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function m(h){return new o.Promise(function(p,v){var x=h.decompressed.getContentWorker().pipe(new d);x.on("error",function(b){v(b)}).on("end",function(){x.streamInfo.crc32!==h.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}s.exports=function(h,p){var v=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(x){var b=new c(p);return b.load(x),b}).then(function(x){var b=[o.Promise.resolve(x)],g=x.files;if(p.checkCRC32)for(var f=0;f<g.length;f++)b.push(m(g[f]));return o.Promise.all(b)}).then(function(x){for(var b=x.shift(),g=b.files,f=0;f<g.length;f++){var y=g[f],w=y.fileNameStr,_=i.resolve(y.fileNameStr);v.file(_,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:p.createFolders}),y.dir||(v.file(_).unsafeOriginalName=w)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,s,a){var i=n("../utils"),o=n("../stream/GenericWorker");function l(c,d){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(l,o),l.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,s,a){var i=n("readable-stream").Readable;function o(l,c,d){i.call(this,c),this._helper=l;var u=this;l.on("data",function(m,h){u.push(m)||u._helper.pause(),d&&d(h)}).on("error",function(m){u.emit("error",m)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},s.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,s,a){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,s,a){function i(_,S,k){var A,F=l.getTypeOf(S),R=l.extend(k||{},u);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(_=g(_)),R.createFolders&&(A=b(_))&&f.call(this,A,!0);var Q=F==="string"&&R.binary===!1&&R.base64===!1;k&&k.binary!==void 0||(R.binary=!Q),(S instanceof m&&S.uncompressedSize===0||R.dir||!S||S.length===0)&&(R.base64=!1,R.binary=!0,S="",R.compression="STORE",F="string");var E=null;E=S instanceof m||S instanceof c?S:v.isNode&&v.isStream(S)?new x(_,S):l.prepareContent(_,S,R.binary,R.optimizedBinaryString,R.base64);var q=new h(_,E,R);this.files[_]=q}var o=n("./utf8"),l=n("./utils"),c=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),u=n("./defaults"),m=n("./compressedObject"),h=n("./zipObject"),p=n("./generate"),v=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),b=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var S=_.lastIndexOf("/");return 0<S?_.substring(0,S):""},g=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},f=function(_,S){return S=S!==void 0?S:u.createFolders,_=g(_),this.files[_]||i.call(this,_,null,{dir:!0,createFolders:S}),this.files[_]};function y(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var S,k,A;for(S in this.files)A=this.files[S],(k=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&_(k,A)},filter:function(_){var S=[];return this.forEach(function(k,A){_(k,A)&&S.push(A)}),S},file:function(_,S,k){if(arguments.length!==1)return _=this.root+_,i.call(this,_,S,k),this;if(y(_)){var A=_;return this.filter(function(R,Q){return!Q.dir&&A.test(R)})}var F=this.files[this.root+_];return F&&!F.dir?F:null},folder:function(_){if(!_)return this;if(y(_))return this.filter(function(F,R){return R.dir&&_.test(F)});var S=this.root+_,k=f.call(this,S),A=this.clone();return A.root=k.name,A},remove:function(_){_=this.root+_;var S=this.files[_];if(S||(_.slice(-1)!=="/"&&(_+="/"),S=this.files[_]),S&&!S.dir)delete this.files[_];else for(var k=this.filter(function(F,R){return R.name.slice(0,_.length)===_}),A=0;A<k.length;A++)delete this.files[k[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var S,k={};try{if((k=l.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");l.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var A=k.comment||this.comment||"";S=p.generateWorker(this,k,A)}catch(F){(S=new c("error")).error(F)}return new d(S,k.type||"string",k.mimeType)},generateAsync:function(_,S){return this.generateInternalStream(_).accumulate(S)},generateNodeStream:function(_,S){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(S)}};s.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,s,a){s.exports=n("stream")},{stream:void 0}],17:[function(n,s,a){var i=n("./DataReader");function o(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}n("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),d=l.charCodeAt(1),u=l.charCodeAt(2),m=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===d&&this.data[h+2]===u&&this.data[h+3]===m)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),d=l.charCodeAt(1),u=l.charCodeAt(2),m=l.charCodeAt(3),h=this.readData(4);return c===h[0]&&d===h[1]&&u===h[2]&&m===h[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},s.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,s,a){var i=n("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,d=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=l,d},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},s.exports=o},{"../utils":32}],19:[function(n,s,a){var i=n("./Uint8ArrayReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},s.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,s,a){var i=n("./DataReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},s.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,s,a){var i=n("./ArrayReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},s.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,s,a){var i=n("../utils"),o=n("../support"),l=n("./ArrayReader"),c=n("./StringReader"),d=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");s.exports=function(m){var h=i.getTypeOf(m);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new d(m):o.uint8array?new u(i.transformTo("uint8array",m)):new l(i.transformTo("array",m)):new c(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,s,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,s,a){var i=n("./GenericWorker"),o=n("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},s.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,s,a){var i=n("./GenericWorker"),o=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},s.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,s,a){var i=n("../utils"),o=n("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}o.prototype.processChunk.call(this,c)},s.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,s,a){var i=n("../utils"),o=n("./GenericWorker");function l(c){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){d.dataIsReady=!0,d.data=u,d.max=u&&u.length||0,d.type=i.getTypeOf(u),d.isPaused||d._tickAndRepeat()},function(u){d.error(u)})}i.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,s,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},s.exports=i},{}],29:[function(n,s,a){var i=n("../utils"),o=n("./ConvertWorker"),l=n("./GenericWorker"),c=n("../base64"),d=n("../support"),u=n("../external"),m=null;if(d.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(v,x){return new u.Promise(function(b,g){var f=[],y=v._internalType,w=v._outputType,_=v._mimeType;v.on("data",function(S,k){f.push(S),x&&x(k)}).on("error",function(S){f=[],g(S)}).on("end",function(){try{var S=function(k,A,F){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",A),F);case"base64":return c.encode(A);default:return i.transformTo(k,A)}}(w,function(k,A){var F,R=0,Q=null,E=0;for(F=0;F<A.length;F++)E+=A[F].length;switch(k){case"string":return A.join("");case"array":return Array.prototype.concat.apply([],A);case"uint8array":for(Q=new Uint8Array(E),F=0;F<A.length;F++)Q.set(A[F],R),R+=A[F].length;return Q;case"nodebuffer":return Buffer.concat(A);default:throw new Error("concat : unsupported type '"+k+"'")}}(y,f),_);b(S)}catch(k){g(k)}f=[]}).resume()})}function p(v,x,b){var g=x;switch(x){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=x,this._mimeType=b,i.checkSupport(g),this._worker=v.pipe(new o(g)),v.lock()}catch(f){this._worker=new l("error"),this._worker.error(f)}}p.prototype={accumulate:function(v){return h(this,v)},on:function(v,x){var b=this;return v==="data"?this._worker.on(v,function(g){x.call(b,g.data,g.meta)}):this._worker.on(v,function(){i.delay(x,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},v)}},s.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,s,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,s,a){for(var i=n("./utils"),o=n("./support"),l=n("./nodejsUtils"),c=n("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;d[254]=d[254]=1;function m(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}a.utf8encode=function(p){return o.nodebuffer?l.newBufferFrom(p,"utf-8"):function(v){var x,b,g,f,y,w=v.length,_=0;for(f=0;f<w;f++)(64512&(b=v.charCodeAt(f)))==55296&&f+1<w&&(64512&(g=v.charCodeAt(f+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),f++),_+=b<128?1:b<2048?2:b<65536?3:4;for(x=o.uint8array?new Uint8Array(_):new Array(_),f=y=0;y<_;f++)(64512&(b=v.charCodeAt(f)))==55296&&f+1<w&&(64512&(g=v.charCodeAt(f+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),f++),b<128?x[y++]=b:(b<2048?x[y++]=192|b>>>6:(b<65536?x[y++]=224|b>>>12:(x[y++]=240|b>>>18,x[y++]=128|b>>>12&63),x[y++]=128|b>>>6&63),x[y++]=128|63&b);return x}(p)},a.utf8decode=function(p){return o.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):function(v){var x,b,g,f,y=v.length,w=new Array(2*y);for(x=b=0;x<y;)if((g=v[x++])<128)w[b++]=g;else if(4<(f=d[g]))w[b++]=65533,x+=f-1;else{for(g&=f===2?31:f===3?15:7;1<f&&x<y;)g=g<<6|63&v[x++],f--;1<f?w[b++]=65533:g<65536?w[b++]=g:(g-=65536,w[b++]=55296|g>>10&1023,w[b++]=56320|1023&g)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),i.applyFromCharCode(w)}(p=i.transformTo(o.uint8array?"uint8array":"array",p))},i.inherits(m,c),m.prototype.processChunk=function(p){var v=i.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=v;(v=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),v.set(x,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(f,y){var w;for((y=y||f.length)>f.length&&(y=f.length),w=y-1;0<=w&&(192&f[w])==128;)w--;return w<0||w===0?y:w+d[f[w]]>y?w:y}(v),g=v;b!==v.length&&(o.uint8array?(g=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(g=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:a.utf8decode(g),meta:p.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=m,i.inherits(h,c),h.prototype.processChunk=function(p){this.push({data:a.utf8encode(p.data),meta:p.meta})},a.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,s,a){var i=n("./support"),o=n("./base64"),l=n("./nodejsUtils"),c=n("./external");function d(x){return x}function u(x,b){for(var g=0;g<x.length;++g)b[g]=255&x.charCodeAt(g);return b}n("setimmediate"),a.newBlob=function(x,b){a.checkSupport("blob");try{return new Blob([x],{type:b})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(x),g.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,b,g){var f=[],y=0,w=x.length;if(w<=g)return String.fromCharCode.apply(null,x);for(;y<w;)b==="array"||b==="nodebuffer"?f.push(String.fromCharCode.apply(null,x.slice(y,Math.min(y+g,w)))):f.push(String.fromCharCode.apply(null,x.subarray(y,Math.min(y+g,w)))),y+=g;return f.join("")},stringifyByChar:function(x){for(var b="",g=0;g<x.length;g++)b+=String.fromCharCode(x[g]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(x){var b=65536,g=a.getTypeOf(x),f=!0;if(g==="uint8array"?f=m.applyCanBeUsed.uint8array:g==="nodebuffer"&&(f=m.applyCanBeUsed.nodebuffer),f)for(;1<b;)try{return m.stringifyByChunk(x,g,b)}catch{b=Math.floor(b/2)}return m.stringifyByChar(x)}function p(x,b){for(var g=0;g<x.length;g++)b[g]=x[g];return b}a.applyFromCharCode=h;var v={};v.string={string:d,array:function(x){return u(x,new Array(x.length))},arraybuffer:function(x){return v.string.uint8array(x).buffer},uint8array:function(x){return u(x,new Uint8Array(x.length))},nodebuffer:function(x){return u(x,l.allocBuffer(x.length))}},v.array={string:h,array:d,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(x)}},v.arraybuffer={string:function(x){return h(new Uint8Array(x))},array:function(x){return p(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:d,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(new Uint8Array(x))}},v.uint8array={string:h,array:function(x){return p(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:d,nodebuffer:function(x){return l.newBufferFrom(x)}},v.nodebuffer={string:h,array:function(x){return p(x,new Array(x.length))},arraybuffer:function(x){return v.nodebuffer.uint8array(x).buffer},uint8array:function(x){return p(x,new Uint8Array(x.length))},nodebuffer:d},a.transformTo=function(x,b){if(b=b||"",!x)return b;a.checkSupport(x);var g=a.getTypeOf(b);return v[g][x](b)},a.resolve=function(x){for(var b=x.split("/"),g=[],f=0;f<b.length;f++){var y=b[f];y==="."||y===""&&f!==0&&f!==b.length-1||(y===".."?g.pop():g.push(y))}return g.join("/")},a.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(x){var b,g,f="";for(g=0;g<(x||"").length;g++)f+="\\x"+((b=x.charCodeAt(g))<16?"0":"")+b.toString(16).toUpperCase();return f},a.delay=function(x,b,g){setImmediate(function(){x.apply(g||null,b||[])})},a.inherits=function(x,b){function g(){}g.prototype=b.prototype,x.prototype=new g},a.extend=function(){var x,b,g={};for(x=0;x<arguments.length;x++)for(b in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],b)&&g[b]===void 0&&(g[b]=arguments[x][b]);return g},a.prepareContent=function(x,b,g,f,y){return c.Promise.resolve(b).then(function(w){return i.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new c.Promise(function(_,S){var k=new FileReader;k.onload=function(A){_(A.target.result)},k.onerror=function(A){S(A.target.error)},k.readAsArrayBuffer(w)}):w}).then(function(w){var _=a.getTypeOf(w);return _?(_==="arraybuffer"?w=a.transformTo("uint8array",w):_==="string"&&(y?w=o.decode(w):g&&f!==!0&&(w=function(S){return u(S,i.uint8array?new Uint8Array(S.length):new Array(S.length))}(w))),w):c.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,s,a){var i=n("./reader/readerFor"),o=n("./utils"),l=n("./signature"),c=n("./zipEntry"),d=n("./support");function u(m){this.files=[],this.loadOptions=m}u.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(m)+")")}},isSignature:function(m,h){var p=this.reader.index;this.reader.setIndex(m);var v=this.reader.readString(4)===h;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),h=d.uint8array?"uint8array":"array",p=o.transformTo(h,m);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,h,p,v=this.zip64EndOfCentralSize-44;0<v;)m=this.reader.readInt(2),h=this.reader.readInt(4),p=this.reader.readData(h),this.zip64ExtensibleData[m]={id:m,length:h,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,h;for(m=0;m<this.files.length;m++)h=this.files[m],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(m=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var h=m;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=h-p;if(0<v)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,s,a){var i=n("./reader/readerFor"),o=n("./utils"),l=n("./compressedObject"),c=n("./crc32"),d=n("./utf8"),u=n("./compressions"),m=n("./support");function h(p,v){this.options=p,this.loadOptions=v}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,x;if(p.skip(22),this.fileNameLength=p.readInt(2),x=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var g in u)if(Object.prototype.hasOwnProperty.call(u,g)&&u[g].magic===b)return u[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,x,b,g=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<g;)v=p.readInt(2),x=p.readInt(2),b=p.readData(x),this.extraFields[v]={id:v,length:x,value:b};p.setIndex(g)},handleUTF8:function(){var p=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var x=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var g=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=i(p.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:d.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=i(p.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:d.utf8decode(v.readData(p.length-5))}return null}},s.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,s,a){function i(v,x,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=x,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),c=n("./utf8"),d=n("./compressedObject"),u=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var x=null,b="string";try{if(!v)throw new Error("No output type specified.");var g=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),x=this._decompressWorker();var f=!this._dataBinary;f&&!g&&(x=x.pipe(new c.Utf8EncodeWorker)),!f&&g&&(x=x.pipe(new c.Utf8DecodeWorker))}catch(y){(x=new u("error")).error(y)}return new o(x,b,"")},async:function(v,x){return this.internalStream(v).accumulate(x)},nodeStream:function(v,x){return this.internalStream(v||"nodebuffer").toNodejsStream(x)},_compressWorker:function(v,x){if(this._data instanceof d&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(b,v,x)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof u?this._data:new l(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<m.length;p++)i.prototype[m[p]]=h;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,s,a){(function(i){var o,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var d=0,u=new c(v),m=i.document.createTextNode("");u.observe(m,{characterData:!0}),o=function(){m.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){v(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(v,0)};else{var h=new i.MessageChannel;h.port1.onmessage=v,o=function(){h.port2.postMessage(0)}}var p=[];function v(){var x,b;l=!0;for(var g=p.length;g;){for(b=p,p=[],x=-1;++x<g;)b[x]();g=p.length}l=!1}s.exports=function(x){p.push(x)!==1||l||o()}}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,s,a){var i=n("immediate");function o(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];function m(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,g!==o&&x(this,g)}function h(g,f,y){this.promise=g,typeof f=="function"&&(this.onFulfilled=f,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function p(g,f,y){i(function(){var w;try{w=f(y)}catch(_){return l.reject(g,_)}w===g?l.reject(g,new TypeError("Cannot resolve promise with itself")):l.resolve(g,w)})}function v(g){var f=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof f=="function")return function(){f.apply(g,arguments)}}function x(g,f){var y=!1;function w(k){y||(y=!0,l.reject(g,k))}function _(k){y||(y=!0,l.resolve(g,k))}var S=b(function(){f(_,w)});S.status==="error"&&w(S.value)}function b(g,f){var y={};try{y.value=g(f),y.status="success"}catch(w){y.status="error",y.value=w}return y}(s.exports=m).prototype.finally=function(g){if(typeof g!="function")return this;var f=this.constructor;return this.then(function(y){return f.resolve(g()).then(function(){return y})},function(y){return f.resolve(g()).then(function(){throw y})})},m.prototype.catch=function(g){return this.then(null,g)},m.prototype.then=function(g,f){if(typeof g!="function"&&this.state===d||typeof f!="function"&&this.state===c)return this;var y=new this.constructor(o);return this.state!==u?p(y,this.state===d?g:f,this.outcome):this.queue.push(new h(y,g,f)),y},h.prototype.callFulfilled=function(g){l.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){p(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){l.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){p(this.promise,this.onRejected,g)},l.resolve=function(g,f){var y=b(v,f);if(y.status==="error")return l.reject(g,y.value);var w=y.value;if(w)x(g,w);else{g.state=d,g.outcome=f;for(var _=-1,S=g.queue.length;++_<S;)g.queue[_].callFulfilled(f)}return g},l.reject=function(g,f){g.state=c,g.outcome=f;for(var y=-1,w=g.queue.length;++y<w;)g.queue[y].callRejected(f);return g},m.resolve=function(g){return g instanceof this?g:l.resolve(new this(o),g)},m.reject=function(g){var f=new this(o);return l.reject(f,g)},m.all=function(g){var f=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=g.length,w=!1;if(!y)return this.resolve([]);for(var _=new Array(y),S=0,k=-1,A=new this(o);++k<y;)F(g[k],k);return A;function F(R,Q){f.resolve(R).then(function(E){_[Q]=E,++S!==y||w||(w=!0,l.resolve(A,_))},function(E){w||(w=!0,l.reject(A,E))})}},m.race=function(g){var f=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=g.length,w=!1;if(!y)return this.resolve([]);for(var _=-1,S=new this(o);++_<y;)k=g[_],f.resolve(k).then(function(A){w||(w=!0,l.resolve(S,A))},function(A){w||(w=!0,l.reject(S,A))});var k;return S}},{immediate:36}],38:[function(n,s,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,s,a){var i=n("./zlib/deflate"),o=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/messages"),d=n("./zlib/zstream"),u=Object.prototype.toString,m=0,h=-1,p=0,v=8;function x(g){if(!(this instanceof x))return new x(g);this.options=o.assign({level:h,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},g||{});var f=this.options;f.raw&&0<f.windowBits?f.windowBits=-f.windowBits:f.gzip&&0<f.windowBits&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=i.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(y!==m)throw new Error(c[y]);if(f.header&&i.deflateSetHeader(this.strm,f.header),f.dictionary){var w;if(w=typeof f.dictionary=="string"?l.string2buf(f.dictionary):u.call(f.dictionary)==="[object ArrayBuffer]"?new Uint8Array(f.dictionary):f.dictionary,(y=i.deflateSetDictionary(this.strm,w))!==m)throw new Error(c[y]);this._dict_set=!0}}function b(g,f){var y=new x(f);if(y.push(g,!0),y.err)throw y.msg||c[y.err];return y.result}x.prototype.push=function(g,f){var y,w,_=this.strm,S=this.options.chunkSize;if(this.ended)return!1;w=f===~~f?f:f===!0?4:0,typeof g=="string"?_.input=l.string2buf(g):u.call(g)==="[object ArrayBuffer]"?_.input=new Uint8Array(g):_.input=g,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(S),_.next_out=0,_.avail_out=S),(y=i.deflate(_,w))!==1&&y!==m)return this.onEnd(y),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(_.output,_.next_out))):this.onData(o.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&y!==1);return w===4?(y=i.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===m):w!==2||(this.onEnd(m),!(_.avail_out=0))},x.prototype.onData=function(g){this.chunks.push(g)},x.prototype.onEnd=function(g){g===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Deflate=x,a.deflate=b,a.deflateRaw=function(g,f){return(f=f||{}).raw=!0,b(g,f)},a.gzip=function(g,f){return(f=f||{}).gzip=!0,b(g,f)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,s,a){var i=n("./zlib/inflate"),o=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/constants"),d=n("./zlib/messages"),u=n("./zlib/zstream"),m=n("./zlib/gzheader"),h=Object.prototype.toString;function p(x){if(!(this instanceof p))return new p(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||x&&x.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,b.windowBits);if(g!==c.Z_OK)throw new Error(d[g]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function v(x,b){var g=new p(b);if(g.push(x,!0),g.err)throw g.msg||d[g.err];return g.result}p.prototype.push=function(x,b){var g,f,y,w,_,S,k=this.strm,A=this.options.chunkSize,F=this.options.dictionary,R=!1;if(this.ended)return!1;f=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof x=="string"?k.input=l.binstring2buf(x):h.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(A),k.next_out=0,k.avail_out=A),(g=i.inflate(k,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&F&&(S=typeof F=="string"?l.string2buf(F):h.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,g=i.inflateSetDictionary(this.strm,S)),g===c.Z_BUF_ERROR&&R===!0&&(g=c.Z_OK,R=!1),g!==c.Z_STREAM_END&&g!==c.Z_OK)return this.onEnd(g),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&g!==c.Z_STREAM_END&&(k.avail_in!==0||f!==c.Z_FINISH&&f!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=l.utf8border(k.output,k.next_out),w=k.next_out-y,_=l.buf2string(k.output,y),k.next_out=w,k.avail_out=A-w,w&&o.arraySet(k.output,k.output,y,w,0),this.onData(_)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(R=!0)}while((0<k.avail_in||k.avail_out===0)&&g!==c.Z_STREAM_END);return g===c.Z_STREAM_END&&(f=c.Z_FINISH),f===c.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===c.Z_OK):f!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(k.avail_out=0))},p.prototype.onData=function(x){this.chunks.push(x)},p.prototype.onEnd=function(x){x===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Inflate=p,a.inflate=v,a.inflateRaw=function(x,b){return(b=b||{}).raw=!0,v(x,b)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,s,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var m in u)u.hasOwnProperty(m)&&(c[m]=u[m])}}return c},a.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var o={arraySet:function(c,d,u,m,h){if(d.subarray&&c.subarray)c.set(d.subarray(u,u+m),h);else for(var p=0;p<m;p++)c[h+p]=d[u+p]},flattenChunks:function(c){var d,u,m,h,p,v;for(d=m=0,u=c.length;d<u;d++)m+=c[d].length;for(v=new Uint8Array(m),d=h=0,u=c.length;d<u;d++)p=c[d],v.set(p,h),h+=p.length;return v}},l={arraySet:function(c,d,u,m,h){for(var p=0;p<m;p++)c[h+p]=d[u+p]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(i)},{}],42:[function(n,s,a){var i=n("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function u(m,h){if(h<65537&&(m.subarray&&l||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,h));for(var p="",v=0;v<h;v++)p+=String.fromCharCode(m[v]);return p}c[254]=c[254]=1,a.string2buf=function(m){var h,p,v,x,b,g=m.length,f=0;for(x=0;x<g;x++)(64512&(p=m.charCodeAt(x)))==55296&&x+1<g&&(64512&(v=m.charCodeAt(x+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),x++),f+=p<128?1:p<2048?2:p<65536?3:4;for(h=new i.Buf8(f),x=b=0;b<f;x++)(64512&(p=m.charCodeAt(x)))==55296&&x+1<g&&(64512&(v=m.charCodeAt(x+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),x++),p<128?h[b++]=p:(p<2048?h[b++]=192|p>>>6:(p<65536?h[b++]=224|p>>>12:(h[b++]=240|p>>>18,h[b++]=128|p>>>12&63),h[b++]=128|p>>>6&63),h[b++]=128|63&p);return h},a.buf2binstring=function(m){return u(m,m.length)},a.binstring2buf=function(m){for(var h=new i.Buf8(m.length),p=0,v=h.length;p<v;p++)h[p]=m.charCodeAt(p);return h},a.buf2string=function(m,h){var p,v,x,b,g=h||m.length,f=new Array(2*g);for(p=v=0;p<g;)if((x=m[p++])<128)f[v++]=x;else if(4<(b=c[x]))f[v++]=65533,p+=b-1;else{for(x&=b===2?31:b===3?15:7;1<b&&p<g;)x=x<<6|63&m[p++],b--;1<b?f[v++]=65533:x<65536?f[v++]=x:(x-=65536,f[v++]=55296|x>>10&1023,f[v++]=56320|1023&x)}return u(f,v)},a.utf8border=function(m,h){var p;for((h=h||m.length)>m.length&&(h=m.length),p=h-1;0<=p&&(192&m[p])==128;)p--;return p<0||p===0?h:p+c[m[p]]>h?p:h}},{"./common":41}],43:[function(n,s,a){s.exports=function(i,o,l,c){for(var d=65535&i|0,u=i>>>16&65535|0,m=0;l!==0;){for(l-=m=2e3<l?2e3:l;u=u+(d=d+o[c++]|0)|0,--m;);d%=65521,u%=65521}return d|u<<16|0}},{}],44:[function(n,s,a){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,s,a){var i=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();s.exports=function(o,l,c,d){var u=i,m=d+c;o^=-1;for(var h=d;h<m;h++)o=o>>>8^u[255&(o^l[h])];return-1^o}},{}],46:[function(n,s,a){var i,o=n("../utils/common"),l=n("./trees"),c=n("./adler32"),d=n("./crc32"),u=n("./messages"),m=0,h=4,p=0,v=-2,x=-1,b=4,g=2,f=8,y=9,w=286,_=30,S=19,k=2*w+1,A=15,F=3,R=258,Q=R+F+1,E=42,q=113,N=1,Z=2,Y=3,H=4;function K(j,ae){return j.msg=u[ae],ae}function D(j){return(j<<1)-(4<j?9:0)}function O(j){for(var ae=j.length;0<=--ae;)j[ae]=0}function z(j){var ae=j.state,J=ae.pending;J>j.avail_out&&(J=j.avail_out),J!==0&&(o.arraySet(j.output,ae.pending_buf,ae.pending_out,J,j.next_out),j.next_out+=J,ae.pending_out+=J,j.total_out+=J,j.avail_out-=J,ae.pending-=J,ae.pending===0&&(ae.pending_out=0))}function L(j,ae){l._tr_flush_block(j,0<=j.block_start?j.block_start:-1,j.strstart-j.block_start,ae),j.block_start=j.strstart,z(j.strm)}function C(j,ae){j.pending_buf[j.pending++]=ae}function V(j,ae){j.pending_buf[j.pending++]=ae>>>8&255,j.pending_buf[j.pending++]=255&ae}function W(j,ae){var J,U,$=j.max_chain_length,G=j.strstart,te=j.prev_length,ne=j.nice_match,ee=j.strstart>j.w_size-Q?j.strstart-(j.w_size-Q):0,ue=j.window,X=j.w_mask,P=j.prev,le=j.strstart+R,ge=ue[G+te-1],pe=ue[G+te];j.prev_length>=j.good_match&&($>>=2),ne>j.lookahead&&(ne=j.lookahead);do if(ue[(J=ae)+te]===pe&&ue[J+te-1]===ge&&ue[J]===ue[G]&&ue[++J]===ue[G+1]){G+=2,J++;do;while(ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&ue[++G]===ue[++J]&&G<le);if(U=R-(le-G),G=le-R,te<U){if(j.match_start=ae,ne<=(te=U))break;ge=ue[G+te-1],pe=ue[G+te]}}while((ae=P[ae&X])>ee&&--$!=0);return te<=j.lookahead?te:j.lookahead}function ie(j){var ae,J,U,$,G,te,ne,ee,ue,X,P=j.w_size;do{if($=j.window_size-j.lookahead-j.strstart,j.strstart>=P+(P-Q)){for(o.arraySet(j.window,j.window,P,P,0),j.match_start-=P,j.strstart-=P,j.block_start-=P,ae=J=j.hash_size;U=j.head[--ae],j.head[ae]=P<=U?U-P:0,--J;);for(ae=J=P;U=j.prev[--ae],j.prev[ae]=P<=U?U-P:0,--J;);$+=P}if(j.strm.avail_in===0)break;if(te=j.strm,ne=j.window,ee=j.strstart+j.lookahead,ue=$,X=void 0,X=te.avail_in,ue<X&&(X=ue),J=X===0?0:(te.avail_in-=X,o.arraySet(ne,te.input,te.next_in,X,ee),te.state.wrap===1?te.adler=c(te.adler,ne,X,ee):te.state.wrap===2&&(te.adler=d(te.adler,ne,X,ee)),te.next_in+=X,te.total_in+=X,X),j.lookahead+=J,j.lookahead+j.insert>=F)for(G=j.strstart-j.insert,j.ins_h=j.window[G],j.ins_h=(j.ins_h<<j.hash_shift^j.window[G+1])&j.hash_mask;j.insert&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[G+F-1])&j.hash_mask,j.prev[G&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=G,G++,j.insert--,!(j.lookahead+j.insert<F)););}while(j.lookahead<Q&&j.strm.avail_in!==0)}function he(j,ae){for(var J,U;;){if(j.lookahead<Q){if(ie(j),j.lookahead<Q&&ae===m)return N;if(j.lookahead===0)break}if(J=0,j.lookahead>=F&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+F-1])&j.hash_mask,J=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),J!==0&&j.strstart-J<=j.w_size-Q&&(j.match_length=W(j,J)),j.match_length>=F)if(U=l._tr_tally(j,j.strstart-j.match_start,j.match_length-F),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=F){for(j.match_length--;j.strstart++,j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+F-1])&j.hash_mask,J=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart,--j.match_length!=0;);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+1])&j.hash_mask;else U=l._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(U&&(L(j,!1),j.strm.avail_out===0))return N}return j.insert=j.strstart<F-1?j.strstart:F-1,ae===h?(L(j,!0),j.strm.avail_out===0?Y:H):j.last_lit&&(L(j,!1),j.strm.avail_out===0)?N:Z}function ye(j,ae){for(var J,U,$;;){if(j.lookahead<Q){if(ie(j),j.lookahead<Q&&ae===m)return N;if(j.lookahead===0)break}if(J=0,j.lookahead>=F&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+F-1])&j.hash_mask,J=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=F-1,J!==0&&j.prev_length<j.max_lazy_match&&j.strstart-J<=j.w_size-Q&&(j.match_length=W(j,J),j.match_length<=5&&(j.strategy===1||j.match_length===F&&4096<j.strstart-j.match_start)&&(j.match_length=F-1)),j.prev_length>=F&&j.match_length<=j.prev_length){for($=j.strstart+j.lookahead-F,U=l._tr_tally(j,j.strstart-1-j.prev_match,j.prev_length-F),j.lookahead-=j.prev_length-1,j.prev_length-=2;++j.strstart<=$&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+F-1])&j.hash_mask,J=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),--j.prev_length!=0;);if(j.match_available=0,j.match_length=F-1,j.strstart++,U&&(L(j,!1),j.strm.avail_out===0))return N}else if(j.match_available){if((U=l._tr_tally(j,0,j.window[j.strstart-1]))&&L(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return N}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(U=l._tr_tally(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<F-1?j.strstart:F-1,ae===h?(L(j,!0),j.strm.avail_out===0?Y:H):j.last_lit&&(L(j,!1),j.strm.avail_out===0)?N:Z}function be(j,ae,J,U,$){this.good_length=j,this.max_lazy=ae,this.nice_length=J,this.max_chain=U,this.func=$}function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=f,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*_+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(A+1),this.heap=new o.Buf16(2*w+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(j){var ae;return j&&j.state?(j.total_in=j.total_out=0,j.data_type=g,(ae=j.state).pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?E:q,j.adler=ae.wrap===2?0:1,ae.last_flush=m,l._tr_init(ae),p):K(j,v)}function De(j){var ae=de(j);return ae===p&&function(J){J.window_size=2*J.w_size,O(J.head),J.max_lazy_match=i[J.level].max_lazy,J.good_match=i[J.level].good_length,J.nice_match=i[J.level].nice_length,J.max_chain_length=i[J.level].max_chain,J.strstart=0,J.block_start=0,J.lookahead=0,J.insert=0,J.match_length=J.prev_length=F-1,J.match_available=0,J.ins_h=0}(j.state),ae}function Se(j,ae,J,U,$,G){if(!j)return v;var te=1;if(ae===x&&(ae=6),U<0?(te=0,U=-U):15<U&&(te=2,U-=16),$<1||y<$||J!==f||U<8||15<U||ae<0||9<ae||G<0||b<G)return K(j,v);U===8&&(U=9);var ne=new oe;return(j.state=ne).strm=j,ne.wrap=te,ne.gzhead=null,ne.w_bits=U,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=$+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+F-1)/F),ne.window=new o.Buf8(2*ne.w_size),ne.head=new o.Buf16(ne.hash_size),ne.prev=new o.Buf16(ne.w_size),ne.lit_bufsize=1<<$+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new o.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=ae,ne.strategy=G,ne.method=J,De(j)}i=[new be(0,0,0,0,function(j,ae){var J=65535;for(J>j.pending_buf_size-5&&(J=j.pending_buf_size-5);;){if(j.lookahead<=1){if(ie(j),j.lookahead===0&&ae===m)return N;if(j.lookahead===0)break}j.strstart+=j.lookahead,j.lookahead=0;var U=j.block_start+J;if((j.strstart===0||j.strstart>=U)&&(j.lookahead=j.strstart-U,j.strstart=U,L(j,!1),j.strm.avail_out===0)||j.strstart-j.block_start>=j.w_size-Q&&(L(j,!1),j.strm.avail_out===0))return N}return j.insert=0,ae===h?(L(j,!0),j.strm.avail_out===0?Y:H):(j.strstart>j.block_start&&(L(j,!1),j.strm.avail_out),N)}),new be(4,4,8,4,he),new be(4,5,16,8,he),new be(4,6,32,32,he),new be(4,4,16,16,ye),new be(8,16,32,32,ye),new be(8,16,128,128,ye),new be(8,32,128,256,ye),new be(32,128,258,1024,ye),new be(32,258,258,4096,ye)],a.deflateInit=function(j,ae){return Se(j,ae,f,15,8,0)},a.deflateInit2=Se,a.deflateReset=De,a.deflateResetKeep=de,a.deflateSetHeader=function(j,ae){return j&&j.state?j.state.wrap!==2?v:(j.state.gzhead=ae,p):v},a.deflate=function(j,ae){var J,U,$,G;if(!j||!j.state||5<ae||ae<0)return j?K(j,v):v;if(U=j.state,!j.output||!j.input&&j.avail_in!==0||U.status===666&&ae!==h)return K(j,j.avail_out===0?-5:v);if(U.strm=j,J=U.last_flush,U.last_flush=ae,U.status===E)if(U.wrap===2)j.adler=0,C(U,31),C(U,139),C(U,8),U.gzhead?(C(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),C(U,255&U.gzhead.time),C(U,U.gzhead.time>>8&255),C(U,U.gzhead.time>>16&255),C(U,U.gzhead.time>>24&255),C(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),C(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(C(U,255&U.gzhead.extra.length),C(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(j.adler=d(j.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(C(U,0),C(U,0),C(U,0),C(U,0),C(U,0),C(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),C(U,3),U.status=q);else{var te=f+(U.w_bits-8<<4)<<8;te|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(te|=32),te+=31-te%31,U.status=q,V(U,te),U.strstart!==0&&(V(U,j.adler>>>16),V(U,65535&j.adler)),j.adler=1}if(U.status===69)if(U.gzhead.extra){for($=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>$&&(j.adler=d(j.adler,U.pending_buf,U.pending-$,$)),z(j),$=U.pending,U.pending!==U.pending_buf_size));)C(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>$&&(j.adler=d(j.adler,U.pending_buf,U.pending-$,$)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){$=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>$&&(j.adler=d(j.adler,U.pending_buf,U.pending-$,$)),z(j),$=U.pending,U.pending===U.pending_buf_size)){G=1;break}G=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,C(U,G)}while(G!==0);U.gzhead.hcrc&&U.pending>$&&(j.adler=d(j.adler,U.pending_buf,U.pending-$,$)),G===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){$=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>$&&(j.adler=d(j.adler,U.pending_buf,U.pending-$,$)),z(j),$=U.pending,U.pending===U.pending_buf_size)){G=1;break}G=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,C(U,G)}while(G!==0);U.gzhead.hcrc&&U.pending>$&&(j.adler=d(j.adler,U.pending_buf,U.pending-$,$)),G===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&z(j),U.pending+2<=U.pending_buf_size&&(C(U,255&j.adler),C(U,j.adler>>8&255),j.adler=0,U.status=q)):U.status=q),U.pending!==0){if(z(j),j.avail_out===0)return U.last_flush=-1,p}else if(j.avail_in===0&&D(ae)<=D(J)&&ae!==h)return K(j,-5);if(U.status===666&&j.avail_in!==0)return K(j,-5);if(j.avail_in!==0||U.lookahead!==0||ae!==m&&U.status!==666){var ne=U.strategy===2?function(ee,ue){for(var X;;){if(ee.lookahead===0&&(ie(ee),ee.lookahead===0)){if(ue===m)return N;break}if(ee.match_length=0,X=l._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,X&&(L(ee,!1),ee.strm.avail_out===0))return N}return ee.insert=0,ue===h?(L(ee,!0),ee.strm.avail_out===0?Y:H):ee.last_lit&&(L(ee,!1),ee.strm.avail_out===0)?N:Z}(U,ae):U.strategy===3?function(ee,ue){for(var X,P,le,ge,pe=ee.window;;){if(ee.lookahead<=R){if(ie(ee),ee.lookahead<=R&&ue===m)return N;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=F&&0<ee.strstart&&(P=pe[le=ee.strstart-1])===pe[++le]&&P===pe[++le]&&P===pe[++le]){ge=ee.strstart+R;do;while(P===pe[++le]&&P===pe[++le]&&P===pe[++le]&&P===pe[++le]&&P===pe[++le]&&P===pe[++le]&&P===pe[++le]&&P===pe[++le]&&le<ge);ee.match_length=R-(ge-le),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=F?(X=l._tr_tally(ee,1,ee.match_length-F),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(X=l._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),X&&(L(ee,!1),ee.strm.avail_out===0))return N}return ee.insert=0,ue===h?(L(ee,!0),ee.strm.avail_out===0?Y:H):ee.last_lit&&(L(ee,!1),ee.strm.avail_out===0)?N:Z}(U,ae):i[U.level].func(U,ae);if(ne!==Y&&ne!==H||(U.status=666),ne===N||ne===Y)return j.avail_out===0&&(U.last_flush=-1),p;if(ne===Z&&(ae===1?l._tr_align(U):ae!==5&&(l._tr_stored_block(U,0,0,!1),ae===3&&(O(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),z(j),j.avail_out===0))return U.last_flush=-1,p}return ae!==h?p:U.wrap<=0?1:(U.wrap===2?(C(U,255&j.adler),C(U,j.adler>>8&255),C(U,j.adler>>16&255),C(U,j.adler>>24&255),C(U,255&j.total_in),C(U,j.total_in>>8&255),C(U,j.total_in>>16&255),C(U,j.total_in>>24&255)):(V(U,j.adler>>>16),V(U,65535&j.adler)),z(j),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?p:1)},a.deflateEnd=function(j){var ae;return j&&j.state?(ae=j.state.status)!==E&&ae!==69&&ae!==73&&ae!==91&&ae!==103&&ae!==q&&ae!==666?K(j,v):(j.state=null,ae===q?K(j,-3):p):v},a.deflateSetDictionary=function(j,ae){var J,U,$,G,te,ne,ee,ue,X=ae.length;if(!j||!j.state||(G=(J=j.state).wrap)===2||G===1&&J.status!==E||J.lookahead)return v;for(G===1&&(j.adler=c(j.adler,ae,X,0)),J.wrap=0,X>=J.w_size&&(G===0&&(O(J.head),J.strstart=0,J.block_start=0,J.insert=0),ue=new o.Buf8(J.w_size),o.arraySet(ue,ae,X-J.w_size,J.w_size,0),ae=ue,X=J.w_size),te=j.avail_in,ne=j.next_in,ee=j.input,j.avail_in=X,j.next_in=0,j.input=ae,ie(J);J.lookahead>=F;){for(U=J.strstart,$=J.lookahead-(F-1);J.ins_h=(J.ins_h<<J.hash_shift^J.window[U+F-1])&J.hash_mask,J.prev[U&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=U,U++,--$;);J.strstart=U,J.lookahead=F-1,ie(J)}return J.strstart+=J.lookahead,J.block_start=J.strstart,J.insert=J.lookahead,J.lookahead=0,J.match_length=J.prev_length=F-1,J.match_available=0,j.next_in=ne,j.input=ee,j.avail_in=te,J.wrap=G,p},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,s,a){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,s,a){s.exports=function(i,o){var l,c,d,u,m,h,p,v,x,b,g,f,y,w,_,S,k,A,F,R,Q,E,q,N,Z;l=i.state,c=i.next_in,N=i.input,d=c+(i.avail_in-5),u=i.next_out,Z=i.output,m=u-(o-i.avail_out),h=u+(i.avail_out-257),p=l.dmax,v=l.wsize,x=l.whave,b=l.wnext,g=l.window,f=l.hold,y=l.bits,w=l.lencode,_=l.distcode,S=(1<<l.lenbits)-1,k=(1<<l.distbits)-1;e:do{y<15&&(f+=N[c++]<<y,y+=8,f+=N[c++]<<y,y+=8),A=w[f&S];t:for(;;){if(f>>>=F=A>>>24,y-=F,(F=A>>>16&255)===0)Z[u++]=65535&A;else{if(!(16&F)){if(!(64&F)){A=w[(65535&A)+(f&(1<<F)-1)];continue t}if(32&F){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}R=65535&A,(F&=15)&&(y<F&&(f+=N[c++]<<y,y+=8),R+=f&(1<<F)-1,f>>>=F,y-=F),y<15&&(f+=N[c++]<<y,y+=8,f+=N[c++]<<y,y+=8),A=_[f&k];n:for(;;){if(f>>>=F=A>>>24,y-=F,!(16&(F=A>>>16&255))){if(!(64&F)){A=_[(65535&A)+(f&(1<<F)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(Q=65535&A,y<(F&=15)&&(f+=N[c++]<<y,(y+=8)<F&&(f+=N[c++]<<y,y+=8)),p<(Q+=f&(1<<F)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(f>>>=F,y-=F,(F=u-m)<Q){if(x<(F=Q-F)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(q=g,(E=0)===b){if(E+=v-F,F<R){for(R-=F;Z[u++]=g[E++],--F;);E=u-Q,q=Z}}else if(b<F){if(E+=v+b-F,(F-=b)<R){for(R-=F;Z[u++]=g[E++],--F;);if(E=0,b<R){for(R-=F=b;Z[u++]=g[E++],--F;);E=u-Q,q=Z}}}else if(E+=b-F,F<R){for(R-=F;Z[u++]=g[E++],--F;);E=u-Q,q=Z}for(;2<R;)Z[u++]=q[E++],Z[u++]=q[E++],Z[u++]=q[E++],R-=3;R&&(Z[u++]=q[E++],1<R&&(Z[u++]=q[E++]))}else{for(E=u-Q;Z[u++]=Z[E++],Z[u++]=Z[E++],Z[u++]=Z[E++],2<(R-=3););R&&(Z[u++]=Z[E++],1<R&&(Z[u++]=Z[E++]))}break}}break}}while(c<d&&u<h);c-=R=y>>3,f&=(1<<(y-=R<<3))-1,i.next_in=c,i.next_out=u,i.avail_in=c<d?d-c+5:5-(c-d),i.avail_out=u<h?h-u+257:257-(u-h),l.hold=f,l.bits=y}},{}],49:[function(n,s,a){var i=n("../utils/common"),o=n("./adler32"),l=n("./crc32"),c=n("./inffast"),d=n("./inftrees"),u=1,m=2,h=0,p=-2,v=1,x=852,b=592;function g(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(E){var q;return E&&E.state?(q=E.state,E.total_in=E.total_out=q.total=0,E.msg="",q.wrap&&(E.adler=1&q.wrap),q.mode=v,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new i.Buf32(x),q.distcode=q.distdyn=new i.Buf32(b),q.sane=1,q.back=-1,h):p}function w(E){var q;return E&&E.state?((q=E.state).wsize=0,q.whave=0,q.wnext=0,y(E)):p}function _(E,q){var N,Z;return E&&E.state?(Z=E.state,q<0?(N=0,q=-q):(N=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?p:(Z.window!==null&&Z.wbits!==q&&(Z.window=null),Z.wrap=N,Z.wbits=q,w(E))):p}function S(E,q){var N,Z;return E?(Z=new f,(E.state=Z).window=null,(N=_(E,q))!==h&&(E.state=null),N):p}var k,A,F=!0;function R(E){if(F){var q;for(k=new i.Buf32(512),A=new i.Buf32(32),q=0;q<144;)E.lens[q++]=8;for(;q<256;)E.lens[q++]=9;for(;q<280;)E.lens[q++]=7;for(;q<288;)E.lens[q++]=8;for(d(u,E.lens,0,288,k,0,E.work,{bits:9}),q=0;q<32;)E.lens[q++]=5;d(m,E.lens,0,32,A,0,E.work,{bits:5}),F=!1}E.lencode=k,E.lenbits=9,E.distcode=A,E.distbits=5}function Q(E,q,N,Z){var Y,H=E.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new i.Buf8(H.wsize)),Z>=H.wsize?(i.arraySet(H.window,q,N-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(Z<(Y=H.wsize-H.wnext)&&(Y=Z),i.arraySet(H.window,q,N-Z,Y,H.wnext),(Z-=Y)?(i.arraySet(H.window,q,N-Z,Z,0),H.wnext=Z,H.whave=H.wsize):(H.wnext+=Y,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=Y))),0}a.inflateReset=w,a.inflateReset2=_,a.inflateResetKeep=y,a.inflateInit=function(E){return S(E,15)},a.inflateInit2=S,a.inflate=function(E,q){var N,Z,Y,H,K,D,O,z,L,C,V,W,ie,he,ye,be,oe,de,De,Se,j,ae,J,U,$=0,G=new i.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return p;(N=E.state).mode===12&&(N.mode=13),K=E.next_out,Y=E.output,O=E.avail_out,H=E.next_in,Z=E.input,D=E.avail_in,z=N.hold,L=N.bits,C=D,V=O,ae=h;e:for(;;)switch(N.mode){case v:if(N.wrap===0){N.mode=13;break}for(;L<16;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(2&N.wrap&&z===35615){G[N.check=0]=255&z,G[1]=z>>>8&255,N.check=l(N.check,G,2,0),L=z=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&z)<<8)+(z>>8))%31){E.msg="incorrect header check",N.mode=30;break}if((15&z)!=8){E.msg="unknown compression method",N.mode=30;break}if(L-=4,j=8+(15&(z>>>=4)),N.wbits===0)N.wbits=j;else if(j>N.wbits){E.msg="invalid window size",N.mode=30;break}N.dmax=1<<j,E.adler=N.check=1,N.mode=512&z?10:12,L=z=0;break;case 2:for(;L<16;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(N.flags=z,(255&N.flags)!=8){E.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){E.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=z>>8&1),512&N.flags&&(G[0]=255&z,G[1]=z>>>8&255,N.check=l(N.check,G,2,0)),L=z=0,N.mode=3;case 3:for(;L<32;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}N.head&&(N.head.time=z),512&N.flags&&(G[0]=255&z,G[1]=z>>>8&255,G[2]=z>>>16&255,G[3]=z>>>24&255,N.check=l(N.check,G,4,0)),L=z=0,N.mode=4;case 4:for(;L<16;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}N.head&&(N.head.xflags=255&z,N.head.os=z>>8),512&N.flags&&(G[0]=255&z,G[1]=z>>>8&255,N.check=l(N.check,G,2,0)),L=z=0,N.mode=5;case 5:if(1024&N.flags){for(;L<16;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}N.length=z,N.head&&(N.head.extra_len=z),512&N.flags&&(G[0]=255&z,G[1]=z>>>8&255,N.check=l(N.check,G,2,0)),L=z=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(D<(W=N.length)&&(W=D),W&&(N.head&&(j=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),i.arraySet(N.head.extra,Z,H,W,j)),512&N.flags&&(N.check=l(N.check,Z,W,H)),D-=W,H+=W,N.length-=W),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(D===0)break e;for(W=0;j=Z[H+W++],N.head&&j&&N.length<65536&&(N.head.name+=String.fromCharCode(j)),j&&W<D;);if(512&N.flags&&(N.check=l(N.check,Z,W,H)),D-=W,H+=W,j)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(D===0)break e;for(W=0;j=Z[H+W++],N.head&&j&&N.length<65536&&(N.head.comment+=String.fromCharCode(j)),j&&W<D;);if(512&N.flags&&(N.check=l(N.check,Z,W,H)),D-=W,H+=W,j)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;L<16;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(z!==(65535&N.check)){E.msg="header crc mismatch",N.mode=30;break}L=z=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),E.adler=N.check=0,N.mode=12;break;case 10:for(;L<32;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}E.adler=N.check=g(z),L=z=0,N.mode=11;case 11:if(N.havedict===0)return E.next_out=K,E.avail_out=O,E.next_in=H,E.avail_in=D,N.hold=z,N.bits=L,2;E.adler=N.check=1,N.mode=12;case 12:if(q===5||q===6)break e;case 13:if(N.last){z>>>=7&L,L-=7&L,N.mode=27;break}for(;L<3;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}switch(N.last=1&z,L-=1,3&(z>>>=1)){case 0:N.mode=14;break;case 1:if(R(N),N.mode=20,q!==6)break;z>>>=2,L-=2;break e;case 2:N.mode=17;break;case 3:E.msg="invalid block type",N.mode=30}z>>>=2,L-=2;break;case 14:for(z>>>=7&L,L-=7&L;L<32;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if((65535&z)!=(z>>>16^65535)){E.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&z,L=z=0,N.mode=15,q===6)break e;case 15:N.mode=16;case 16:if(W=N.length){if(D<W&&(W=D),O<W&&(W=O),W===0)break e;i.arraySet(Y,Z,H,W,K),D-=W,H+=W,O-=W,K+=W,N.length-=W;break}N.mode=12;break;case 17:for(;L<14;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(N.nlen=257+(31&z),z>>>=5,L-=5,N.ndist=1+(31&z),z>>>=5,L-=5,N.ncode=4+(15&z),z>>>=4,L-=4,286<N.nlen||30<N.ndist){E.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;L<3;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}N.lens[te[N.have++]]=7&z,z>>>=3,L-=3}for(;N.have<19;)N.lens[te[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,J={bits:N.lenbits},ae=d(0,N.lens,0,19,N.lencode,0,N.work,J),N.lenbits=J.bits,ae){E.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;be=($=N.lencode[z&(1<<N.lenbits)-1])>>>16&255,oe=65535&$,!((ye=$>>>24)<=L);){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(oe<16)z>>>=ye,L-=ye,N.lens[N.have++]=oe;else{if(oe===16){for(U=ye+2;L<U;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(z>>>=ye,L-=ye,N.have===0){E.msg="invalid bit length repeat",N.mode=30;break}j=N.lens[N.have-1],W=3+(3&z),z>>>=2,L-=2}else if(oe===17){for(U=ye+3;L<U;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}L-=ye,j=0,W=3+(7&(z>>>=ye)),z>>>=3,L-=3}else{for(U=ye+7;L<U;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}L-=ye,j=0,W=11+(127&(z>>>=ye)),z>>>=7,L-=7}if(N.have+W>N.nlen+N.ndist){E.msg="invalid bit length repeat",N.mode=30;break}for(;W--;)N.lens[N.have++]=j}}if(N.mode===30)break;if(N.lens[256]===0){E.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,J={bits:N.lenbits},ae=d(u,N.lens,0,N.nlen,N.lencode,0,N.work,J),N.lenbits=J.bits,ae){E.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,J={bits:N.distbits},ae=d(m,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,J),N.distbits=J.bits,ae){E.msg="invalid distances set",N.mode=30;break}if(N.mode=20,q===6)break e;case 20:N.mode=21;case 21:if(6<=D&&258<=O){E.next_out=K,E.avail_out=O,E.next_in=H,E.avail_in=D,N.hold=z,N.bits=L,c(E,V),K=E.next_out,Y=E.output,O=E.avail_out,H=E.next_in,Z=E.input,D=E.avail_in,z=N.hold,L=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;be=($=N.lencode[z&(1<<N.lenbits)-1])>>>16&255,oe=65535&$,!((ye=$>>>24)<=L);){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(be&&!(240&be)){for(de=ye,De=be,Se=oe;be=($=N.lencode[Se+((z&(1<<de+De)-1)>>de)])>>>16&255,oe=65535&$,!(de+(ye=$>>>24)<=L);){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}z>>>=de,L-=de,N.back+=de}if(z>>>=ye,L-=ye,N.back+=ye,N.length=oe,be===0){N.mode=26;break}if(32&be){N.back=-1,N.mode=12;break}if(64&be){E.msg="invalid literal/length code",N.mode=30;break}N.extra=15&be,N.mode=22;case 22:if(N.extra){for(U=N.extra;L<U;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}N.length+=z&(1<<N.extra)-1,z>>>=N.extra,L-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;be=($=N.distcode[z&(1<<N.distbits)-1])>>>16&255,oe=65535&$,!((ye=$>>>24)<=L);){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(!(240&be)){for(de=ye,De=be,Se=oe;be=($=N.distcode[Se+((z&(1<<de+De)-1)>>de)])>>>16&255,oe=65535&$,!(de+(ye=$>>>24)<=L);){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}z>>>=de,L-=de,N.back+=de}if(z>>>=ye,L-=ye,N.back+=ye,64&be){E.msg="invalid distance code",N.mode=30;break}N.offset=oe,N.extra=15&be,N.mode=24;case 24:if(N.extra){for(U=N.extra;L<U;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}N.offset+=z&(1<<N.extra)-1,z>>>=N.extra,L-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){E.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(O===0)break e;if(W=V-O,N.offset>W){if((W=N.offset-W)>N.whave&&N.sane){E.msg="invalid distance too far back",N.mode=30;break}ie=W>N.wnext?(W-=N.wnext,N.wsize-W):N.wnext-W,W>N.length&&(W=N.length),he=N.window}else he=Y,ie=K-N.offset,W=N.length;for(O<W&&(W=O),O-=W,N.length-=W;Y[K++]=he[ie++],--W;);N.length===0&&(N.mode=21);break;case 26:if(O===0)break e;Y[K++]=N.length,O--,N.mode=21;break;case 27:if(N.wrap){for(;L<32;){if(D===0)break e;D--,z|=Z[H++]<<L,L+=8}if(V-=O,E.total_out+=V,N.total+=V,V&&(E.adler=N.check=N.flags?l(N.check,Y,V,K-V):o(N.check,Y,V,K-V)),V=O,(N.flags?z:g(z))!==N.check){E.msg="incorrect data check",N.mode=30;break}L=z=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;L<32;){if(D===0)break e;D--,z+=Z[H++]<<L,L+=8}if(z!==(4294967295&N.total)){E.msg="incorrect length check",N.mode=30;break}L=z=0}N.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;case 32:default:return p}return E.next_out=K,E.avail_out=O,E.next_in=H,E.avail_in=D,N.hold=z,N.bits=L,(N.wsize||V!==E.avail_out&&N.mode<30&&(N.mode<27||q!==4))&&Q(E,E.output,E.next_out,V-E.avail_out)?(N.mode=31,-4):(C-=E.avail_in,V-=E.avail_out,E.total_in+=C,E.total_out+=V,N.total+=V,N.wrap&&V&&(E.adler=N.check=N.flags?l(N.check,Y,V,E.next_out-V):o(N.check,Y,V,E.next_out-V)),E.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(C==0&&V===0||q===4)&&ae===h&&(ae=-5),ae)},a.inflateEnd=function(E){if(!E||!E.state)return p;var q=E.state;return q.window&&(q.window=null),E.state=null,h},a.inflateGetHeader=function(E,q){var N;return E&&E.state&&2&(N=E.state).wrap?((N.head=q).done=!1,h):p},a.inflateSetDictionary=function(E,q){var N,Z=q.length;return E&&E.state?(N=E.state).wrap!==0&&N.mode!==11?p:N.mode===11&&o(1,q,Z,0)!==N.check?-3:Q(E,q,Z,Z)?(N.mode=31,-4):(N.havedict=1,h):p},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,s,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(u,m,h,p,v,x,b,g){var f,y,w,_,S,k,A,F,R,Q=g.bits,E=0,q=0,N=0,Z=0,Y=0,H=0,K=0,D=0,O=0,z=0,L=null,C=0,V=new i.Buf16(16),W=new i.Buf16(16),ie=null,he=0;for(E=0;E<=15;E++)V[E]=0;for(q=0;q<p;q++)V[m[h+q]]++;for(Y=Q,Z=15;1<=Z&&V[Z]===0;Z--);if(Z<Y&&(Y=Z),Z===0)return v[x++]=20971520,v[x++]=20971520,g.bits=1,0;for(N=1;N<Z&&V[N]===0;N++);for(Y<N&&(Y=N),E=D=1;E<=15;E++)if(D<<=1,(D-=V[E])<0)return-1;if(0<D&&(u===0||Z!==1))return-1;for(W[1]=0,E=1;E<15;E++)W[E+1]=W[E]+V[E];for(q=0;q<p;q++)m[h+q]!==0&&(b[W[m[h+q]]++]=q);if(k=u===0?(L=ie=b,19):u===1?(L=o,C-=257,ie=l,he-=257,256):(L=c,ie=d,-1),E=N,S=x,K=q=z=0,w=-1,_=(O=1<<(H=Y))-1,u===1&&852<O||u===2&&592<O)return 1;for(;;){for(A=E-K,R=b[q]<k?(F=0,b[q]):b[q]>k?(F=ie[he+b[q]],L[C+b[q]]):(F=96,0),f=1<<E-K,N=y=1<<H;v[S+(z>>K)+(y-=f)]=A<<24|F<<16|R|0,y!==0;);for(f=1<<E-1;z&f;)f>>=1;if(f!==0?(z&=f-1,z+=f):z=0,q++,--V[E]==0){if(E===Z)break;E=m[h+b[q]]}if(Y<E&&(z&_)!==w){for(K===0&&(K=Y),S+=N,D=1<<(H=E-K);H+K<Z&&!((D-=V[H+K])<=0);)H++,D<<=1;if(O+=1<<H,u===1&&852<O||u===2&&592<O)return 1;v[w=z&_]=Y<<24|H<<16|S-x|0}}return z!==0&&(v[S+z]=E-K<<24|64<<16|0),g.bits=Y,0}},{"../utils/common":41}],51:[function(n,s,a){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,s,a){var i=n("../utils/common"),o=0,l=1;function c($){for(var G=$.length;0<=--G;)$[G]=0}var d=0,u=29,m=256,h=m+1+u,p=30,v=19,x=2*h+1,b=15,g=16,f=7,y=256,w=16,_=17,S=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(h+2));c(Q);var E=new Array(2*p);c(E);var q=new Array(512);c(q);var N=new Array(256);c(N);var Z=new Array(u);c(Z);var Y,H,K,D=new Array(p);function O($,G,te,ne,ee){this.static_tree=$,this.extra_bits=G,this.extra_base=te,this.elems=ne,this.max_length=ee,this.has_stree=$&&$.length}function z($,G){this.dyn_tree=$,this.max_code=0,this.stat_desc=G}function L($){return $<256?q[$]:q[256+($>>>7)]}function C($,G){$.pending_buf[$.pending++]=255&G,$.pending_buf[$.pending++]=G>>>8&255}function V($,G,te){$.bi_valid>g-te?($.bi_buf|=G<<$.bi_valid&65535,C($,$.bi_buf),$.bi_buf=G>>g-$.bi_valid,$.bi_valid+=te-g):($.bi_buf|=G<<$.bi_valid&65535,$.bi_valid+=te)}function W($,G,te){V($,te[2*G],te[2*G+1])}function ie($,G){for(var te=0;te|=1&$,$>>>=1,te<<=1,0<--G;);return te>>>1}function he($,G,te){var ne,ee,ue=new Array(b+1),X=0;for(ne=1;ne<=b;ne++)ue[ne]=X=X+te[ne-1]<<1;for(ee=0;ee<=G;ee++){var P=$[2*ee+1];P!==0&&($[2*ee]=ie(ue[P]++,P))}}function ye($){var G;for(G=0;G<h;G++)$.dyn_ltree[2*G]=0;for(G=0;G<p;G++)$.dyn_dtree[2*G]=0;for(G=0;G<v;G++)$.bl_tree[2*G]=0;$.dyn_ltree[2*y]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function be($){8<$.bi_valid?C($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function oe($,G,te,ne){var ee=2*G,ue=2*te;return $[ee]<$[ue]||$[ee]===$[ue]&&ne[G]<=ne[te]}function de($,G,te){for(var ne=$.heap[te],ee=te<<1;ee<=$.heap_len&&(ee<$.heap_len&&oe(G,$.heap[ee+1],$.heap[ee],$.depth)&&ee++,!oe(G,ne,$.heap[ee],$.depth));)$.heap[te]=$.heap[ee],te=ee,ee<<=1;$.heap[te]=ne}function De($,G,te){var ne,ee,ue,X,P=0;if($.last_lit!==0)for(;ne=$.pending_buf[$.d_buf+2*P]<<8|$.pending_buf[$.d_buf+2*P+1],ee=$.pending_buf[$.l_buf+P],P++,ne===0?W($,ee,G):(W($,(ue=N[ee])+m+1,G),(X=k[ue])!==0&&V($,ee-=Z[ue],X),W($,ue=L(--ne),te),(X=A[ue])!==0&&V($,ne-=D[ue],X)),P<$.last_lit;);W($,y,G)}function Se($,G){var te,ne,ee,ue=G.dyn_tree,X=G.stat_desc.static_tree,P=G.stat_desc.has_stree,le=G.stat_desc.elems,ge=-1;for($.heap_len=0,$.heap_max=x,te=0;te<le;te++)ue[2*te]!==0?($.heap[++$.heap_len]=ge=te,$.depth[te]=0):ue[2*te+1]=0;for(;$.heap_len<2;)ue[2*(ee=$.heap[++$.heap_len]=ge<2?++ge:0)]=1,$.depth[ee]=0,$.opt_len--,P&&($.static_len-=X[2*ee+1]);for(G.max_code=ge,te=$.heap_len>>1;1<=te;te--)de($,ue,te);for(ee=le;te=$.heap[1],$.heap[1]=$.heap[$.heap_len--],de($,ue,1),ne=$.heap[1],$.heap[--$.heap_max]=te,$.heap[--$.heap_max]=ne,ue[2*ee]=ue[2*te]+ue[2*ne],$.depth[ee]=($.depth[te]>=$.depth[ne]?$.depth[te]:$.depth[ne])+1,ue[2*te+1]=ue[2*ne+1]=ee,$.heap[1]=ee++,de($,ue,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(pe,Ce){var ze,Oe,pt,Ie,gt,ct,it=Ce.dyn_tree,qs=Ce.max_code,tl=Ce.stat_desc.static_tree,nl=Ce.stat_desc.has_stree,sl=Ce.stat_desc.extra_bits,Gr=Ce.stat_desc.extra_base,bs=Ce.stat_desc.max_length,an=0;for(Ie=0;Ie<=b;Ie++)pe.bl_count[Ie]=0;for(it[2*pe.heap[pe.heap_max]+1]=0,ze=pe.heap_max+1;ze<x;ze++)bs<(Ie=it[2*it[2*(Oe=pe.heap[ze])+1]+1]+1)&&(Ie=bs,an++),it[2*Oe+1]=Ie,qs<Oe||(pe.bl_count[Ie]++,gt=0,Gr<=Oe&&(gt=sl[Oe-Gr]),ct=it[2*Oe],pe.opt_len+=ct*(Ie+gt),nl&&(pe.static_len+=ct*(tl[2*Oe+1]+gt)));if(an!==0){do{for(Ie=bs-1;pe.bl_count[Ie]===0;)Ie--;pe.bl_count[Ie]--,pe.bl_count[Ie+1]+=2,pe.bl_count[bs]--,an-=2}while(0<an);for(Ie=bs;Ie!==0;Ie--)for(Oe=pe.bl_count[Ie];Oe!==0;)qs<(pt=pe.heap[--ze])||(it[2*pt+1]!==Ie&&(pe.opt_len+=(Ie-it[2*pt+1])*it[2*pt],it[2*pt+1]=Ie),Oe--)}}($,G),he(ue,ge,$.bl_count)}function j($,G,te){var ne,ee,ue=-1,X=G[1],P=0,le=7,ge=4;for(X===0&&(le=138,ge=3),G[2*(te+1)+1]=65535,ne=0;ne<=te;ne++)ee=X,X=G[2*(ne+1)+1],++P<le&&ee===X||(P<ge?$.bl_tree[2*ee]+=P:ee!==0?(ee!==ue&&$.bl_tree[2*ee]++,$.bl_tree[2*w]++):P<=10?$.bl_tree[2*_]++:$.bl_tree[2*S]++,ue=ee,ge=(P=0)===X?(le=138,3):ee===X?(le=6,3):(le=7,4))}function ae($,G,te){var ne,ee,ue=-1,X=G[1],P=0,le=7,ge=4;for(X===0&&(le=138,ge=3),ne=0;ne<=te;ne++)if(ee=X,X=G[2*(ne+1)+1],!(++P<le&&ee===X)){if(P<ge)for(;W($,ee,$.bl_tree),--P!=0;);else ee!==0?(ee!==ue&&(W($,ee,$.bl_tree),P--),W($,w,$.bl_tree),V($,P-3,2)):P<=10?(W($,_,$.bl_tree),V($,P-3,3)):(W($,S,$.bl_tree),V($,P-11,7));ue=ee,ge=(P=0)===X?(le=138,3):ee===X?(le=6,3):(le=7,4)}}c(D);var J=!1;function U($,G,te,ne){V($,(d<<1)+(ne?1:0),3),function(ee,ue,X,P){be(ee),P&&(C(ee,X),C(ee,~X)),i.arraySet(ee.pending_buf,ee.window,ue,X,ee.pending),ee.pending+=X}($,G,te,!0)}a._tr_init=function($){J||(function(){var G,te,ne,ee,ue,X=new Array(b+1);for(ee=ne=0;ee<u-1;ee++)for(Z[ee]=ne,G=0;G<1<<k[ee];G++)N[ne++]=ee;for(N[ne-1]=ee,ee=ue=0;ee<16;ee++)for(D[ee]=ue,G=0;G<1<<A[ee];G++)q[ue++]=ee;for(ue>>=7;ee<p;ee++)for(D[ee]=ue<<7,G=0;G<1<<A[ee]-7;G++)q[256+ue++]=ee;for(te=0;te<=b;te++)X[te]=0;for(G=0;G<=143;)Q[2*G+1]=8,G++,X[8]++;for(;G<=255;)Q[2*G+1]=9,G++,X[9]++;for(;G<=279;)Q[2*G+1]=7,G++,X[7]++;for(;G<=287;)Q[2*G+1]=8,G++,X[8]++;for(he(Q,h+1,X),G=0;G<p;G++)E[2*G+1]=5,E[2*G]=ie(G,5);Y=new O(Q,k,m+1,h,b),H=new O(E,A,0,p,b),K=new O(new Array(0),F,0,v,f)}(),J=!0),$.l_desc=new z($.dyn_ltree,Y),$.d_desc=new z($.dyn_dtree,H),$.bl_desc=new z($.bl_tree,K),$.bi_buf=0,$.bi_valid=0,ye($)},a._tr_stored_block=U,a._tr_flush_block=function($,G,te,ne){var ee,ue,X=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(P){var le,ge=4093624447;for(le=0;le<=31;le++,ge>>>=1)if(1&ge&&P.dyn_ltree[2*le]!==0)return o;if(P.dyn_ltree[18]!==0||P.dyn_ltree[20]!==0||P.dyn_ltree[26]!==0)return l;for(le=32;le<m;le++)if(P.dyn_ltree[2*le]!==0)return l;return o}($)),Se($,$.l_desc),Se($,$.d_desc),X=function(P){var le;for(j(P,P.dyn_ltree,P.l_desc.max_code),j(P,P.dyn_dtree,P.d_desc.max_code),Se(P,P.bl_desc),le=v-1;3<=le&&P.bl_tree[2*R[le]+1]===0;le--);return P.opt_len+=3*(le+1)+5+5+4,le}($),ee=$.opt_len+3+7>>>3,(ue=$.static_len+3+7>>>3)<=ee&&(ee=ue)):ee=ue=te+5,te+4<=ee&&G!==-1?U($,G,te,ne):$.strategy===4||ue===ee?(V($,2+(ne?1:0),3),De($,Q,E)):(V($,4+(ne?1:0),3),function(P,le,ge,pe){var Ce;for(V(P,le-257,5),V(P,ge-1,5),V(P,pe-4,4),Ce=0;Ce<pe;Ce++)V(P,P.bl_tree[2*R[Ce]+1],3);ae(P,P.dyn_ltree,le-1),ae(P,P.dyn_dtree,ge-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,X+1),De($,$.dyn_ltree,$.dyn_dtree)),ye($),ne&&be($)},a._tr_tally=function($,G,te){return $.pending_buf[$.d_buf+2*$.last_lit]=G>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&G,$.pending_buf[$.l_buf+$.last_lit]=255&te,$.last_lit++,G===0?$.dyn_ltree[2*te]++:($.matches++,G--,$.dyn_ltree[2*(N[te]+m+1)]++,$.dyn_dtree[2*L(G)]++),$.last_lit===$.lit_bufsize-1},a._tr_align=function($){V($,2,3),W($,y,Q),function(G){G.bi_valid===16?(C(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(n,s,a){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,s,a){(function(i){(function(o,l){if(!o.setImmediate){var c,d,u,m,h=1,p={},v=!1,x=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,c={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){f(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,_=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=_,w}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",y,!1):o.attachEvent("onmessage",y),function(w){o.postMessage(m+w,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(w){f(w.data)},function(w){u.port2.postMessage(w)}):x&&"onreadystatechange"in x.createElement("script")?(d=x.documentElement,function(w){var _=x.createElement("script");_.onreadystatechange=function(){f(w),_.onreadystatechange=null,d.removeChild(_),_=null},d.appendChild(_)}):function(w){setTimeout(f,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var _=new Array(arguments.length-1),S=0;S<_.length;S++)_[S]=arguments[S+1];var k={callback:w,args:_};return p[h]=k,c(h),h++},b.clearImmediate=g}function g(w){delete p[w]}function f(w){if(v)setTimeout(f,0,w);else{var _=p[w];if(_){v=!0;try{(function(S){var k=S.callback,A=S.args;switch(A.length){case 0:k();break;case 1:k(A[0]);break;case 2:k(A[0],A[1]);break;case 3:k(A[0],A[1],A[2]);break;default:k.apply(l,A)}})(_)}finally{g(w),v=!1}}}}function y(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(m)===0&&f(+w.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qg);var XN=qg.exports;const ej=gd(XN);var Yg={exports:{}};(function(e,t){(function(n,s){s()})(ut,function(){function n(d,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,u,m){var h=new XMLHttpRequest;h.open("GET",d),h.responseType="blob",h.onload=function(){c(h.response,u,m)},h.onerror=function(){console.error("could not download file")},h.send()}function a(d){var u=new XMLHttpRequest;u.open("HEAD",d,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ut=="object"&&ut.global===ut?ut:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,u,m){var h=o.URL||o.webkitURL,p=document.createElement("a");u=u||d.name||"download",p.download=u,p.rel="noopener",typeof d=="string"?(p.href=d,p.origin===location.origin?i(p):a(p.href)?s(d,u,m):i(p,p.target="_blank")):(p.href=h.createObjectURL(d),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){i(p)},0))}:"msSaveOrOpenBlob"in navigator?function(d,u,m){if(u=u||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,m),u);else if(a(d))s(d,u,m);else{var h=document.createElement("a");h.href=d,h.target="_blank",setTimeout(function(){i(h)})}}:function(d,u,m,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof d=="string")return s(d,u,m);var p=d.type==="application/octet-stream",v=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||p&&v||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var y=b.result;y=x?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=y:location=y,h=null},b.readAsDataURL(d)}else{var g=o.URL||o.webkitURL,f=g.createObjectURL(d);h?h.location=f:location.href=f,h=null,setTimeout(function(){g.revokeObjectURL(f)},4e4)}});o.saveAs=c.saveAs=c,e.exports=c})})(Yg);var tj=Yg.exports;const nj=({isOpen:e,onClose:t,template:n,onSave:s})=>{const[a,i]=I.useState(""),[o,l]=I.useState("");I.useEffect(()=>{n&&(i(n.content),l(n.name))},[n]);const c=()=>{s({name:o,content:a,type:n.type}),t()},d=()=>{switch(n==null?void 0:n.type){case"late_payment":return"This message is sent to parents when their child has overdue payments. Use {studentName}, {dueDate}, {amount}, {installmentCount} as placeholders.";case"absence":return"This message is sent to parents when their child is absent from a lesson. Use {studentName}, {lessonDate}, {lessonTime} as placeholders.";default:return"Edit the message template below."}};return r.jsx(tt,{isOpen:e,onClose:t,title:"Edit Message Template",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name"}),r.jsx("input",{type:"text",value:o,onChange:u=>l(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Template name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:d()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Template"}),r.jsx("textarea",{value:a,onChange:u=>i(u.target.value),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Enter your message template..."})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Template"})]})]})})},sj=({isOpen:e,onClose:t,progress:n,status:s})=>r.jsx(tt,{isOpen:e,onClose:t,title:"Exporting Data",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(B,{path:T.LOADING,className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s}),r.jsx("p",{className:"text-sm text-gray-600",children:"Please wait while we prepare your export..."})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),r.jsxs("div",{className:"text-center text-sm text-gray-600",children:[n,"% Complete"]})]})}),rj=()=>{const{students:e,groups:t,lessons:n,events:s,todos:a,documents:i,transactions:o,fetchData:l}=at(),{showNotification:c}=Xe(),[d,u]=I.useState("system"),[m,h]=I.useState(!1),[p,v]=I.useState(0),[x,b]=I.useState("");I.useState(localStorage.getItem("lastExportDate")||"Never");const[g,f]=I.useState(!1),[y,w]=I.useState(null),[_,S]=I.useState(pd()),[k,A]=I.useState({totalSize:0,usedSize:0,fileCount:0,loading:!1,lastUpdated:new Date}),[F,R]=I.useState(!1),[Q,E]=I.useState(0),[q,N]=I.useState(!1);I.useEffect(()=>{S(pd())},[]),I.useEffect(()=>{zN(_)},[_]);const Z=async()=>{try{A(oe=>({...oe,loading:!0}));let W=0,ie=0;const he=["documents","business_expenses","lesson_materials","student_documents","students","transactions"];for(const oe of he)try{const{data:de,error:De}=await Pe.storage.from("udms").list(oe,{limit:1e3,offset:0});if(De){console.error(`Error fetching ${oe}:`,De);continue}if(de&&de.length>0){for(const Se of de)if(Se.metadata&&Se.metadata.size)W+=Se.metadata.size,ie++;else if(!Se.metadata)try{const{data:j,error:ae}=await Pe.storage.from("udms").list(`${oe}/${Se.name}`,{limit:1e3,offset:0});if(!ae&&j)for(const J of j)J.metadata&&J.metadata.size&&(W+=J.metadata.size,ie++)}catch(j){console.error(`Error fetching subfolder ${oe}/${Se.name}:`,j)}}}catch(de){console.error(`Error processing folder ${oe}:`,de)}const ye=1024*1024*1024;A({totalSize:ye,usedSize:W,fileCount:ie,loading:!1,lastUpdated:new Date})}catch(W){console.error("Error fetching storage info:",W),A(ie=>({...ie,loading:!1}))}};I.useEffect(()=>{Z()},[]);const Y=W=>{if(W===0)return"0 Bytes";const ie=1024,he=["Bytes","KB","MB","GB"],ye=Math.floor(Math.log(W)/Math.log(ie));return parseFloat((W/Math.pow(ie,ye)).toFixed(2))+" "+he[ye]},H=()=>k.totalSize===0?0:Math.round(k.usedSize/k.totalSize*100),K=async()=>{h(!0),v(0),b("Preparing export...");try{const W=new ej,ie=W.folder("students"),he=W.folder("groups"),ye=W.folder("documents"),be=W.folder("transactions"),oe=W.folder("lessons"),de=W.folder("settings"),De=W.folder("files");v(5),b("Exporting students data...");const Se=e.map(P=>({id:P.id,fullName:P.fullName,email:P.email,phone:P.phone,birthDate:P.birthDate,address:P.address,emergencyContact:P.emergencyContact,enrollmentDate:P.enrollmentDate,totalFee:P.totalFee,installments:P.installments,groupId:P.groupId,status:P.status,notes:P.notes}));ie.file("students.json",JSON.stringify(Se,null,2)),v(15),b("Exporting groups data...");const j=t.map(P=>({id:P.id,name:P.name,schedule:P.schedule,startDate:P.startDate,endDate:P.endDate,maxStudents:P.maxStudents,currentStudents:P.currentStudents,status:P.status,notes:P.notes}));he.file("groups.json",JSON.stringify(j,null,2)),v(25),b("Exporting documents data...");const ae=i.map(P=>({id:P.id,name:P.name,type:P.type,category:P.category,description:P.description,uploadDate:P.uploadDate,url:P.url}));ye.file("documents.json",JSON.stringify(ae,null,2)),v(35),b("Exporting transactions data...");const J=o.map(P=>({id:P.id,type:P.type,amount:P.amount,description:P.description,date:P.date,category:P.category,studentId:P.studentId}));be.file("transactions.json",JSON.stringify(J,null,2)),v(45),b("Exporting lessons data...");const U=n.map(P=>({id:P.id,groupId:P.groupId,lessonDate:P.lessonDate,startTime:P.startTime,endTime:P.endTime,topic:P.topic,materials:P.materials,attendance:P.attendance,notes:P.notes}));oe.file("lessons.json",JSON.stringify(U,null,2)),v(55),b("Exporting settings and templates...");const $={messageTemplates:_,exportDate:new Date().toISOString(),systemInfo:{totalStudents:e.length,totalGroups:t.length,totalDocuments:i.length,totalTransactions:o.length,totalLessons:n.length}};de.file("settings.json",JSON.stringify($,null,2)),v(65),b("Downloading files from storage...");const G=[],te=new Set;i.forEach(P=>{if(P.url&&P.url.trim()!==""){let le=P.category;le||(P.type==="payment_plan"?le="student":P.type==="invoice"?le="finance":le="other");let ge=null,pe=null;if(le==="student"&&P.storagePath){ge=P.storagePath;const Ce=P.storagePath.split("/"),ze=Ce.indexOf("student")+1,Oe=Ce[ze];if(Oe){const pt=e.find(Ie=>Ie.id===Oe);pt&&(pe=pt.fullName)}}te.add({url:P.url,name:P.name,category:le,type:P.type,storagePath:ge,studentName:pe})}}),e.forEach(P=>{try{const le=typeof P.documents=="string"?JSON.parse(P.documents):P.documents||{},ge=typeof P.documentNames=="string"?JSON.parse(P.documentNames):P.documentNames||{};le.nationalIdUrl&&le.nationalIdUrl.trim()!==""&&te.add({url:le.nationalIdUrl,name:ge.nationalId||`${P.fullName}_NationalID.pdf`,category:"student",studentName:P.fullName}),le.agreementUrl&&le.agreementUrl.trim()!==""&&te.add({url:le.agreementUrl,name:ge.agreement||`${P.fullName}_Agreement.pdf`,category:"student",studentName:P.fullName})}catch(le){console.error("Error processing student documents:",le)}}),o.forEach(P=>{P.invoiceUrl&&P.invoiceUrl.trim()!==""&&te.add({url:P.invoiceUrl,name:P.invoiceName||`Transaction_${P.description||P.id}_Invoice.pdf`,category:"finance",transactionType:P.type})}),n.forEach(P=>{if(P.materialsUrl&&P.materialsUrl.trim()!==""){let le="Unknown Student";if(P.studentId){const ge=e.find(pe=>pe.id===P.studentId);ge&&(le=ge.fullName)}te.add({url:P.materialsUrl,name:P.materialsName||`Lesson_${P.topic||P.id}_Materials.pdf`,category:"student",studentName:le})}});const ne=Array.from(te);let ee=0;for(const P of ne)try{b(`Downloading file: ${P.name}...`);let le;if(P.url.includes("/storage/v1/object/public/")){const ze=P.url.split("/"),Oe=ze.indexOf("public");if(Oe===-1){console.error(`Invalid URL format for file ${P.name}:`,P.url);continue}le=ze.slice(Oe+1).slice(1).join("/")}else le=P.url;if(!le||le.trim()===""){console.error(`Invalid storage path for file ${P.name}:`,le);continue}console.log(`Attempting to download: ${P.name}`),console.log(`Original URL: ${P.url}`),console.log(`Extracted storage path: ${le}`);const{data:ge,error:pe}=await Pe.storage.from("udms").download(le);if(pe){console.error(`Error downloading file ${P.name}:`,pe),console.error(`Storage path used: ${le}`);continue}if(ge){const ze=De.folder(P.category);if(P.category==="student"){let Oe="Unknown Student";if(P.studentName)Oe=P.studentName;else if(P.storagePath){const Ie=P.storagePath.split("/"),gt=Ie.indexOf("student")+1,ct=Ie[gt];if(ct){const it=e.find(qs=>qs.id===ct);it&&(Oe=it.fullName)}}ze.folder(Oe).file(P.name,ge)}else if(P.category==="meb"){let Oe="other";P.type==="received"?Oe="received":P.type==="sent"&&(Oe="sent"),ze.folder(Oe).file(P.name,ge)}else if(P.category==="finance"){let Oe="other";P.transactionType==="income"?Oe="income":(P.transactionType==="expense"||P.transactionType==="expense-business")&&(Oe="expenses"),ze.folder(Oe).file(P.name,ge)}else ze.file(P.name,ge);ee++}const Ce=65+ee/ne.length*25;v(Math.min(Ce,90))}catch(le){console.error(`Error processing file ${P.name}:`,le)}v(95),b("Generating ZIP file...");const ue=await W.generateAsync({type:"blob"}),X=`udms_export_${new Date().toISOString().split("T")[0]}.zip`;tj.saveAs(ue,X),v(100),b("Export completed successfully!"),localStorage.setItem("lastExportDate",new Date().toISOString()),setTimeout(()=>{h(!1),c(`Data exported successfully! ${ee} files included.`,"success")},1e3)}catch(W){console.error("Export error:",W),c("Failed to export data. Please try again.","error"),h(!1)}},D=W=>{w(_[W]),f(!0)},O=W=>{S(ie=>({...ie,[W.type]:W})),c("Message template updated successfully!","success")},z=W=>{let he=_[W].content;return W==="late_payment"?he=he.replace("{studentName}","Ahmet Ylmaz").replace("{dueDate}","15/08/2024").replace("{amount}","500").replace("{installmentCount}","2"):W==="absence"&&(he=he.replace("{studentName}","Aye Demir").replace("{lessonDate}","20/08/2024").replace("{lessonTime}","14:00")),he},L=[{id:"system",label:"System Info",icon:T.INFO},{id:"messages",label:"Message Templates",icon:T.MESSAGE},{id:"export",label:"Data Export",icon:T.DOWNLOAD}],C=async()=>{R(!0),E(0);try{R(!0),E(0),b("Starting data reset..."),E(10),b("Clearing file storage...");const{data:W}=await Pe.storage.from("documents").list();if(W&&W.length>0){const he=W.map(ye=>ye.name);await Pe.storage.from("documents").remove(he)}E(30),b("Deleting all database records...");const ie=["students","groups","lessons","events","todos","documents","transactions"];for(let he=0;he<ie.length;he++){const ye=ie[he];b(`Deleting ${ye}...`);const{data:be,error:oe}=await Pe.from(ye).select("id");if(oe)throw new Error(`Error fetching ${ye}: ${oe.message}`);if(be&&be.length>0){const de=be.map(Se=>Se.id),{error:De}=await Pe.from(ye).delete().in("id",de);if(De)throw new Error(`Error deleting ${ye}: ${De.message}`)}E(30+(he+1)/ie.length*30)}E(80),b("Clearing local storage..."),localStorage.clear(),E(90),b("Refreshing application..."),await l(),E(100),b("Data reset completed successfully!"),c("All data has been successfully reset!","success"),setTimeout(()=>{R(!1),E(0),b("")},2e3)}catch(W){console.error("Error resetting data:",W),c(`Error resetting data: ${W.message}`,"error"),R(!1),E(0),b("")}},V=()=>{N(!0)};return r.jsxs("div",{className:"bg-gray-50 min-h-screen p-4 lg:p-6",children:[r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center shadow-sm mr-4",children:r.jsx(B,{path:T.SETTINGS,className:"w-7 h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-gray-600 text-sm lg:text-base",children:"Manage system settings, export data, and customize message templates"})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:L.map(W=>r.jsxs("button",{onClick:()=>u(W.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d===W.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(B,{path:W.icon,className:"w-4 h-4 mr-2"}),W.label]},W.id))})}),r.jsxs("div",{className:"p-6",children:[d==="export"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Export"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Export all system data including students, groups, documents, transactions, and lessons in a structured ZIP file."}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"What's included in the export:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:" All student information and enrollment details"}),r.jsx("li",{children:" Group configurations and schedules"}),r.jsx("li",{children:" Document metadata and file references"}),r.jsx("li",{children:" Financial transactions and payment records"}),r.jsx("li",{children:" Lesson plans and attendance records"}),r.jsx("li",{children:" Current message templates and settings"}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"All actual files (PDFs, documents, etc.)"})]})]})]})]})}),r.jsxs("button",{onClick:K,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(B,{path:T.DOWNLOAD,className:"w-5 h-5 mr-2"}),"Export All Data"]})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center mr-3",children:r.jsx(B,{path:T.TRASH,className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Danger Zone"}),r.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete all data and documents"})]})]}),r.jsx("div",{className:"bg-white border border-red-200 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-red-800 mb-1",children:"Reset All Data"}),r.jsx("p",{className:"text-sm text-red-600",children:"This will permanently delete ALL data including:"}),r.jsxs("ul",{className:"text-sm text-red-600 mt-2 space-y-1",children:[r.jsx("li",{children:" All students, groups, lessons, and events"}),r.jsx("li",{children:" All financial records and transactions"}),r.jsx("li",{children:" All uploaded documents and files"}),r.jsx("li",{children:" All todos and settings"}),r.jsx("li",{children:" All local storage data"})]}),r.jsx("p",{className:"text-sm font-medium text-red-700 mt-2",children:" This action cannot be undone!"})]}),r.jsx("button",{onClick:V,disabled:F,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed transition-colors font-semibold",children:F?"Resetting...":"Reset All Data"})]})}),F&&r.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-red-800",children:"Progress"}),r.jsxs("span",{className:"text-sm text-red-600",children:[Q,"%"]})]}),r.jsx("div",{className:"w-full bg-red-200 rounded-full h-2 mb-2",children:r.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${Q}%`}})}),r.jsx("p",{className:"text-sm text-red-600",children:x})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:"System Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Students"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Groups"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Documents"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Transactions"})]})]})]})]}),d==="messages"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Message Templates"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Customize the message templates used for late payment notifications and student absence communications."})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:_.late_payment.name}),r.jsx("p",{className:"text-sm text-gray-600",children:"Sent to parents when payments are overdue"})]}),r.jsxs("button",{onClick:()=>D("late_payment"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(B,{path:T.EDIT,className:"w-4 h-4 mr-2"}),"Edit Template"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sample Message:"}),r.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:z("late_payment")})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:_.absence.name}),r.jsx("p",{className:"text-sm text-gray-600",children:"Sent to parents when students miss lessons"})]}),r.jsxs("button",{onClick:()=>D("absence"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(B,{path:T.EDIT,className:"w-4 h-4 mr-2"}),"Edit Template"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sample Message:"}),r.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:z("absence")})]})]})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-yellow-900 mb-2",children:"Available Placeholders:"}),r.jsxs("div",{className:"text-sm text-yellow-800 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Late Payment:"})," ","{studentName}",", ","{dueDate}",", ","{amount}",", ","{installmentCount}"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Absence:"})," ","{studentName}",", ","{lessonDate}",", ","{lessonTime}"]})]})]})]})})]}),d==="system"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Monitor storage usage, system performance, and important system details."})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Storage Information"}),r.jsx("button",{onClick:Z,disabled:k.loading,className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors",children:k.loading?r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.LOADING,className:"w-4 h-4 mr-1 animate-spin"}),"Calculating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.REFRESH,className:"w-4 h-4 mr-1"}),"Refresh"]})})]}),k.loading?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx(B,{path:T.LOADING,className:"w-5 h-5 text-blue-600 animate-spin mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Calculating storage usage..."})]}),r.jsx("div",{className:"bg-gray-100 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Scanning files and calculating sizes..."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Total Storage:"}),r.jsx("span",{className:"font-medium",children:Y(k.totalSize)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Used Storage:"}),r.jsx("span",{className:"font-medium",children:Y(k.usedSize)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Available Storage:"}),r.jsx("span",{className:"font-medium",children:Y(k.totalSize-k.usedSize)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Total Files:"}),r.jsx("span",{className:"font-medium",children:k.fileCount})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Storage Usage"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[H(),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${H()>80?"bg-red-500":H()>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${H()}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"0"}),r.jsx("span",{children:Y(k.totalSize)})]})]}),r.jsx("div",{className:`mt-3 p-3 rounded-lg ${H()>80?"bg-red-50 border border-red-200":H()>60?"bg-yellow-50 border border-yellow-200":"bg-green-50 border border-green-200"}`,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:H()>80?T.EXCLAMATION:H()>60?T.WARNING:T.CHECK_CIRCLE,className:`w-4 h-4 mr-2 ${H()>80?"text-red-600":H()>60?"text-yellow-600":"text-green-600"}`}),r.jsx("span",{className:`text-sm font-medium ${H()>80?"text-red-800":H()>60?"text-yellow-800":"text-green-800"}`,children:H()>80?"Storage nearly full":H()>60?"Storage usage is moderate":"Storage usage is healthy"})]})})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Overview"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Students"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Groups"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Documents"})]}),r.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Transactions"})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Health"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.CHECK_CIRCLE,className:"w-5 h-5 text-green-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Database Connection"})]}),r.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.CHECK_CIRCLE,className:"w-5 h-5 text-green-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Storage Connection"})]}),r.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.CHECK_CIRCLE,className:"w-5 h-5 text-green-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Message Templates"})]}),r.jsxs("span",{className:"text-sm text-green-600",children:[Object.keys(_).length," configured"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.CALENDAR,className:"w-5 h-5 text-blue-600 mr-3"}),r.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Last Export"})]}),r.jsx("span",{className:"text-sm text-blue-600",children:localStorage.getItem("lastExportDate")?new Date(localStorage.getItem("lastExportDate")).toLocaleDateString("tr-TR"):"Never"})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>{localStorage.clear(),c("All local data cleared. Please refresh the page.","info")},className:"flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(B,{path:T.TRASH,className:"w-4 h-4 mr-2"}),"Clear Local Data"]}),r.jsxs("button",{onClick:()=>{const W=new Date().toISOString();localStorage.setItem("lastExportDate",W),c("Export date updated!","success")},className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 mr-2"}),"Update Export Date"]})]})]})]})]})]})]})]}),r.jsx(nj,{isOpen:g,onClose:()=>f(!1),template:y,onSave:O}),r.jsx(sj,{isOpen:m,onClose:()=>h(!1),progress:p,status:x}),r.jsx(tt,{isOpen:q,onClose:()=>N(!1),title:"Confirm Data Reset",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(B,{path:T.EXCLAMATION_TRIANGLE,className:"w-6 h-6 text-red-600 mr-3"}),r.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Warning: Irreversible Action"})]}),r.jsx("p",{className:"text-red-700 mb-3",children:"You are about to permanently delete ALL data from the system. This action cannot be undone."}),r.jsxs("div",{className:"bg-white border border-red-200 rounded p-3",children:[r.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"This will delete:"}),r.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[r.jsx("li",{children:" All students and their information"}),r.jsx("li",{children:" All groups and lesson schedules"}),r.jsx("li",{children:" All financial records and transactions"}),r.jsx("li",{children:" All uploaded documents and files"}),r.jsx("li",{children:" All todos and system settings"}),r.jsx("li",{children:" All local storage data"})]})]})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-yellow-600 mr-3"}),r.jsxs("p",{className:"text-yellow-800 text-sm",children:[r.jsx("strong",{children:"Recommendation:"})," Export your data first before proceeding with the reset."]})]})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>{N(!1),C()},className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold",children:"Yes, Reset All Data"})]})]})})]})},aj=()=>r.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75 z-50",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500"})}),ij=()=>{const{todos:e,fetchData:t,lessons:n}=at(),[s,a]=I.useState(""),[i,o]=I.useState(""),[l,c]=I.useState(!1),{showNotification:d}=Xe(),u=I.useCallback(async()=>{if(!n||n.length===0)return;const{data:{user:f}}=await Pe.auth.getUser();if(!f)return;const y=new Date,w=e||[];for(const _ of n)if(_.status==="Complete"&&(!_.attendance||Object.keys(_.attendance).length===0)){const S=new Date(`${_.lessonDate}T${_.endTime||"10:00"}`),k=new Date(S.getTime()+30*60*1e3);if(k>y){const A=`Log attendance for ${_.topic} (${_.groupName||"Group"})`;if(!w.find(R=>R.task.includes(_.topic)&&R.task.includes("Log attendance")&&!R.isCompleted))try{await ve.create("todos",{task:A,userId:f.id,dueDate:k.toISOString(),lessonId:_.id,isAttendanceReminder:!0})}catch(R){console.error("Error creating attendance reminder task:",R)}}}},[n,e]);I.useEffect(()=>{u()},[u]);const m=I.useCallback(async()=>{if(!e||e.length===0)return;const{data:{user:f}}=await Pe.auth.getUser();if(f){for(const y of e)if(y.isAttendanceReminder&&y.lessonId){const w=n==null?void 0:n.find(_=>_.id===y.lessonId);if(w&&w.attendance&&Object.keys(w.attendance).length>0)try{await ve.delete("todos",y.id)}catch(_){console.error("Error deleting completed attendance reminder task:",_)}}}},[e,n]);I.useEffect(()=>{m()},[m]);const h=I.useMemo(()=>{const f=[];for(let y=0;y<24;y++)for(let w=0;w<60;w+=30)f.push(`${y.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`);return f},[]),p=I.useCallback(f=>{if(!f)return null;const y=new Date(f),w=new Date;if(yN(y)){const R=Math.abs(em(y,w)),Q=Math.abs(Xf(y,w)),E=Math.abs(bo(y,w));let q="";return E>0?q=`${E}d ${Q%24}h overdue`:Q>0?q=`${Q}h ${R%60}m overdue`:q=`${R}m overdue`,{text:q,color:"text-red-500"}}const _=em(y,w),S=Xf(y,w),k=bo(y,w);let A="",F="text-gray-500";return k>0?(A=`${k}d ${S%24}h remaining`,k<=1&&(F="text-orange-500")):S>0?(A=`${S}h ${_%60}m remaining`,F="text-orange-500"):_>0?(A=`${_}m remaining`,F="text-red-500"):(A="Due now",F="text-red-500"),{text:A,color:F}},[]),v=async f=>{if(f.preventDefault(),!s.trim())return;c(!0);const{data:{user:y}}=await Pe.auth.getUser();let w=null;if(i){const[_,S]=i.split(":"),k=new Date;k.setHours(_,S,0,0),w=k.toISOString()}if(y)try{await ve.create("todos",{task:s,userId:y.id,dueDate:w}),a(""),o(""),t()}catch(_){d("Error adding task.","error"),console.error("Error adding task:",_)}c(!1)},x=async f=>{try{await ve.update("todos",f,{isCompleted:!isCompleted}),t()}catch(y){d("Error updating task.","error"),console.error("Error updating task:",y)}},b=async f=>{try{await ve.delete("todos",f),t()}catch(y){d("Error deleting task.","error"),console.error("Error deleting task:",y)}},g=I.useMemo(()=>e.map(f=>{const y=p(f.dueDate);return{...f,timeInfo:y}}),[e,p]);return I.useMemo(()=>{var f;return((f=e==null?void 0:e.filter(y=>!y.isCompleted))==null?void 0:f.length)||0},[e]),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 h-full flex flex-col",children:[r.jsx("div",{className:"flex-shrink-0 p-4 md:p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-orange-500 rounded-xl flex items-center justify-center shadow-sm mr-3",children:r.jsx(B,{path:T.CHECK,className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),r.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-800",children:"Task Management"})]})}),r.jsxs("div",{className:"flex-shrink-0 bg-gray-50 rounded-2xl m-4 md:m-6 p-4 shadow-sm border border-gray-200",children:[r.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 mb-3 md:mb-4",children:"New Task"}),r.jsxs("form",{onSubmit:v,className:"space-y-3 md:space-y-4",children:[r.jsx("div",{children:r.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),placeholder:"What needs to be done?",className:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:ring-gray-500 focus:border-gray-500 transition-all duration-300 text-gray-700 placeholder-gray-500 text-sm md:text-base",disabled:l})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end space-y-3 sm:space-y-0 sm:space-x-3 md:space-x-4",children:[r.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[r.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"Due Time (Optional)"}),r.jsx($n,{value:i,onChange:f=>o(f.target.value),options:h,className:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg focus:ring-gray-500 focus:border-gray-500 transition-all duration-300 text-gray-700 text-sm md:text-base",disabled:l,placeholder:"Select Time"})]}),r.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 md:px-6 py-2 md:py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-all duration-300 font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",disabled:l||!s.trim(),children:"+ Add Task"})]})]})]}),r.jsxs("div",{className:"flex-1 bg-gray-50 rounded-2xl mx-4 md:mx-6 mb-4 md:mb-6 shadow-sm border border-gray-200 flex flex-col min-h-0",children:[r.jsx("div",{className:"flex-shrink-0 p-3 md:p-4 border-b border-gray-200",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-800 flex items-center",children:[r.jsx(B,{path:T.LIST,className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-gray-600"}),"Your Tasks"]})})}),r.jsx("div",{className:"flex-1 p-3 md:p-4 overflow-y-auto",children:g.length>0?r.jsx("div",{className:"space-y-2 md:space-y-3",children:g.map(f=>r.jsx("div",{className:"bg-white rounded-xl p-3 md:p-4 shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[r.jsx("button",{onClick:()=>x(f.id),className:`flex-shrink-0 w-5 h-5 md:w-6 md:h-6 rounded-full border-2 transition-all duration-300 ${f.isCompleted?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-400"}`,children:f.isCompleted&&r.jsx(B,{path:T.CHECK,className:"w-3 h-3 md:w-4 md:h-4 text-white mx-auto"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-gray-800 font-medium text-sm md:text-base ${f.isCompleted?"line-through text-gray-500":""}`,children:f.task}),f.dueDate&&f.timeInfo&&r.jsxs("div",{className:"flex items-center mt-1 text-xs md:text-sm",children:[r.jsx(B,{path:T.CLOCK,className:"w-3 h-3 mr-1 text-gray-400"}),r.jsx("span",{className:`font-medium ${f.timeInfo.color}`,children:f.timeInfo.text})]})]})]})}),r.jsx("button",{onClick:()=>b(f.id),className:"flex-shrink-0 ml-2 md:ml-3 p-1 text-gray-400 hover:text-red-500 transition-colors duration-200",children:r.jsx(B,{path:T.TRASH,className:"w-3 h-3 md:w-4 md:h-4"})})]})},f.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 md:py-8 text-center",children:[r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mb-2 md:mb-3",children:r.jsx(B,{path:T.CHECK,className:"w-6 h-6 md:w-8 md:h-8 text-green-500"})}),r.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 mb-1",children:"You're all caught up!"}),r.jsx("p",{className:"text-gray-500 text-xs md:text-sm",children:"No tasks pending. Great job!"})]})})]})]})},oj=({setActiveModule:e})=>{const{students:t,groups:n,lessons:s,events:a,transactions:i,fetchData:o}=at(),{showNotification:l}=Xe(),[c,d]=I.useState(!1),[u,m]=I.useState(!1),[h,p]=I.useState(null),[v,x]=I.useState(!1),[b,g]=I.useState(null),[f,y]=I.useState(!1),[w,_]=I.useState(null),[S,k]=I.useState([]),[A,F]=I.useState([]),[R,Q]=I.useState([]);I.useState({lessons:[],events:[],birthdays:[]});const[E,q]=I.useState([]),[N,Z]=I.useState(!1),[Y,H]=I.useState({selectedGroups:[],selectedTutoringStudents:[]}),[K,D]=I.useState(!1),[O,z]=I.useState([]),[L,C]=I.useState([]),[V,W]=I.useState([]),[ie,he]=I.useState(!1),[ye,be]=I.useState(!1),[oe,de]=I.useState(!1),[De,Se]=I.useState(!1),[j,ae]=I.useState(null),[J,U]=I.useState({deleteAll:!1,deleteByDateRange:!1,deleteByGroup:!1,deleteByStudent:!1,deleteByStatus:!1,selectedGroups:[],selectedStudents:[],selectedStatuses:[],startDate:"",endDate:""}),[$,G]=I.useState(!1),[te,ne]=I.useState(!1),[ee,ue]=I.useState(new Map),[X,P]=I.useState(new Date);I.useEffect(()=>{const M=setInterval(()=>{P(new Date)},1e3);return()=>clearInterval(M)},[]);const le=M=>{if(!M)return"#6B7280";let ce=0;for(let xe=0;xe<M.length;xe++)ce=M.charCodeAt(xe)+((ce<<5)-ce);return`hsl(${ce%360}, 60%, 70%)`};I.useEffect(()=>{const M=new Date,ce=new Date(M.getFullYear(),M.getMonth(),M.getDate()),re=new Date(ce.getTime()+24*60*60*1e3-1),xe=new Date(Date.UTC(M.getFullYear(),M.getMonth(),M.getDate()-M.getDay()+(M.getDay()===0?-6:1))),_e=new Date(Date.UTC(xe.getFullYear(),xe.getMonth(),xe.getDate()+7)),Ne=[...(s||[]).map(se=>{let je=se.topic,Te;if(se.studentId){const Ae=t.find(bt=>bt.id===se.studentId);Ae&&(je=`${Ae.fullName}: ${se.topic}`,Te=Ae.color||le(Ae.id))}else if(se.groupId){const Ae=n.find(bt=>bt.id===se.groupId);Ae&&(je=`${Ae.groupName}: ${se.topic}`,Te=Ae.color)}try{const Ae=new Date(se.lessonDate),bt=new Date(`${se.lessonDate}T${se.startTime||"09:00"}:00`);return isNaN(Ae.getTime())||isNaN(bt.getTime())?(console.warn("Invalid lesson data:",se),{...se,type:"lesson",eventName:je,startTime:new Date,originalStartTime:se.startTime,originalEndTime:se.endTime,color:Te}):{...se,type:"lesson",eventName:je,startTime:bt,originalStartTime:se.startTime,originalEndTime:se.endTime,color:Te}}catch(Ae){return console.warn("Error creating lesson date:",Ae,se),{...se,type:"lesson",eventName:je,startTime:new Date,originalStartTime:se.startTime,originalEndTime:se.endTime,color:Te}}}),...(a||[]).map(se=>({...se,type:"event",eventName:se.eventName,startTime:new Date(se.startTime),endTime:se.endTime?new Date(se.endTime):null,isAllDay:se.isAllDay,color:"rgb(16, 185, 129)",category:se.category})),...(t||[]).filter(se=>se.birthDate).map(se=>{const je=new Date(se.birthDate),Te=new Date,Ae=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate());let bt=new Date(Te.getFullYear(),je.getMonth(),je.getDate()),Jt=bt;return bt<Ae&&(Jt=new Date(Te.getFullYear()+1,je.getMonth(),je.getDate())),{id:`bday-${se.id}`,type:"birthday",eventName:`${se.fullName}'s Birthday`,startTime:Jt,allDay:!0,color:"rgb(236, 72, 153)"}})].map(se=>{let je=se.startTime.getTime();if(se.type==="lesson")try{const Te=se.startTime instanceof Date?se.startTime:new Date(se.startTime);if(isNaN(Te.getTime()))console.warn("Invalid lesson date:",se),je=se.startTime.getTime();else{const Ae=Te.toISOString().split("T")[0];je=new Date(`${Ae}T${se.originalEndTime||"10:00"}:00`).getTime()}}catch(Te){console.warn("Error processing lesson date:",Te,se),je=se.startTime.getTime()}else se.type==="event"&&se.endTime?je=new Date(se.endTime).getTime():se.type==="event"&&!se.endTime?je=se.startTime.getTime()+1*60*60*1e3:se.type==="birthday"&&(je=se.startTime.getTime()+24*60*60*1e3);return{...se,effectiveEndTime:je}});k(Ne.filter(se=>{const je=se.startTime.getTime()>=ce.getTime()&&se.startTime.getTime()<=re.getTime();return se.allDay?je:se.effectiveEndTime>=M.getTime()&&se.startTime.getTime()<=re.getTime()}).sort((se,je)=>se.startTime.getTime()-je.startTime.getTime())),F(Ne.filter(se=>(se.type==="event"||se.type==="birthday"||se.type==="lesson")&&se.startTime.getTime()>=M.getTime()&&se.startTime.getTime()<=M.getTime()+30*24*60*60*1e3).sort((se,je)=>se.isAllDay&&!je.isAllDay?1:!se.isAllDay&&je.isAllDay?-1:se.startTime.getTime()-je.startTime.getTime()));const $e=Ne.filter(se=>{const je=se.startTime.getTime()>=xe.getTime()&&se.startTime.getTime()<_e.getTime(),Te=se.effectiveEndTime>=xe.getTime()&&se.effectiveEndTime<_e.getTime(),Ae=se.startTime.getTime()<xe.getTime()&&se.effectiveEndTime>=_e.getTime();return(je||Te||Ae)&&se.type!=="birthday"&&!(se.type==="event"&&se.isAllDay)});Q($e);const ot=[];(t||[]).forEach(se=>{let je=se.installments;if(typeof je=="string")try{je=JSON.parse(je)}catch(Ae){console.error("Error parsing installments for student:",se.id,Ae),je=[]}Array.isArray(je)||(je=[]);const Te=je.filter(Ae=>Ae.status==="Unpaid"&&new Date(Ae.dueDate)<=M);if(Te&&Te.length>0){const Ae=Te.reduce((Jt,Zt)=>Jt+Zt.amount,0),bt=Te.reduce((Jt,Zt)=>new Date(Zt.dueDate)>new Date(Jt.dueDate)?Zt:Jt).dueDate;ot.push({id:`payment-${se.id}`,message:`${se.fullName} has ${Te.length} overdue payment(s) totaling ${Math.round(Ae)} .`,details:`Last due date was ${He(bt)}.`,type:"warning",student_id:se.id})}}),q(ot)},[t,n,s,a,i]);const ge=({type:M,color:ce,category:re})=>{const xe={lesson:{path:T.LESSON,defaultColor:"bg-blue-100 text-blue-600"},birthday:{path:T.CAKE,defaultColor:"bg-pink-100 text-pink-600"},event:{path:T.CALENDAR,defaultColor:"bg-green-100 text-green-600"}};if(M==="event"&&re){const se={meeting:"#3B82F6",workshop:"#10B981",presentation:"#F59E0B",exam:"#EF4444",celebration:"#EC4899",maintenance:"#8B5CF6",other:"#6B7280"}[re]||"#10B981";return r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mr-4",style:{backgroundColor:se},children:r.jsx(B,{path:T.CALENDAR,className:"w-5 h-5 text-white"})})}const{path:_e,defaultColor:Ee}=xe[M]||{path:T.INFO,defaultColor:"bg-gray-100 text-gray-600"},Ne=ce?{backgroundColor:ce,color:"white"}:{},$e=ce?"":Ee;return r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mr-4 ${$e}`,style:Ne,children:r.jsx(B,{path:_e,className:"w-5 h-5"})})},pe=M=>{const ce=Date.now(),re=M.startTime.getTime(),xe=M.effectiveEndTime;if(M.type==="birthday"){const _e=re-ce,Ee=Math.ceil(_e/(1e3*60*60*24));return Ee>0?`in ${Ee} day${Ee>1?"s":""}`:"Today"}if(ce<re){const _e=re-ce,Ee=Math.floor(_e/(1e3*60*60*24)),Ne=Math.floor(_e/(1e3*60*60)%24),$e=Math.floor(_e/(1e3*60)%60);let ot=[];return Ee>0&&ot.push(`${Ee}d`),Ne>0&&ot.push(`${Ne}h`),$e>0&&ot.push(`${$e}m`),ot.length===0?"starting now":`in ${ot.join(" ")}`}else if(ce>=re&&ce<xe){const _e=xe-ce,Ee=Math.floor(_e/(1e3*60*60)),Ne=Math.floor(_e/(1e3*60)%60);let $e=[];return Ee>0&&$e.push(`${Ee}h`),Ne>0&&$e.push(`${Ne}m`),$e.length===0?"ending now":`ends in ${$e.join(" ")}`}return null},Ce=M=>{M.type==="event"?(p(M),m(!0)):M.type==="lesson"&&(_(M),y(!0))},ze=M=>{g(M),x(!0)},Oe=async()=>{if(!b)return;const{type:M,id:ce,eventName:re}=b,xe=M==="lesson"?"lessons":"events";try{await ve.delete(xe,ce),l(`${M.charAt(0).toUpperCase()+M.slice(1)} deleted successfully!`,"success"),o()}catch(_e){console.error(`Error deleting ${M}:`,_e),l(`Failed to delete ${M}.`,"error")}finally{x(!1),g(null)}},pt=(M,ce)=>{H(re=>({...re,selectedGroups:ce?[...re.selectedGroups,M]:re.selectedGroups.filter(xe=>xe!==M)}))},Ie=(M,ce)=>{H(re=>({...re,selectedTutoringStudents:ce?[...re.selectedTutoringStudents,M]:re.selectedTutoringStudents.filter(xe=>xe!==M)}))},gt=()=>{const M=n.filter(ce=>{var re,xe;return!ce.isArchived&&((xe=(re=ce.schedule)==null?void 0:re.days)==null?void 0:xe.length)>0});H(ce=>({...ce,selectedGroups:M.map(re=>re.id)}))},ct=()=>{const M=t.filter(ce=>{var re,xe,_e;return ce.isTutoring&&!ce.isArchived&&((_e=(xe=(re=ce.tutoringDetails)==null?void 0:re.schedule)==null?void 0:xe.days)==null?void 0:_e.length)>0});H(ce=>({...ce,selectedTutoringStudents:M.map(re=>re.id)}))},it=()=>{H(M=>({...M,selectedGroups:[],selectedTutoringStudents:[]}))},qs=(M,ce)=>{C(ce?re=>[...re,M]:re=>re.filter(xe=>xe!==M))},tl=(M,ce)=>{ce?(W(re=>[...re,M]),C(re=>re.filter(xe=>xe!==M))):W(re=>re.filter(xe=>xe!==M))},nl=async()=>{if(V.length===0){l("Please select conflicts to modify.","warning");return}he(!0);try{const M=new Map;for(const ce of V){const re=O.find(xe=>xe.existingLesson.id===ce);if(re){const xe=re.newLesson,_e=new Date(re.existingLesson.startTime),Ee=new Date(re.existingLesson.endTime);let Ne=new Date(Ee);Ne.setHours(Ne.getHours()+1),Ne.getHours()>=22&&(Ne=new Date(_e),Ne.setHours(Ne.getHours()-2)),Ne.getHours()<8&&Ne.setHours(8,0,0,0);const $e=new Date(Ne);$e.setHours($e.getHours()+1);const ot={...xe,startTime:Ne.toTimeString().slice(0,5),endTime:$e.toTimeString().slice(0,5)};M.set(ce,ot)}}l(`Successfully modified ${M.size} lesson(s) to avoid conflicts.`,"success"),ue(M),z([]),C([]),W([]),nx(M)}catch(M){console.error("Error modifying conflicts:",M),l("Failed to modify some conflicts. Please try again.","error")}finally{he(!1)}},sl=async()=>{if(L.length===0){l("Please select conflicts to delete.","warning");return}try{let M=0;for(const ce of L){const re=O.find(xe=>xe.existingLesson.id===ce);if(re)try{re.existingLesson.type==="event"?await ve.delete("events",ce):re.existingLesson.type==="lesson"&&await ve.delete("lessons",ce),M++}catch(xe){console.error(`Error deleting ${re.existingLesson.type}:`,xe)}}l(`Successfully deleted ${M} conflicting item(s).`,"success"),o(),z([]),C([]),Gr()}catch(M){console.error("Error deleting conflicts:",M),l("Failed to delete some conflicts. Please try again.","error")}},Gr=async()=>{var M;D(!0);try{const ce=n.filter(se=>{var je,Te;return!se.isArchived&&((Te=(je=se.schedule)==null?void 0:je.days)==null?void 0:Te.length)>0&&Y.selectedGroups.includes(se.id)}),re=t.filter(se=>{var je,Te,Ae;return se.isTutoring&&!se.isArchived&&((Ae=(Te=(je=se.tutoringDetails)==null?void 0:je.schedule)==null?void 0:Te.days)==null?void 0:Ae.length)>0&&Y.selectedTutoringStudents.includes(se.id)});if(ce.length===0&&re.length===0){l("Please select at least one group or tutoring student to generate lessons for.","warning"),D(!1);return}const xe=[];let _e=0;const Ee=[],Ne=s.map(se=>({startTime:new Date(`${se.lessonDate}T${se.startTime||"09:00"}:00`),endTime:new Date(`${se.lessonDate}T${se.endTime||"10:00"}:00`),groupId:se.groupId,studentId:se.studentId,id:se.id,type:"lesson"})),$e=a.map(se=>({startTime:new Date(se.startTime),endTime:new Date(se.endTime),id:se.id,type:"event",eventName:se.eventName})),ot=[...Ne,...$e];for(const se of ce){const je=se.endDate||new Date(Date.now()+7776e6).toISOString().split("T")[0],Te=No(se,se.startDate,je);Te.forEach(Ae=>{const bt=new Date(`${Ae.lessonDate}T${Ae.startTime}:00`),Jt=new Date(`${Ae.lessonDate}T${Ae.endTime}:00`);ot.forEach(Zt=>{bt<Zt.endTime&&Jt>Zt.startTime&&Ee.push({newLesson:Ae,existingLesson:Zt,type:"lesson"})})}),xe.push(...Te)}for(const se of re){const je=Y.useIndividualEndDates&&((M=se.tutoringDetails)!=null&&M.endDate)?se.tutoringDetails.endDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],Te=om(se,se.enrollmentDate,je);Te.forEach(Ae=>{const bt=new Date(`${Ae.lessonDate}T${Ae.startTime}:00`),Jt=new Date(`${Ae.lessonDate}T${Ae.endTime}:00`);ot.forEach(Zt=>{bt<Zt.endTime&&Jt>Zt.startTime&&Ee.push({newLesson:Ae,existingLesson:Zt,type:"lesson"})})}),xe.push(...Te)}if(Ee.length>0){z(Ee);const se=Ee.filter(Ae=>Ae.existingLesson.type==="lesson").length,je=Ee.filter(Ae=>Ae.existingLesson.type==="event").length;let Te=`Found ${Ee.length} overlapping conflicts. `;se>0&&je>0?Te+=`${se} with existing lessons and ${je} with existing events.`:se>0?Te+=`${se} with existing lessons.`:je>0&&(Te+=`${je} with existing events.`),Te+=" Please resolve conflicts before generating lessons.",l(Te,"warning"),D(!1);return}z([]),C([]);for(const se of xe)try{await ve.create("lessons",se),_e++}catch(je){console.error("Error creating lesson:",je)}l(`Successfully generated ${_e} lessons!`,"success"),o(),Z(!1)}catch(ce){console.error("Error generating lessons:",ce),l("Failed to generate lessons. Please try again.","error")}finally{D(!1)}},bs=async()=>{if(!s||s.length===0){l("No lessons found to delete.","warning"),be(!1);return}be(!1),de(!0);try{let M=0;const ce=s.length,re=10;for(let xe=0;xe<s.length;xe+=re){const _e=s.slice(xe,xe+re);for(const Ee of _e)try{await ve.delete("lessons",Ee.id),M++}catch(Ne){console.error("Error deleting lesson:",Ne)}xe+re<s.length&&await new Promise(Ee=>setTimeout(Ee,100))}l(`Successfully deleted ${M} out of ${ce} lessons!`,"success"),o(),be(!1)}catch(M){console.error("Error deleting all lessons:",M),l("Failed to delete all lessons. Please try again.","error")}finally{de(!1)}},an=(M,ce)=>{U(re=>({...re,[M]:ce}))},Kg=(M,ce)=>{U(re=>({...re,selectedGroups:ce?[...re.selectedGroups,M]:re.selectedGroups.filter(xe=>xe!==M)}))},Jg=(M,ce)=>{U(re=>({...re,selectedStudents:ce?[...re.selectedStudents,M]:re.selectedStudents.filter(xe=>xe!==M)}))},rl=(M,ce)=>{U(re=>({...re,selectedStatuses:ce?[...re.selectedStatuses,M]:re.selectedStatuses.filter(xe=>xe!==M)}))},ti=()=>{let M=[...s];if(J.deleteByDateRange&&J.startDate&&J.endDate){const re=new Date(J.startDate),xe=new Date(J.endDate);M=M.filter(_e=>{const Ee=new Date(_e.lessonDate);return Ee>=re&&Ee<=xe})}return J.deleteByGroup&&J.selectedGroups.length>0&&(M=M.filter(re=>re.groupId&&J.selectedGroups.includes(re.groupId))),J.deleteByStudent&&J.selectedStudents.length>0&&(M=M.filter(re=>re.studentId&&J.selectedStudents.includes(re.studentId))),J.deleteByStatus&&J.selectedStatuses.length>0&&(M=M.filter(re=>re.status&&J.selectedStatuses.includes(re.status))),J.deleteByDateRange||J.deleteByGroup||J.deleteByStudent||J.deleteByStatus?M:[]},Zg=async()=>{const M=ti();if(M.length===0){l("No lessons match the selected criteria.","warning");return}ae({lessonsToDelete:M,count:M.length}),Se(!0)},Qg=async()=>{Se(!1);const{lessonsToDelete:M}=j;ae(null),ne(!0);try{let ce=0;const re=M.length,xe=10;for(let _e=0;_e<M.length;_e+=xe){const Ee=M.slice(_e,_e+xe);for(const Ne of Ee)try{await ve.delete("lessons",Ne.id),ce++}catch($e){console.error("Error deleting lesson:",$e)}_e+xe<M.length&&await new Promise(Ne=>setTimeout(Ne,100))}l(`Successfully deleted ${ce} out of ${re} lessons!`,"success"),o(),G(!1),U({deleteAll:!1,deleteByDateRange:!1,deleteByGroup:!1,deleteByStudent:!1,deleteByStatus:!1,selectedGroups:[],selectedStudents:[],selectedStatuses:[],startDate:"",endDate:""})}catch(ce){console.error("Error deleting lessons:",ce),l("Failed to delete lessons. Please try again.","error")}finally{ne(!1)}},Xg=()=>{const M=n.filter(ce=>{var re,xe;return!ce.isArchived&&((xe=(re=ce.schedule)==null?void 0:re.days)==null?void 0:xe.length)>0});U(ce=>({...ce,selectedGroups:M.map(re=>re.id)}))},ex=()=>{const M=t.filter(ce=>ce.isTutoring&&!ce.isArchived);U(ce=>({...ce,selectedStudents:M.map(re=>re.id)}))},tx=()=>{U(M=>({...M,selectedStatuses:["Unpaid","Paid","Overdue"]}))},al=()=>{U(M=>({...M,selectedGroups:[],selectedStudents:[],selectedStatuses:[]}))},nx=async M=>{var ce;D(!0);try{const re=n.filter(Ne=>{var $e,ot;return!Ne.isArchived&&((ot=($e=Ne.schedule)==null?void 0:$e.days)==null?void 0:ot.length)>0&&Y.selectedGroups.includes(Ne.id)}),xe=t.filter(Ne=>{var $e,ot,se;return Ne.isTutoring&&!Ne.isArchived&&((se=(ot=($e=Ne.tutoringDetails)==null?void 0:$e.schedule)==null?void 0:ot.days)==null?void 0:se.length)>0&&Y.selectedTutoringStudents.includes(Ne.id)});if(re.length===0&&xe.length===0){l("Please select at least one group or tutoring student to generate lessons for.","warning"),D(!1);return}const _e=[];let Ee=0;for(const Ne of re){const $e=Ne.endDate||new Date(Date.now()+7776e6).toISOString().split("T")[0],se=No(Ne,Ne.startDate,$e).map(je=>M.get(`${Ne.id}-${je.lessonDate}-${je.startTime}`)||je);_e.push(...se)}for(const Ne of xe){const $e=Y.useIndividualEndDates&&((ce=Ne.tutoringDetails)!=null&&ce.endDate)?Ne.tutoringDetails.endDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],se=om(Ne,Ne.enrollmentDate,$e).map(je=>M.get(`${Ne.id}-${je.lessonDate}-${je.startTime}`)||je);_e.push(...se)}for(const Ne of _e)try{await ve.create("lessons",Ne),Ee++}catch($e){console.error("Error creating lesson:",$e)}l(`Successfully generated ${Ee} lessons!`,"success"),o(),Z(!1),ue(new Map)}catch(re){console.error("Error generating lessons:",re),l("Failed to generate lessons. Please try again.","error")}finally{D(!1)}},sx=()=>{const M=new Date;return(s==null?void 0:s.filter(ce=>(`${ce.lessonDate}${ce.startTime||"09:00"}`,new Date(`${ce.lessonDate}T${ce.endTime||"10:00"}`)<M&&ce.status==="Complete"&&(!ce.attendance||Object.keys(ce.attendance).length===0))))||[]},rx=()=>{const M=new Date,ce=new Date().toISOString().split("T")[0];return(s==null?void 0:s.filter(re=>{const xe=new Date(re.lessonDate).toISOString().split("T")[0],_e=new Date(`${re.lessonDate}T${re.endTime||"10:00"}`);return xe===ce&&_e<M&&re.status==="Complete"&&(!re.attendance||Object.keys(re.attendance).length===0)}))||[]};return r.jsxs("div",{className:"relative p-4 md:p-8 bg-gray-50 rounded-lg shadow-lg",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center shadow-sm mr-4",children:r.jsx(B,{path:T.DASHBOARD,className:"w-7 h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Dashboard"}),r.jsx("p",{className:"text-gray-600 text-sm lg:text-base",children:"Welcome, Nazm!"})]})]}),r.jsxs("div",{className:"hidden lg:flex items-center space-x-6 text-gray-700",children:[r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"text-xl font-bold text-gray-900",children:X.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})})}),r.jsx("div",{className:"w-px h-8 bg-gray-300"}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-lg font-bold text-gray-900",children:X.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),r.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mt-1",children:X.toLocaleDateString("en-US",{weekday:"long"})})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 cursor-pointer group",onClick:()=>e("students"),children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.STUDENTS,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:t.length}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-blue-700",children:"Total Students"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 cursor-pointer group",onClick:()=>e("groups"),children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-purple-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.GROUPS,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:n.length}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-purple-700",children:"Total Groups"})]}),r.jsxs("button",{onClick:()=>d(!0),className:"bg-white text-gray-900 rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 text-left group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.ADD,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-2",children:"Enroll Student"}),r.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Add a new student."})]}),r.jsxs("button",{onClick:()=>m(!0),className:"bg-white text-gray-900 rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 text-left group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-green-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.CALENDAR,className:"w-5 h-5 md:w-7 md:h-7 text-white"})})}),r.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-2",children:"Log Event"}),r.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Add a new event."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 md:gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200 min-h-[300px] md:min-h-[350px] flex flex-col",children:[r.jsxs("div",{className:"flex items-center mb-4 md:mb-6 flex-shrink-0",children:[r.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-sm mr-3",children:r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),r.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-800",children:"Today's Schedule"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:S.length>0?r.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.jsx("ul",{className:"space-y-3 md:space-y-4",children:S.map(M=>r.jsxs("li",{className:"flex items-center justify-between group p-3 rounded-xl hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[r.jsx(ge,{type:M.type,color:M.color,category:M.category}),r.jsxs("div",{className:"min-w-0 flex-1 ml-3",children:[r.jsxs("p",{className:"font-medium text-gray-800 text-sm md:text-base truncate",children:[M.eventName," ",pe(M)&&r.jsxs("span",{className:"text-xs md:text-sm text-gray-500",children:["(",pe(M),")"]})]}),r.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:M.allDay?"All Day":M.type==="lesson"?`${M.originalStartTime||"09:00"} - ${M.originalEndTime||"10:00"}`:M.startTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Europe/Istanbul"})})]})]}),(M.type==="event"||M.type==="lesson")&&r.jsxs("div",{className:"flex space-x-1 md:space-x-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[r.jsx("button",{onClick:()=>Ce(M),className:"p-1 md:p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50 transition-colors",children:r.jsx(B,{path:T.EDIT,className:"w-4 h-4 md:w-5 md:h-5"})}),r.jsx("button",{onClick:()=>ze(M),className:"p-1 md:p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50 transition-colors",children:r.jsx(B,{path:T.TRASH,className:"w-4 h-4 md:w-5 md:h-5"})})]})]},M.id))})}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center flex-1",children:[r.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:r.jsx(B,{path:T.CALENDAR,className:"w-6 h-6 md:w-8 md:h-8 text-gray-400"})}),r.jsx("p",{className:"text-gray-500 text-sm md:text-base",children:"No events or lessons scheduled for today."})]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200 min-h-[300px] md:min-h-[350px] flex flex-col",children:[r.jsxs("div",{className:"flex items-center mb-4 md:mb-6 flex-shrink-0",children:[r.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-purple-600 rounded-xl flex items-center justify-center shadow-sm mr-3",children:r.jsx(B,{path:T.CLOCK,className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),r.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-800",children:"Upcoming Events"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:A.length>0?r.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.jsx("ul",{className:"space-y-3 md:space-y-4",children:A.map((M,ce)=>r.jsxs("li",{className:`p-3 rounded-xl flex items-center justify-between group transition-colors ${ce===0?"bg-purple-50 border border-purple-200":"hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[r.jsx(ge,{type:M.type,color:M.color,category:M.category}),r.jsxs("div",{className:"min-w-0 flex-1 ml-3",children:[r.jsxs("p",{className:"font-medium text-gray-800 text-sm md:text-base truncate",children:[M.eventName," ",pe(M)&&r.jsxs("span",{className:"text-xs md:text-sm text-gray-500",children:["(",pe(M),")"]})]}),r.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:He(M.startTime)})]})]}),(M.type==="event"||M.type==="lesson")&&r.jsxs("div",{className:"flex space-x-1 md:space-x-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[r.jsx("button",{onClick:()=>Ce(M),className:"p-1 md:p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50 transition-colors",children:r.jsx(B,{path:T.EDIT,className:"w-4 h-4 md:w-5 md:h-5"})}),r.jsx("button",{onClick:()=>ze(M),className:"p-1 md:p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50 transition-colors",children:r.jsx(B,{path:T.TRASH,className:"w-4 h-4 md:w-5 md:h-5"})})]})]},M.id))})}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center flex-1",children:[r.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:r.jsx(B,{path:T.CLOCK,className:"w-6 h-6 md:w-8 md:h-8 text-gray-400"})}),r.jsx("p",{className:"text-gray-500 text-sm md:text-base",children:"No upcoming events."})]})})]})]}),r.jsx("div",{className:"min-h-[600px] md:min-h-[700px]",children:r.jsx(ij,{})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-2xl p-6 shadow-lg border border-amber-100 mb-6",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center shadow-sm mr-3",children:r.jsx(B,{path:T.NOTIFICATION,className:"w-5 h-5 text-white"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Important Notifications"})]}),(()=>{const M=sx(),ce=rx();return M.length>0||ce.length>0?r.jsxs("div",{className:"mb-6",children:[r.jsxs("h4",{className:"font-semibold text-red-800 mb-3 flex items-center",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 mr-2"}),"Lesson Attendance Required"]}),r.jsxs("ul",{className:"space-y-3",children:[M.length>0&&r.jsxs("li",{className:"flex items-center justify-between group p-3 rounded-xl bg-red-50 border border-red-200 hover:bg-red-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mr-3 bg-red-500 shadow-sm",children:r.jsx(B,{path:T.CLOCK,className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-red-800",children:[M.length," completed lesson(s) missing attendance"]}),r.jsx("p",{className:"text-sm text-red-600",children:"Need immediate attention"})]})]}),r.jsx("button",{onClick:()=>e("groups"),className:"px-3 py-1 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors",children:"View"})]}),ce.length>0&&r.jsxs("li",{className:"flex items-center justify-between group p-3 rounded-xl bg-orange-50 border border-orange-200 hover:bg-orange-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mr-3 bg-orange-500 shadow-sm",children:r.jsx(B,{path:T.CALENDAR,className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-orange-800",children:[ce.length," completed lesson(s) from today missing attendance"]}),r.jsx("p",{className:"text-sm text-orange-600",children:"Need attendance logging"})]})]}),r.jsx("button",{onClick:()=>e("groups"),className:"px-3 py-1 bg-orange-600 text-white rounded-lg text-sm hover:bg-orange-700 transition-colors",children:"View"})]})]})]}):null})(),E.length>0?r.jsx("ul",{className:"space-y-4",children:E.map(M=>r.jsx("li",{className:"flex items-center justify-between group p-3 rounded-xl hover:bg-amber-50 transition-colors",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mr-4 bg-gradient-to-br from-yellow-500 to-yellow-600 shadow-sm",children:r.jsx(B,{path:T.WALLET,className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:M.message}),M.details&&r.jsx("p",{className:"text-sm text-gray-600",children:M.details})]})]})},M.id))}):r.jsxs("div",{className:"flex items-center text-green-600 p-3 rounded-xl bg-green-50",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mr-4 bg-gradient-to-br from-green-500 to-green-600 shadow-sm",children:r.jsx(B,{path:T.CHECK,className:"w-5 h-5 text-white"})}),r.jsx("p",{className:"font-medium",children:"Everything is good! No overdue payments."})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[r.jsx("h3",{className:"font-semibold mb-4 text-gray-800",children:"Weekly Overview"}),r.jsx(QN,{events:R})]}),r.jsx(Au,{isOpen:c,onClose:()=>d(!1)}),r.jsx(ZN,{isOpen:u,onClose:()=>{m(!1),p(null)},eventToEdit:h}),r.jsx(Iu,{isOpen:f,onClose:()=>{y(!1),_(null)},lessonToEdit:w}),b&&r.jsx(nn,{isOpen:v,onClose:()=>x(!1),onConfirm:Oe,title:`Delete ${b.type}`,message:`Are you sure you want to delete the ${b.type} "${b.event_name}"? This action cannot be undone.`}),r.jsx(nn,{isOpen:De,onClose:()=>{Se(!1),ae(null)},onConfirm:Qg,title:"Delete Selected Lessons",message:j?`Are you sure you want to delete ${j.count} lessons? This action cannot be undone.`:"",confirmText:"Delete Selected Lessons",confirmStyle:"bg-yellow-600 hover:bg-yellow-700"}),r.jsx(tt,{isOpen:N,onClose:()=>{Z(!1),z([]),C([]),W([]),ue(new Map)},title:"Generate Lessons Automatically",headerStyle:{backgroundColor:"#3B82F6"},children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.INFO,className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Automatic Lesson Generation"}),r.jsx("p",{className:"text-sm text-blue-700",children:"This will automatically generate lessons for selected groups and tutoring students based on their existing schedules. Lessons will be created from today until their end date (or 3 months from now if no end date is set)."})]})]})}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Select Groups"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:gt,className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),r.jsx("button",{type:"button",onClick:it,className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"})]})]}),r.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[n.filter(M=>{var ce,re;return!M.isArchived&&((re=(ce=M.schedule)==null?void 0:ce.days)==null?void 0:re.length)>0}).map(M=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`group-${M.id}`,checked:Y.selectedGroups.includes(M.id),onChange:ce=>pt(M.id,ce.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsxs("label",{htmlFor:`group-${M.id}`,className:"ml-2 block text-sm text-gray-700 flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:{backgroundColor:M.color||"#3B82F6"}}),M.groupName," (",M.schedule.days.join(", "),")",M.endDate&&Y.useIndividualEndDates&&r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:[" Ends: ",new Date(M.endDate).toLocaleDateString()]})]})]},M.id)),n.filter(M=>{var ce,re;return!M.isArchived&&((re=(ce=M.schedule)==null?void 0:ce.days)==null?void 0:re.length)>0}).length===0&&r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No groups with schedules found."})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Select Tutoring Students"}),r.jsx("div",{className:"flex space-x-2",children:r.jsx("button",{type:"button",onClick:ct,className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"})})]}),r.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[t.filter(M=>{var ce,re,xe;return M.isTutoring&&!M.isArchived&&((xe=(re=(ce=M.tutoringDetails)==null?void 0:ce.schedule)==null?void 0:re.days)==null?void 0:xe.length)>0}).map(M=>{var ce;return r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`student-${M.id}`,checked:Y.selectedTutoringStudents.includes(M.id),onChange:re=>Ie(M.id,re.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsxs("label",{htmlFor:`student-${M.id}`,className:"ml-2 block text-sm text-gray-700 flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:{backgroundColor:M.color||"#8B5CF6"}}),M.fullName," (",M.tutoringDetails.schedule.days.join(", "),")",((ce=M.tutoringDetails)==null?void 0:ce.endDate)&&Y.useIndividualEndDates&&r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:[" Ends: ",new Date(M.tutoringDetails.endDate).toLocaleDateString()]})]})]},M.id)}),t.filter(M=>{var ce,re,xe;return M.isTutoring&&!M.isArchived&&((xe=(re=(ce=M.tutoringDetails)==null?void 0:ce.schedule)==null?void 0:re.days)==null?void 0:xe.length)>0}).length===0&&r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No tutoring students with schedules found."})]}),t.filter(M=>M.isTutoring&&!M.isArchived).length>0&&t.filter(M=>{var ce,re,xe;return M.isTutoring&&!M.isArchived&&((xe=(re=(ce=M.tutoringDetails)==null?void 0:ce.schedule)==null?void 0:re.days)==null?void 0:xe.length)>0}).length===0&&r.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[r.jsx("h5",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Debug: Tutoring Students Found but No Schedules"}),r.jsx("div",{className:"text-xs text-yellow-700 space-y-1",children:t.filter(M=>M.isTutoring&&!M.isArchived).map(M=>r.jsxs("div",{children:[r.jsx("strong",{children:M.fullName}),":",M.tutoringDetails?M.tutoringDetails.schedule?M.tutoringDetails.schedule.days?M.tutoringDetails.schedule.days.length===0?" Empty days array":` Has ${M.tutoringDetails.schedule.days.length} days: ${M.tutoringDetails.schedule.days.join(", ")}`:" No days":" No schedule":" No tutoringDetails"]},M.id))})]})]}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Delete Lessons"}),r.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Choose how you want to delete lessons. You can delete all lessons or select specific criteria."}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>be(!0),disabled:s.length===0||oe,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[r.jsx(B,{path:T.TRASH,className:"w-4 h-4 mr-2"}),oe?"Deleting...":`Delete All Lessons (${s.length})`]}),r.jsxs("button",{onClick:()=>G(!0),disabled:s.length===0||te,className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[r.jsx(B,{path:T.SEARCH,className:"w-4 h-4 mr-2"}),te?"Deleting...":"Delete Selected Lessons"]})]})]})]})}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Generation Preview"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Selected groups:"}),r.jsx("span",{className:"font-medium text-gray-800",children:Y.selectedGroups.length===0?"0 (none selected)":Y.selectedGroups.length+" selected"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Selected tutoring students:"}),r.jsx("span",{className:"font-medium text-gray-800",children:Y.selectedTutoringStudents.length===0?"0 (none selected)":Y.selectedTutoringStudents.length+" selected"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Estimated total lessons:"}),r.jsx("span",{className:"font-medium text-blue-600",children:(()=>{var xe;const M=n.filter(_e=>{var Ee,Ne;return!_e.isArchived&&((Ne=(Ee=_e.schedule)==null?void 0:Ee.days)==null?void 0:Ne.length)>0&&Y.selectedGroups.includes(_e.id)}),ce=t.filter(_e=>{var Ee,Ne,$e;return _e.isTutoring&&!_e.isArchived&&(($e=(Ne=(Ee=_e.tutoringDetails)==null?void 0:Ee.schedule)==null?void 0:Ne.days)==null?void 0:$e.length)>0&&Y.selectedTutoringStudents.includes(_e.id)});let re=0;for(const _e of M){const Ee=_e.endDate||new Date(Date.now()+7776e6).toISOString().split("T")[0],Ne=wo(_e.startDate,Ee,_e.schedule.days);re+=Ne}for(const _e of ce){const Ee=Y.useIndividualEndDates&&((xe=_e.tutoringDetails)!=null&&xe.endDate)?_e.tutoringDetails.endDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],Ne=wo(_e.enrollmentDate,Ee,_e.tutoringDetails.schedule.days);re+=Ne}return re})()})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[r.jsx("p",{children:" Lessons will be generated from today until each group's/student's end date"}),r.jsx("p",{children:" If no end date is set, lessons will be generated for 3 months"}),r.jsx("p",{children:" Times will be based on each group's/student's existing schedule"})]})]})]}),O.length>0&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Overlapping Conflicts Detected"}),r.jsx("p",{className:"text-sm text-red-700 mb-3",children:"The following items conflict with the lessons you're trying to generate. Choose to either delete the conflicting items or modify the new lessons to avoid conflicts:"}),r.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 mb-4",children:O.map((M,ce)=>r.jsxs("div",{className:"p-3 bg-white rounded-lg border border-red-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-800",children:M.existingLesson.type==="event"?M.existingLesson.eventName:M.existingLesson.topic}),r.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${M.existingLesson.type==="event"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:M.existingLesson.type})]}),r.jsx("div",{className:"text-sm text-gray-600",children:M.existingLesson.type==="event"?new Date(M.existingLesson.startTime).toLocaleDateString()+" "+new Date(M.existingLesson.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+" - "+new Date(M.existingLesson.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(`${M.existingLesson.lessonDate}T${M.existingLesson.startTime}`).toLocaleDateString()+" "+M.existingLesson.startTime+" - "+M.existingLesson.endTime})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["New lesson: ",M.newLesson.startTime," - ",M.newLesson.endTime]})]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:L.includes(M.existingLesson.id),onChange:re=>qs(M.existingLesson.id,re.target.checked),className:"h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm text-red-700",children:"Delete existing"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:V.includes(M.existingLesson.id),onChange:re=>tl(M.existingLesson.id,re.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-blue-700",children:"Modify new lesson"})]})]})]},ce))}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"text-sm text-red-700",children:[L.length," to delete, ",V.length," to modify"]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{z([]),C([]),W([])},className:"px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"button",onClick:nl,disabled:V.length===0||ie,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:ie?"Modifying...":`Modify Selected (${V.length})`}),r.jsxs("button",{type:"button",onClick:sl,disabled:L.length===0,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["Delete Selected (",L.length,")"]})]})]})]})]})}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Gr,disabled:K||Y.selectedGroups.length===0&&Y.selectedTutoringStudents.length===0||O.length>0,className:"px-6 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center space-x-2",children:K?r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.LOADING,className:"w-4 h-4 animate-spin"}),"Generating..."]}):O.length>0?r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.WARNING,className:"w-4 h-4"}),"Resolve Conflicts First"]}):r.jsx(r.Fragment,{children:"Generate Lessons"})})]})]})}),r.jsx(nn,{isOpen:ye,onClose:()=>be(!1),onConfirm:bs,title:"Delete All Lessons",message:`Are you sure you want to delete ALL ${s.length} lessons? This action cannot be undone and will remove all lessons from the system.`,confirmText:oe?"Deleting...":"Delete All Lessons",confirmStyle:"bg-red-600 hover:bg-red-700",disabled:oe}),r.jsx(tt,{isOpen:$,onClose:()=>G(!1),title:"Delete Selected Lessons",headerStyle:{backgroundColor:"#F59E0B"},children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(B,{path:T.WARNING,className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Select Criteria for Deletion"}),r.jsx("p",{className:"text-sm text-yellow-700",children:"Choose which lessons to delete based on their date, group, student, or status."})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"deleteByDateRange",name:"deleteByDateRange",checked:J.deleteByDateRange,onChange:M=>an("deleteByDateRange",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"deleteByDateRange",className:"ml-2 block text-sm text-gray-900",children:"Delete by Date Range"})]}),J.deleteByDateRange&&r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(pn,{label:"Start Date",name:"startDate",value:J.startDate,onChange:M=>an("startDate",M.target.value)}),r.jsx(pn,{label:"End Date",name:"endDate",value:J.endDate,onChange:M=>an("endDate",M.target.value)})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"deleteByGroup",name:"deleteByGroup",checked:J.deleteByGroup,onChange:M=>an("deleteByGroup",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"deleteByGroup",className:"ml-2 block text-sm text-gray-900",children:"Delete by Group"})]}),J.deleteByGroup&&r.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[r.jsxs("div",{className:"flex space-x-2 mb-2",children:[r.jsx("button",{type:"button",onClick:Xg,className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Select All"}),r.jsx("button",{type:"button",onClick:al,className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"})]}),n.filter(M=>{var ce,re;return!M.isArchived&&((re=(ce=M.schedule)==null?void 0:ce.days)==null?void 0:re.length)>0}).map(M=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`group-${M.id}`,checked:J.selectedGroups.includes(M.id),onChange:ce=>Kg(M.id,ce.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsxs("label",{htmlFor:`group-${M.id}`,className:"ml-2 block text-sm text-gray-700 flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:{backgroundColor:M.color||"#F59E0B"}}),M.groupName," (",M.schedule.days.join(", "),")"]})]},M.id)),n.filter(M=>{var ce,re;return!M.isArchived&&((re=(ce=M.schedule)==null?void 0:ce.days)==null?void 0:re.length)>0}).length===0&&r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No groups with schedules found."})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"deleteByStudent",name:"deleteByStudent",checked:J.deleteByStudent,onChange:M=>an("deleteByStudent",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"deleteByStudent",className:"ml-2 block text-sm text-gray-900",children:"Delete by Student"})]}),J.deleteByStudent&&r.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[r.jsxs("div",{className:"flex space-x-2 mb-2",children:[r.jsx("button",{type:"button",onClick:ex,className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Select All"}),r.jsx("button",{type:"button",onClick:al,className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"})]}),t.filter(M=>M.isTutoring&&!M.isArchived).map(M=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`student-${M.id}`,checked:J.selectedStudents.includes(M.id),onChange:ce=>Jg(M.id,ce.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsxs("label",{htmlFor:`student-${M.id}`,className:"ml-2 block text-sm text-gray-700 flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:{backgroundColor:M.color||"#F59E0B"}}),M.fullName," (",M.tutoringDetails.schedule.days.join(", "),")"]})]},M.id)),t.filter(M=>M.isTutoring&&!M.isArchived).length===0&&r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No tutoring students found."})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"deleteByStatus",name:"deleteByStatus",checked:J.deleteByStatus,onChange:M=>an("deleteByStatus",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"deleteByStatus",className:"ml-2 block text-sm text-gray-900",children:"Delete by Status"})]}),J.deleteByStatus&&r.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[r.jsxs("div",{className:"flex space-x-2 mb-2",children:[r.jsx("button",{type:"button",onClick:tx,className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Select All"}),r.jsx("button",{type:"button",onClick:al,className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Clear All"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"status-unpaid",name:"status-unpaid",checked:J.selectedStatuses.includes("Unpaid"),onChange:M=>rl("Unpaid",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"status-unpaid",className:"ml-2 block text-sm text-gray-700",children:"Unpaid Installments"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"status-paid",name:"status-paid",checked:J.selectedStatuses.includes("Paid"),onChange:M=>rl("Paid",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"status-paid",className:"ml-2 block text-sm text-gray-700",children:"Paid Installments"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"status-overdue",name:"status-overdue",checked:J.selectedStatuses.includes("Overdue"),onChange:M=>rl("Overdue",M.target.checked),className:"h-4 w-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("label",{htmlFor:"status-overdue",className:"ml-2 block text-sm text-gray-700",children:"Overdue Installments"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Deletion Preview"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Lessons to be deleted:"}),r.jsxs("span",{className:"font-medium text-red-600",children:[ti().length," out of ",s.length," total lessons"]})]}),(()=>J.deleteByDateRange||J.deleteByGroup||J.deleteByStudent||J.deleteByStatus?ti().length===0?r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"No lessons match the selected criteria."})}):r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsx("p",{children:"This will delete lessons matching your selected criteria:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[J.deleteByDateRange&&J.startDate&&J.endDate&&r.jsxs("li",{children:["Date range: ",J.startDate," to ",J.endDate]}),J.deleteByGroup&&J.selectedGroups.length>0&&r.jsxs("li",{children:["Groups: ",J.selectedGroups.length," selected"]}),J.deleteByStudent&&J.selectedStudents.length>0&&r.jsxs("li",{children:["Students: ",J.selectedStudents.length," selected"]}),J.deleteByStatus&&J.selectedStatuses.length>0&&r.jsxs("li",{children:["Statuses: ",J.selectedStatuses.join(", ")]})]})]}):r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Please select at least one deletion criteria above."})}))()]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>G(!1),className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Zg,disabled:te||ti().length===0||!J.deleteByDateRange&&!J.deleteByGroup&&!J.deleteByStudent&&!J.deleteByStatus,className:"px-6 py-2 rounded-lg text-white bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-400 disabled:cursor-not-allowed flex items-center space-x-2",children:te?r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.LOADING,className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Deleting..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(B,{path:T.TRASH,className:"w-4 h-4"}),r.jsx("span",{children:"Delete Selected Lessons"})]})})]})]})})]})},lj=({isOpen:e,onClose:t,documentToEdit:n})=>{const{showNotification:s}=Xe(),{fetchData:a}=at(),[i,o]=I.useState({name:"",type:""}),[l,c]=I.useState(!1);I.useEffect(()=>{n&&o({name:n.name||"",type:n.type||""})},[n]);const d=h=>{const{name:p,value:v}=h.target;o(x=>({...x,[p]:v}))},u=async h=>{h.preventDefault(),c(!0);try{if(n.isTransactionDocument||n.isStudentDocument){s("This document cannot be edited directly. Please edit the original record (business expense or student enrollment) instead.","info"),t();return}await ve.update("documents",n.id,{name:i.name,type:i.type}),s("Document updated successfully!","success"),a(),t()}catch(p){console.error("Error updating document:",p),s("Failed to update document.","error")}finally{c(!1)}},m=[{value:"nationalId",label:"National ID"},{value:"agreement",label:"Agreement"},{value:"certificate",label:"Certificate"},{value:"invoice",label:"Invoice"},{value:"other",label:"Other"}];return r.jsx(tt,{isOpen:e,onClose:t,title:"Edit Document",headerStyle:{backgroundColor:"#8B5CF6"},children:r.jsxs("form",{onSubmit:u,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ge,{label:"Document Name",name:"name",value:i.name,onChange:d,required:!0}),r.jsx(On,{label:"Document Type",name:"type",value:i.type,onChange:d,required:!0,children:m.map(h=>r.jsx("option",{value:h.value,children:h.label},h.value))})]}),r.jsxs("div",{className:"flex justify-end pt-8 mt-8 border-t border-gray-200 space-x-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2 rounded-lg text-white bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed",children:l?"Saving...":"Save Changes"})]})]})})},cj=({isOpen:e,onClose:t,category:n,onUploadSuccess:s,documentType:a})=>{const{showNotification:i}=Xe(),{fetchData:o,students:l}=at(),[c,d]=I.useState({name:"",type:"other",studentId:""}),[u,m]=I.useState(null),[h,p]=I.useState(!1),[v,x]=I.useState(0);I.useEffect(()=>{e&&(d({name:"",type:a||"other",studentId:""}),m(null),x(0))},[e,a]);const b=()=>{switch(n){case"student":return[{value:"nationalId",label:"National ID"},{value:"agreement",label:"Agreement"},{value:"certificate",label:"Certificate"},{value:"payment_plan",label:"Payment Plan"},{value:"other",label:"Other"}];case"finance":return[{value:"invoice",label:"Invoice"},{value:"receipt",label:"Receipt"},{value:"contract",label:"Contract"},{value:"payment_plan",label:"Payment Plan"},{value:"financial_report",label:"Financial Report"},{value:"other",label:"Other"}];case"meb":return[{value:"received",label:"Received Document"},{value:"sent",label:"Sent Document"}];default:return[{value:"other",label:"Other"}]}},g=w=>{const _=w.target.files[0];if(_){if(_.size>10*1024*1024){i("File size must be less than 10MB.","error");return}if(!["application/pdf","image/jpeg","image/png","image/gif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(_.type)){i("Please select a valid file type (PDF, image, or Word document).","error");return}m(_),c.name||d(k=>({...k,name:_.name}))}},f=async w=>{if(w.preventDefault(),!u||!c.name.trim()||!c.type){i("Please fill in all required fields and select a file.","error");return}if(n==="student"&&!c.studentId){i("Please select a student for this document.","error");return}p(!0),x(0);try{const{data:{user:_}}=await Pe.auth.getUser();if(!_)throw new Error("User not authenticated");const S=u.name.split(".").pop().toLowerCase(),k=Gp(c.name).replace(/\.[^/.]+$/,""),A=new Date().getTime();let F;n==="student"&&c.studentId?F=`documents/${n}/${c.studentId}/${A}_${k}.${S}`:F=`documents/${n}/${_.id}/${A}_${k}.${S}`;const{data:R,error:Q}=await Pe.storage.from("udms").upload(F,u,{onUploadProgress:N=>{x(N.loaded/N.total*100)}});if(Q)throw Q;const{data:{publicUrl:E}}=Pe.storage.from("udms").getPublicUrl(F),q={name:c.name,type:c.type,category:n,url:E,storage_path:F,upload_date:new Date().toISOString().split("T")[0]};await ve.create("documents",q),n==="student"&&console.log(" Student document uploaded:",{name:c.name,studentId:c.studentId,storagePath:F,documentData:q}),i("Document uploaded successfully!","success"),o(),s(),t()}catch(_){console.error("Error uploading document:",_),i("Failed to upload document. Please try again.","error")}finally{p(!1),x(0)}},y=()=>{switch(n){case"student":return"#3B82F6";case"finance":return"#10B981";case"meb":return"#F59E0B";default:return"#6B7280"}};return r.jsx(tt,{isOpen:e,onClose:t,title:`Upload ${n.charAt(0).toUpperCase()+n.slice(1)} Document`,headerStyle:{backgroundColor:y()},children:r.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File *"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 transition-colors",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(B,{path:T.UPLOAD,className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600",children:[r.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[r.jsx("span",{children:"Upload a file"}),r.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:g,accept:".pdf,.jpg,.jpeg,.png,.gif,.doc,.docx"})]}),r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PDF, PNG, JPG, GIF, DOC up to 10MB"})]})}),u&&r.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:T.CHECK_CIRCLE,className:"w-5 h-5 text-green-600 mr-2"}),r.jsx("span",{className:"text-sm text-green-800",children:u.name}),r.jsxs("span",{className:"text-xs text-green-600 ml-2",children:["(",(u.size/1024/1024).toFixed(2)," MB)"]})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Name *"}),r.jsx("input",{type:"text",value:c.name,onChange:w=>d(_=>({..._,name:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter document name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),r.jsxs("select",{value:c.type,onChange:w=>d(_=>({..._,type:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select document type"}),b().map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))]})]}),n==="student"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student *"}),r.jsxs("select",{value:c.studentId,onChange:w=>d(_=>({..._,studentId:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select a student"}),l.map(w=>r.jsx("option",{value:w.id,children:w.fullName},w.id))]})]}),h&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Uploading..."}),r.jsxs("span",{children:[Math.round(v),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:h,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",children:h?"Uploading...":"Upload Document"})]})]})})},dj=({title:e,icon:t,color:n,documents:s,category:a,onViewDocuments:i,onUploadDocument:o,onOpenFolders:l})=>{const c=s.length;return r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 group cursor-pointer",onClick:()=>l(a,s),children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",style:{backgroundColor:n},children:r.jsx(B,{path:t,className:"w-7 h-7 text-white"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:e}),r.jsx("div",{className:"space-y-3 mb-6",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-4 h-4 mr-2 text-gray-500"}),r.jsxs("span",{children:[c," document",c!==1?"s":""," available"]})]})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium text-white shadow-sm",style:{backgroundColor:n},children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-4 h-4 mr-2"}),c," files"]}),(a==="meb"||a==="student")&&r.jsxs("button",{onClick:d=>{d.stopPropagation(),o(a,a==="meb"?"received":"other")},className:"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium text-white hover:opacity-80 transition-all duration-300 shadow-sm",style:{backgroundColor:n},children:[r.jsx(B,{path:T.UPLOAD,className:"w-4 h-4 mr-2"}),"Upload"]})]})]})},uj=e=>{const t={};return e.forEach(n=>{t[n.studentId]||(t[n.studentId]={studentId:n.studentId,studentName:n.studentName||"Unknown Student",documents:[],hasNationalId:!1,hasAgreement:!1,hasPaymentPlan:!1,hasInvoices:!1}),t[n.studentId].documents.push(n),n.type==="nationalId"&&(t[n.studentId].hasNationalId=!0),n.type==="agreement"&&(t[n.studentId].hasAgreement=!0),n.type==="payment_plan"&&(t[n.studentId].hasPaymentPlan=!0),n.type==="invoice"&&(t[n.studentId].hasInvoices=!0)}),Object.values(t).sort((n,s)=>n.studentName.localeCompare(s.studentName))},hj=e=>{const t={};return e.forEach(n=>{if(n.category==="finance"){const s=n.subcategory||"Other";t[s]||(t[s]=[]),t[s].push(n)}}),t},fj=({isOpen:e,onClose:t,category:n,documents:s,onEditDocument:a,onDeleteDocument:i,folderName:o})=>{at();const{showNotification:l}=Xe(),c=()=>{let v="";switch(n){case"student":v="Student Documents";break;case"finance":v="Finance Documents";break;case"meb":v="MEB Documents";break;default:v="Documents";break}return o?`${v} - ${o}`:v},d=()=>{switch(n){case"student":return"#3B82F6";case"finance":return"#10B981";case"meb":return"#F59E0B";default:return"#6B7280"}},u=v=>{if(v.isTransactionDocument)return"bg-green-600";if(v.isStudentDocument)return"bg-blue-600";switch(v.category){case"student":return"bg-blue-600";case"finance":return"bg-green-600";case"meb":return"bg-yellow-600";default:return"bg-gray-600"}},m=v=>{if(v.isTransactionDocument)return T.DOCUMENTS;if(v.isStudentDocument)return T.STUDENTS;switch(v.type){case"invoice":return T.DOCUMENTS;case"agreement":return T.FILE_CONTRACT;case"national_id":return T.ID_CARD;case"meb_document":return T.BUILDING;default:return T.DOCUMENTS}},h=v=>{if(v.isTransactionDocument)return"Invoice";if(v.isStudentDocument)return"Student Doc";switch(v.type){case"invoice":return"Invoice";case"agreement":return"Agreement";case"national_id":return"National ID";case"meb_document":return"MEB Document";case"payment_plan":return"Payment Plan";case"received":return"Received";case"sent":return"Sent";default:return v.type||"Document"}},p=async v=>{try{const x=await fetch(v.url);if(!x.ok)throw new Error("Failed to fetch file");const b=await x.blob(),g=window.URL.createObjectURL(b),f=document.createElement("a");f.href=g,f.download=v.name||"document",document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(g)}catch(x){console.error("Download failed:",x);const b=document.createElement("a");b.href=v.url,b.download=v.name||"document",b.target="_blank",document.body.appendChild(b),b.click(),document.body.removeChild(b)}};return r.jsx(tt,{isOpen:e,onClose:t,title:c(),size:"lg",headerStyle:{backgroundColor:d()},children:r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:s.length>0?r.jsx("div",{className:"space-y-4",children:s.map(v=>(u(v),m(v),h(v),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center p-3 border-b border-gray-100",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mr-3 flex-shrink-0 ${u(v)}`,children:r.jsx(B,{path:m(v),className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-semibold text-gray-800 text-base truncate",children:v.name}),r.jsxs("div",{className:"flex items-center mt-1 flex-wrap gap-1",children:[r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700",children:h(v)}),v.studentName&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-700",children:v.studentName}),v.uploadDate&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600",children:He(v.uploadDate)})]})]})]}),r.jsx("div",{className:"p-3 sm:p-4 bg-gray-50",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-3 sm:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsxs("button",{onClick:()=>{Pr(v.url)?Lr(v.url,v.name):(console.error("Invalid document URL:",v.url),l("Invalid document URL. Please check the file.","error"))},className:"inline-flex items-center px-2 py-1 sm:px-3 sm:py-2 text-xs sm:text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",title:"Preview Document",children:[r.jsx(B,{path:T.EYE,className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"Preview"]}),r.jsxs("button",{onClick:()=>p(v),className:"inline-flex items-center px-2 py-1 sm:px-3 sm:py-2 text-xs sm:text-sm font-medium text-green-600 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",title:"Download Document",children:[r.jsx(B,{path:T.DOWNLOAD,className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"Download"]})]}),r.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[r.jsx("button",{onClick:()=>a(v),disabled:v.isTransactionDocument,className:`p-1.5 sm:p-2 rounded-lg transition-colors ${v.isTransactionDocument?"text-gray-400 cursor-not-allowed":"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-50"}`,title:v.isTransactionDocument?"Cannot edit - edit the original record instead":"Edit Document",children:r.jsx(B,{path:T.EDIT,className:"w-3 h-3 sm:w-4 sm:h-4"})}),r.jsx("button",{onClick:()=>i(v),disabled:v.isTransactionDocument,className:`p-1.5 sm:p-2 rounded-lg transition-colors ${v.isTransactionDocument?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800 hover:bg-red-50"}`,title:v.isTransactionDocument?"Cannot delete - delete the original record instead":"Delete Document",children:r.jsx(B,{path:T.TRASH,className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})})]},v.id)))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(B,{path:T.DOCUMENTS,className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),r.jsx("p",{className:"text-gray-500",children:"There are no documents in this category."})]})})})},mj=({isOpen:e,onClose:t,category:n,documents:s,onViewDocuments:a,onUploadDocument:i})=>{const o=()=>{switch(n){case"student":return"Student Documents";case"finance":return"Finance Documents";case"meb":return"MEB Documents";default:return"Documents"}},l=()=>{switch(n){case"student":return"from-blue-500 to-blue-600";case"finance":return"from-green-500 to-green-600";case"meb":return"from-amber-500 to-amber-600";default:return"from-purple-500 to-purple-600"}},c=()=>{switch(n){case"student":return T.USERS;case"finance":return T.MONEY_BILL_WAVE;case"meb":return T.BUILDING;default:return T.DOCUMENTS}};let d=[];if(n==="student")d=uj(s).map(m=>({name:m.studentName,documents:m.documents,icon:T.USERS,color:"from-blue-500 to-blue-600"}));else if(n==="finance"){const u=hj(s);d=Object.entries(u).map(([m,h])=>({name:m,documents:h,icon:c(),color:l()}))}else if(n==="meb"){const u=s.filter(h=>h.type==="received"),m=s.filter(h=>h.type==="sent");d=[{name:"Received Documents",documents:u,icon:T.DOWNLOAD,color:"from-green-500 to-green-600"},{name:"Sent Documents",documents:m,icon:T.UPLOAD,color:"from-blue-500 to-blue-600"}]}return r.jsx(tt,{isOpen:e,onClose:t,title:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${l()} flex items-center justify-center mr-3`,children:r.jsx(B,{path:c(),className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-lg font-semibold",children:o()})]}),children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-600",children:[n==="student"&&"Browse student documents organized by individual students",n==="finance"&&"Browse financial documents organized by expense categories",n==="meb"&&"Browse MEB (Ministry of Education) documents organized by type"]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:d.map((u,m)=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 p-4 cursor-pointer group",onClick:()=>a(n,u.documents,u.name),children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${u.color} flex items-center justify-center mr-3`,children:r.jsx(B,{path:u.icon,className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 group-hover:text-blue-600 transition-colors truncate",children:u.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:[u.documents.length," document",u.documents.length!==1?"s":""]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${u.color?u.color.replace("from-","bg-").replace(" to-",""):"bg-gray-500"} text-white`,children:[r.jsx(B,{path:T.DOCUMENTS,className:"w-3 h-3 mr-1"}),u.documents.length," files"]}),n==="meb"&&r.jsxs("button",{onClick:h=>{h.stopPropagation();const p=u.name.includes("Received")?"received":"sent";i(n,p)},className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-amber-500 text-white hover:bg-amber-600 transition-colors",children:[r.jsx(B,{path:T.UPLOAD,className:"w-3 h-3 mr-1"}),"Upload"]})]})]},u.name||m))})]})})},pj=()=>{const{documents:e,students:t,fetchData:n,transactions:s}=at(),{showNotification:a}=Xe(),[i,o]=I.useState(!1),[l,c]=I.useState(!1),[d,u]=I.useState(null),[m,h]=I.useState(""),[p,v]=I.useState(null),[x,b]=I.useState(null),[g,f]=I.useState([]),[y,w]=I.useState(null),[_,S]=I.useState(null),[k,A]=I.useState(!1),[F,R]=I.useState(""),[Q,E]=I.useState(!1),[q,N]=I.useState({category:null,documents:[]}),Z=()=>{const oe=[];return t.forEach(de=>{try{const De=typeof de.documents=="string"?JSON.parse(de.documents):de.documents||{},Se=typeof de.documentNames=="string"?JSON.parse(de.documentNames):de.documentNames||{};De.nationalIdUrl&&oe.push({id:`student-${de.id}-nationalId`,name:Se.nationalId||`National ID - ${de.fullName}`,type:"nationalId",category:"student",studentId:de.id,description:`National ID document for ${de.fullName}`,url:De.nationalIdUrl,uploadDate:de.createdAt?new Date(de.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],isStudentDocument:!0,studentName:de.fullName,source:"Student Enrollment"}),De.agreementUrl&&oe.push({id:`student-${de.id}-agreement`,name:Se.agreement||`Agreement - ${de.fullName}`,type:"agreement",category:"student",studentId:de.id,description:`Agreement document for ${de.fullName}`,url:De.agreementUrl,uploadDate:de.createdAt?new Date(de.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],isStudentDocument:!0,studentName:de.fullName,source:"Student Enrollment"})}catch(De){console.error("Error processing student documents for student:",de.id,De)}}),oe},Y=()=>e.map(oe=>{if(oe.category==="student"&&oe.storagePath){const de=oe.storagePath.split("/"),De=de.indexOf("student")+1,Se=de[De];if(Se){const j=t.find(ae=>ae.id===Se);return{...oe,studentId:Se,studentName:j?j.fullName:"Unknown Student",isStudentDocument:!0}}}if(oe.type==="payment_plan"&&oe.category==="student"&&!oe.storagePath){const de=oe.name.replace(" - Payment Plan",""),De=t.find(Se=>Se.fullName===de);return{...oe,studentName:de,studentId:De?De.id:null,isPaymentPlanDocument:!0}}return oe}),H=()=>{const oe=[];return s.forEach(de=>{try{if((de.type==="expense-business"||de.type==="business"||de.expenseType==="expense-business"||de.expenseType==="business")&&de.invoiceUrl){const Se=t.find(j=>j.id===de.studentId);oe.push({id:`transaction-${de.id}-invoice`,name:de.invoiceName||`Invoice - ${de.description||"Business Expense"}`,type:"invoice",category:"finance",subcategory:de.category||"Other",studentId:de.studentId,description:`Business expense invoice: ${de.description} (${de.amount} )`,url:de.invoiceUrl,uploadDate:de.createdAt?new Date(de.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],isTransactionDocument:!0,studentName:Se?Se.fullName:null,source:"Business Expense",amount:de.amount,transactionDate:de.transactionDate})}}catch(De){console.error("Error processing transaction documents for transaction:",de.id,De)}}),oe},D=[...Y(),...Z(),...H()].filter(oe=>{var De,Se,j,ae,J;if(!F.trim())return!0;const de=F.toLowerCase();return((De=oe.name)==null?void 0:De.toLowerCase().includes(de))||((Se=oe.description)==null?void 0:Se.toLowerCase().includes(de))||((j=oe.studentName)==null?void 0:j.toLowerCase().includes(de))||((ae=oe.type)==null?void 0:ae.toLowerCase().includes(de))||((J=oe.category)==null?void 0:J.toLowerCase().includes(de))}),O=D.filter(oe=>oe.category==="student"),z=D.filter(oe=>oe.category==="finance"),L=D.filter(oe=>oe.category==="meb"),C=[{title:"Student Documents",icon:T.STUDENTS,color:"#3B82F6",category:"student",documents:O,description:"National IDs and agreements for each student"},{title:"Finance Documents",icon:T.WALLET,color:"#10B981",category:"finance",documents:z,description:"Invoices and financial documents"},{title:"MEB Documents",icon:T.BUILDING,color:"#F59E0B",category:"meb",documents:L,description:"Milli Eitim Bakanl documents"}],V=(oe,de)=>{h(oe),v(de),o(!0),E(!1)},W=(oe,de)=>{N({category:oe,documents:de}),E(!0)},ie=(oe,de,De=null)=>{b(oe),f(de),w(De),E(!1)},he=oe=>{u(oe),c(!0)},ye=oe=>{S(oe),A(!0)},be=async()=>{if(_)try{if(await ve.delete("documents",_.id),_.storagePath){const{error:oe}=await Pe.storage.from("udms").remove([_.storagePath]);oe&&(console.error("Error deleting file from Supabase:",oe),a("Failed to delete file from storage.","error"))}a("Document deleted successfully!","success"),n(),b(null),w(null)}catch(oe){console.error("Error deleting document:",oe),a("Failed to delete document.","error")}finally{A(!1),S(null)}};return r.jsxs("div",{className:"relative p-4 md:p-8 bg-gray-50 rounded-lg shadow-lg",children:[r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-4 lg:space-y-0",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-600 rounded-lg flex items-center justify-center shadow-sm mr-4",children:r.jsx(B,{path:T.DOCUMENTS,className:"w-7 h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Document Management"}),r.jsx("p",{className:"text-gray-600 text-sm lg:text-base",children:"Organize and manage all documents"})]})]})})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(B,{path:T.SEARCH,className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",placeholder:"Search documents by name, student, type, or description...",value:F,onChange:oe=>R(oe.target.value),className:"block w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),F&&r.jsx("button",{onClick:()=>R(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx(B,{path:T.CLOSE,className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),F&&r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Found ",D.length," document",D.length!==1?"s":"",' matching "',F,'"']})]}),F&&D.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[r.jsx(B,{path:T.SEARCH,className:"w-4 h-4 mr-2 text-gray-600"}),"Search Results"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:D.map((oe,de)=>r.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-4 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 cursor-pointer group",onClick:()=>ie(oe.category||"other",[oe],oe.name),children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 shadow-sm ${getDocumentColor(oe)}`,children:r.jsx(B,{path:getDocumentIcon(oe),className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-800 truncate group-hover:text-blue-600 transition-colors",children:oe.name}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 font-medium",children:getDocumentTypeLabel(oe)}),oe.studentName&&r.jsx("p",{className:"text-xs text-blue-600 mt-1 font-medium",children:oe.studentName}),oe.uploadDate&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:He(oe.uploadDate)})]})]})},`${oe.id||de}-${oe.name}`))})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(oe=>r.jsx(dj,{title:oe.title,icon:oe.icon,color:oe.color,documents:oe.documents,category:oe.category,onViewDocuments:ie,onUploadDocument:V,onOpenFolders:W},oe.category))}),r.jsx(cj,{isOpen:i,onClose:()=>o(!1),category:m,onUploadSuccess:()=>o(!1),documentType:p}),x&&r.jsx(fj,{isOpen:!!x,onClose:()=>{b(null),w(null)},category:x,documents:g,onEditDocument:he,onDeleteDocument:ye,folderName:y}),q.category&&r.jsx(mj,{isOpen:Q,onClose:()=>E(!1),category:q.category,documents:q.documents,onViewDocuments:ie,onUploadDocument:V}),_&&r.jsx(nn,{isOpen:k,onClose:()=>A(!1),onConfirm:be,title:"Delete Document",message:`Are you sure you want to delete the document "${_.name}"? This action cannot be undone.`}),d&&r.jsx(lj,{isOpen:l,onClose:()=>{c(!1),u(null)},documentToEdit:d})]})};class Vg extends So.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Uncaught error:",t,n),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-red-100 text-red-800 p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),r.jsx("p",{className:"text-lg mb-4",children:"We're sorry, but an unexpected error occurred."}),this.props.showDetails&&this.state.error&&r.jsxs("details",{className:"text-left bg-red-200 p-4 rounded-lg mt-4",children:[r.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),r.jsxs("pre",{className:"whitespace-pre-wrap text-sm mt-2",children:[this.state.error.toString(),r.jsx("br",{}),this.state.errorInfo.componentStack]})]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-3 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}const gj=({activeModule:e,setActiveModule:t})=>{const{lessons:n}=at(),s=()=>{const d=new Date;return(n==null?void 0:n.filter(u=>(`${u.lessonDate}${u.startTime||"09:00"}`,new Date(`${u.lessonDate}T${u.endTime||"10:00"}`)<d&&u.status==="Complete"&&(!u.attendance||Object.keys(u.attendance).length===0))))||[]},a=()=>{const d=new Date,u=new Date().toISOString().split("T")[0];return(n==null?void 0:n.filter(m=>{const h=new Date(m.lessonDate).toISOString().split("T")[0],p=new Date(`${m.lessonDate}T${m.endTime||"10:00"}`);return h===u&&p<d&&m.status==="Complete"&&(!m.attendance||Object.keys(m.attendance).length===0)}))||[]},i=s().length>0||a().length>0,o=[{id:"dashboard",label:"Dashboard",icon:T.DASHBOARD,color:"bg-blue-600"},{id:"students",label:"Students",icon:T.STUDENTS,color:"bg-blue-600"},{id:"groups",label:"Groups",icon:T.GROUPS,color:"bg-purple-600",hasWarning:i},{id:"finances",label:"Finances",icon:T.MONEY_BILL_WAVE,color:"bg-green-600"},{id:"documents",label:"Documents",icon:T.DOCUMENTS,color:"bg-amber-600"}],l={id:"settings",label:"Settings",icon:T.SETTINGS,color:"bg-gray-600"},c=async()=>{const{error:d}=await Pe.auth.signOut();d&&console.error("Error logging out:",d.message)};return r.jsxs("aside",{className:"w-48 lg:w-56 xl:w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col shadow-2xl border-r border-gray-700",children:[r.jsxs("div",{className:"h-16 md:h-20 flex flex-col items-center justify-center border-b border-gray-700 bg-gradient-to-r from-gray-800 to-gray-900",children:[r.jsx("div",{className:"text-lg md:text-xl font-bold text-white mb-1",children:"nl Dil"}),r.jsx("div",{className:"text-xs text-gray-300 font-medium",children:"Kurs Ynetim Sistemi"})]}),r.jsx("nav",{className:"flex-1 px-2 md:px-3 py-4 md:py-6 space-y-1 md:space-y-2",children:o.map(d=>r.jsxs("a",{href:"#",onClick:()=>t(d.id),className:`flex items-center px-3 md:px-4 py-2 md:py-3 text-sm font-medium rounded-xl transition-all duration-300 group relative ${e===d.id?"bg-white text-gray-900 shadow-lg transform scale-105":"text-gray-300 hover:bg-gray-700 hover:text-white hover:shadow-md"}`,children:[r.jsx("div",{className:`w-7 h-7 md:w-8 md:h-8 ${d.color} rounded-lg flex items-center justify-center mr-2 md:mr-3 shadow-sm group-hover:scale-110 transition-transform duration-300 ${e===d.id?"shadow-md":""}`,children:r.jsx(B,{path:d.icon,className:"w-3 h-3 md:w-4 md:h-4 text-white"})}),r.jsx("span",{className:"font-semibold text-sm md:text-base",children:d.label}),d.hasWarning&&r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center shadow-sm",children:r.jsx(B,{path:T.WARNING,className:"w-2 h-2 text-white"})})]},d.id))}),r.jsxs("div",{className:"px-2 md:px-3 py-3 md:py-4 mt-auto border-t border-gray-700 bg-gradient-to-r from-gray-800 to-gray-900",children:[r.jsxs("a",{href:"#",onClick:()=>t(l.id),className:`flex items-center px-3 md:px-4 py-2 md:py-3 text-sm font-medium rounded-xl transition-all duration-300 group mb-2 md:mb-3 ${e===l.id?"bg-white text-gray-900 shadow-lg transform scale-105":"text-gray-300 hover:bg-gray-700 hover:text-white hover:shadow-md"}`,children:[r.jsx("div",{className:`w-7 h-7 md:w-8 md:h-8 ${l.color} rounded-lg flex items-center justify-center mr-2 md:mr-3 shadow-sm group-hover:scale-110 transition-transform duration-300 ${e===l.id?"shadow-md":""}`,children:r.jsx(B,{path:l.icon,className:"w-3 h-3 md:w-4 md:h-4 text-white"})}),r.jsx("span",{className:"font-semibold text-sm md:text-base",children:l.label})]},l.id),r.jsxs("button",{onClick:c,className:"flex items-center px-3 md:px-4 py-2 md:py-3 text-sm font-medium rounded-xl transition-all duration-300 w-full text-left text-gray-300 hover:bg-red-600 hover:text-white hover:shadow-md group",children:[r.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-red-600 rounded-lg flex items-center justify-center mr-2 md:mr-3 shadow-sm group-hover:scale-110 transition-transform duration-300",children:r.jsx(B,{path:T.LOGOUT,className:"w-3 h-3 md:w-4 md:h-4 text-white"})}),r.jsx("span",{className:"font-semibold text-sm md:text-base",children:"Logout"})]})]})]})},xj=({activeModule:e,setActiveModule:t})=>{const n=()=>{switch(e){case"dashboard":return r.jsx(oj,{setActiveModule:t});case"students":return r.jsx(MN,{});case"groups":return r.jsx(WN,{});case"finances":return r.jsx(JN,{});case"documents":return r.jsx(pj,{});case"settings":return r.jsx(rj,{});default:return r.jsx("div",{children:"Select a module"})}};return r.jsx("main",{className:"flex-1 p-2 sm:p-4 bg-gray-100 overflow-y-auto",children:n()})},yj=()=>{const{isLoading:e}=at(),[t,n]=I.useState("dashboard");return e?r.jsx(aj,{}):r.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[r.jsx(gj,{activeModule:t,setActiveModule:n}),r.jsx("main",{className:"flex-1 overflow-y-auto",children:r.jsx(Vg,{children:r.jsx(xj,{activeModule:t,setActiveModule:n})})})]})},vj=()=>{const[e,t]=I.useState(!1),[n,s]=I.useState(""),[a,i]=I.useState(""),{showNotification:o}=Xe(),[l,c]=I.useState(!0),d=async m=>{m.preventDefault(),t(!0);const{error:h}=await Pe.auth.signInWithPassword({email:n,password:a});h?o(h.message,"error"):o("Logged in successfully!","success"),t(!1)},u=async m=>{m.preventDefault(),t(!0);const{error:h}=await Pe.auth.signUp({email:n,password:a});h?o(h.message,"error"):o("Check your email for the confirmation link!","success"),t(!1)};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-green-50 py-8 px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[r.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),r.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),r.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),r.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-600 to-green-600 rounded-2xl flex items-center justify-center shadow-lg mb-6",children:r.jsx(B,{path:T.DASHBOARD,className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent mb-2",children:"nl Dil"}),r.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Kurs Ynetim Sistemi"})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:l?"Welcome Back!":"Create Account"}),r.jsx("p",{className:"text-gray-600",children:l?"Sign in to access your dashboard":"Join us to get started"})]}),r.jsxs("form",{className:"space-y-6",onSubmit:l?d:u,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(B,{path:T.EMAIL,className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email",value:n,onChange:m=>s(m.target.value)})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(B,{path:T.LOCK,className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password",value:a,onChange:m=>i(m.target.value)})]})]})]}),r.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:e?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):r.jsxs("div",{className:"flex items-center",children:[r.jsx(B,{path:l?T.LOGIN:T.USER_PLUS,className:"w-4 h-4 mr-2"}),l?"Sign In":"Create Account"]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>c(!l),className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:l?"Don't have an account? Sign up":"Already have an account? Sign in"})})]}),r.jsx("div",{className:"text-center text-sm text-gray-500",children:r.jsx("p",{children:" 2024 UDMS. All rights reserved."})})]})]})},bj=({onExtendSession:e,onLogout:t,timeLeft:n})=>{const[s,a]=I.useState(!1);if(I.useEffect(()=>{n<=5*60*1e3&&n>0?a(!0):a(!1)},[n]),!s)return null;const i=Math.floor(n/(60*1e3)),o=Math.floor(n%(60*1e3)/1e3);return r.jsx("div",{className:"fixed top-4 right-4 z-50 bg-yellow-50 border border-yellow-200 rounded-lg shadow-lg p-4 max-w-sm",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(B,{path:T.WARNING,className:"h-5 w-5 text-yellow-400"})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Session Timeout Warning"}),r.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[r.jsx("p",{children:"Your session will expire in:"}),r.jsxs("p",{className:"font-mono text-lg font-bold text-yellow-800",children:[i,":",o.toString().padStart(2,"0")]})]}),r.jsxs("div",{className:"mt-4 flex space-x-3",children:[r.jsx("button",{onClick:e,className:"bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700 transition-colors",children:"Stay Logged In"}),r.jsx("button",{onClick:t,className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700 transition-colors",children:"Logout Now"})]})]}),r.jsx("button",{onClick:()=>a(!1),className:"ml-3 flex-shrink-0",children:r.jsx(B,{path:T.CLOSE,className:"h-4 w-4 text-yellow-400 hover:text-yellow-600"})})]})})};function wj(){const[e,t]=I.useState(null),[n,s]=I.useState(!0),{showNotification:a}=Xe(),i=I.useRef(null),[o,l]=I.useState(null),[c,d]=I.useState(60*60*1e3),u=I.useCallback(()=>{if(e){const p=Date.now();l(p),d(60*60*1e3),i.current&&clearTimeout(i.current);const v=setTimeout(()=>{a("Session expired due to inactivity. Please log in again.","warning"),Pe.auth.signOut()},60*60*1e3);i.current=v}},[e,a]);I.useEffect(()=>{if(e&&o){const p=setInterval(()=>{const v=Date.now()-o,x=Math.max(0,60*60*1e3-v);d(x),x<=0&&clearInterval(p)},1e3);return()=>clearInterval(p)}},[e,o]);const m=I.useCallback(()=>{u(),a("Session extended!","success")},[u,a]),h=I.useCallback(()=>{Pe.auth.signOut()},[]);return I.useEffect(()=>{if(e){const p=["mousedown","mousemove","keypress","scroll","touchstart","click"],v=()=>{u()};return p.forEach(x=>{document.addEventListener(x,v,!0)}),u(),()=>{p.forEach(x=>{document.removeEventListener(x,v,!0)}),i.current&&clearTimeout(i.current)}}},[e,u]),I.useEffect(()=>{Pe.auth.getSession().then(({data:{session:v}})=>{t(v),s(!1)});const{data:{subscription:p}}=Pe.auth.onAuthStateChange((v,x)=>{t(x),s(!1),v==="SIGNED_IN"||v==="SIGNED_OUT"&&(a("Logged out successfully.","info"),i.current&&(clearTimeout(i.current),i.current=null))});return()=>p.unsubscribe()},[a]),n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading app..."}):r.jsxs(Kv,{children:[r.jsx(Vg,{children:e?r.jsxs(r.Fragment,{children:[r.jsx(yj,{}),r.jsx(bj,{timeLeft:c,onExtendSession:m,onLogout:h})]}):r.jsx(vj,{})}),r.jsx(l6,{})]})}Yl.createRoot(document.getElementById("root")).render(r.jsx(So.StrictMode,{children:r.jsx(Jv,{children:r.jsx(wj,{})})}));
